{"version":3,"sources":["../../../../src/accounts/ring.ts","../../src/layout.js","../../../../src/accounts/vesting.ts","../../../../src/accounts/safe.ts","../../../../src/accounts/registrar.ts","../../../../src/accounts/reward-event-q.ts","../../../../src/meta-entity/instruction.ts","../../../src/transaction-instruction.ts","../../../../../src/meta-entity/accounts/mqueue.ts","../../src/tokens_and_markets.ts","../../../src/index.ts","../../src/index.js","../../src/instructions.js","../../src/queue.ts","../../src/fees.ts","../../../src/simulate-transaction.ts","../../../src/client.ts","../../../../src/accounts/entity.ts","../../../../src/accounts/member.ts","../../../../src/accounts/pending-withdrawal.ts","../../../../src/accounts/locked-vendor.ts","../../../../src/accounts/unlocked-vendor.ts","../../../../../src/meta-entity/accounts/metadata.ts","../../../../src/client/accounts.ts","../../src/market.ts","../../src/slab.ts","../../../src/provider.ts","../../../src/token.ts","../../../src/networks.ts","../../../src/connection.ts","store/actions.ts","store/reducer.ts","store/index.ts","../../../../src/client/index.ts","components/common/WalletProvider.tsx","components/common/BootstrapProvider.tsx","components/common/Header.tsx","components/common/Scroll.tsx","components/common/Messaging.tsx","components/common/Footer.tsx","components/common/Layout.tsx","utils/tokens.ts","components/common/OwnedTokenAccountsSelect.tsx","components/common/Notification.tsx","components/nodes/Entity.tsx","skin/index.ts","components/nodes/EntityGallery.tsx","components/Me.tsx","components/Stake.tsx","components/rewards/RewardsList.tsx","components/rewards/DropRewardButton.tsx","components/rewards/ClaimRewardButton.tsx","components/rewards/Rewards.tsx","components/lockups/NewVesting.tsx","components/common/MyNode.tsx","components/lockups/VestingAccountCard.tsx","components/lockups/Vestings.tsx","components/common/VestingAccountsSelect.tsx","pages/MyNode.tsx","App.tsx","reportWebVitals.ts","index.tsx","../../src/token-instructions.js","../../../src/instruction.ts","../../../../src/meta-entity/transaction.ts","../../../../src/accounts/whitelist.ts"],"names":["BNLayout","buffer_layout_1","Blob","b","layout_1","exports","feeTier","account","this","u32","zeros","PublicKey","registrar","rewardEventQueue","ActionType","BootstrapState","initialState","common","bootstrapTrigger","shutdownTrigger","isWalletConnected","walletProvider","bootstrapState","NeedsBootstrap","network","networks","mainnet","ownedTokenAccounts","lockup","vestings","registry","member","isReady","entities","entityMetadata","Map","pendingWithdrawals","vendors","store","createStore","state","action","newState","type","CommonAppWillBootstrap","IsBootstrapping","CommonAppDidBootstrap","Bootstrapped","CommonWalletSetProvider","item","CommonWalletDidConnect","CommonWalletDidDisconnect","CommonSetNetwork","label","CommonTriggerBootstrap","CommonTriggerShutdown","CommonDidShutdown","s","CommonOwnedTokenAccountsSet","LockupSetVestings","vestingAccounts","LockupUpdateVesting","map","v","publicKey","equals","vesting","LockupCreateVesting","unshift","LockupSetSafe","safe","RegistryCreateEntity","entity","RegistrySetEntities","RegistryUpdateEntity","e","toString","RegistrySetMember","data","RegistrySetPoolMint","poolTokenMint","poolMint","RegistrySetPoolMintMega","megaPoolTokenMint","poolMintMega","RegistrySetRegistrar","RegistrySetPendingWithdrawals","set","memberPublicKey","RegistryCreatePendingWithdrawal","oldPw","memberWithdrawals","has","get","pendingWithdrawal","RegistryUpdatePendingWithdrawal","allPendingWithdrawals","memberPendingWithdrawals","pw","RegistrySetMetadata","forEach","emd","RegistryCreateMetadata","entityPublicKey","metadata","RegistrySetRewardEventQueue","RegistryCreateRewardVendor","vendor","pubkey","useWallet","w","useContext","WalletContext","Error","React","createContext","WalletProvider","props","useSelector","useMemo","opts","preflightCommitment","commitment","connection","Connection","url","wallet","Wallet","provider","Provider","lockupClient","LockupClient","programId","lockupProgramId","registryClient","RegistryClient","registryProgramId","metaEntityProgramId","value","children","BootstrapProvider","dispatch","useDispatch","enqueueSnackbar","useSnackbar","bootstrap","useCallback","a","startSubscriptions","rewardQueueSubscribe","conn","accounts","rewardEventQueueConnect","on","memberSubscribe","membersWithBeneficiary","members","length","undefined","subscribeMember","poolTokenSubscribe","accountConnect","parseMintAccount","fetchRegistrar","fetchSafe","fetchEntityAccounts","allEntities","entityAccounts","allMetadata","defaultEntity","filter","pop","defaultMetadata","push","fetchOwnedTokenAccounts","token","getOwnedTokenAccounts","fetchVestingAccounts","allVestings","variant","autoHideDuration","shutdown","disconnect","rewardEventQueueDisconnect","err","console","error","useEffect","catch","m","memberConnect","pendingWithdrawalsForMember","Header","isAppReady","AppBar","position","style","background","color","boxShadow","borderBottom","Toolbar","display","justifyContent","width","SerumLogoButton","BarButton","hrefClient","href","srmFaucet","NetworkSelector","WalletConnectButton","UserSelector","history","useHistory","onClick","Button","flexDirection","height","alt","src","Link","textDecoration","target","Typography","fontSize","useState","anchorEl","setAnchorEl","handleClose","marginRight","currentTarget","marginLeft","Menu","open","Boolean","onClose","Object","keys","n","MenuItem","closeSnackbar","createStakeAccount","vaultAuthority","delegate","createMember","Select","displayEmpty","renderValue","overflow","onChange","IconButton","showDisconnect","connect","Scroll","overflowY","flex","top","left","right","maxHeight","minHeight","Messages","messages","setMessages","message","setMessage","divRef","useRef","mqueue","mqueueConnect","chat","current","scrollIntoView","behavior","fetchMessages","sendMessage","from","ts","BN","Date","now","content","handleKeyPress","key","CircularProgress","textAlign","padding","fontWeight","name","paddingLeft","ref","marginTop","TextField","onKeyPress","size","marginBottom","Footer","chatDisplay","setChatDisplay","envDisplay","setEnvDisplay","isDisconnected","hasMember","zIndex","bottom","backgroundColor","borderTop","paddingRight","borderRadius","paddingTop","paddingBottom","FooterButton","isEnd","borderTopLeftRadius","NetworkEnvironment","msrmFaucet","srm","msrm","authority","maxStakePerEntity","withdrawalTimelock","deactivationTimelock","whitelist","Layout","RiskBar","DisconnectedSplash","useStyles","makeStyles","theme","root","spacing","classes","className","LinearProgress","displaySrm","amount","toDisplay","fromDisplaySrm","decimals","fromDisplay","displayMsrm","fromDisplayMsrm","toNumber","OwnedTokenAccountsSelect","p","mint","ota","fromAccount","setFromAccount","fullWidth","pk","ownedTokenAccount","float","withTx","snack","beforeLabel","afterLabel","execTx","tx","ViewTransactionOnExplorerButton","signature","explorerClusterSuffix","urlSuffix","component","rel","Entity","leader","EntityActivityLabel","JoinButton","disableElevation","disableFocusRipple","disableRipple","StakeContent","Grid","container","BalanceGridItem","balances","sptAmount","sptMegaAmount","xs","Card","joinEntity","oldEntity","newEntity","switchEntity","updatedOldEntity","updatedNewEntity","_skin","active","ready","notReady","inactive","deactivating","instance","EntityGallery","entityAddress","setEntityAddress","concat","pendingDeactivation","EntityDialog","NewButton","flexWrap","EntityCard","imageUrl","unloader","about","noBubble","textStyle","ActivityLabel","skin","text","tStyle","assign","showDialog","setShowDialog","CreateEntityDialog","Dialog","maxWidth","DialogContent","setName","setAbout","setImageUrl","isCreateEnabled","createEntity","entityAccount","newMetadata","DialogTitle","margin","DialogActions","then","disabled","Me","MemberBalancesCard","tables","title","description","rows","balance","vault","stake","vaultStake","spt","pending","vaultPendingWithdrawal","vaultMega","vaultStakeMega","sptMega","vaultPendingWithdrawalMega","CardHeader","subheader","CardContent","t","BalanceTable","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","row","scope","Stake","createPoolTokens","isMega","isLocked","balanceId","owner","u64","updatedEntity","redeemPoolTokens","startStakeWithdrawal","pwAccount","createSrmPool","shares","redeemSrmPool","createMsrmPool","redeemMsrmPool","PoolCard","create","redeem","RedemptionList","srmPoolAmount","setSrmPoolAmount","setIsLocked","pricePerShare","stakeRateMega","stakeRate","supply","FormControl","parseInt","total","lt","mul","currentPoolTokens","FormControlLabel","control","Switch","checked","labelPlacement","idx","PendingStakeListItem","isLast","sptLabel","l","beneficiary","pool","PendingWithdrawalButton","startTs","toLocaleString","endTs","endPendingWithdrawal","endStakeWithdrawal","updatedPendingWithdrawal","burned","RewardsList","rewards","List","r","RewardListItem","rli","ListItem","ListItemText","primary","rewardEvent","reward","lockedAlloc","unlockedAlloc","setOpen","amountLabel","fromLabel","cursor","button","visibility","needsClaim","secondary","Collapse","in","timeout","unmountOnExit","RewardListItemDetails","poolTokenSupply","expiryTs","toLocaleDateString","expiryReceiver","PoolTabViewModel","RewardTypeViewModel","RewardListItemViewModel","ctx","event","tailCursor","eventInner","ownsPool","cmp","ownsPoolMega","ownsPoolShares","notYetClaimed","rewardsCursor","isEligible","lastStakeTs","DropRewardButton","DropRewardDialog","Srm","poolTab","setPoolTab","Unlocked","rewardTypeTab","setRewardTypeTab","Tabs","_e","Tab","Locked","Msrm","DropUnlockedForm","DropLockedForm","megaPoolMint","lockedRewardDisplayAmount","setLockedRewardDisplayAmount","setExpiryTs","depositor","setDepositor","mintLabel","setMintLabel","setMint","isSendEnabled","sendUnlockedReward","notification","lockedRewardAmount","dropUnlockedReward","depositorMint","DropVendorForm","onCancel","setEndTs","periodCount","setPeriodCount","sendLockedRewards","dropLockedReward","f","FormHelperText","InputLabel","id","InputLabelProps","shrink","parseFloat","InputProps","inputProps","min","d","getTime","placeholder","ClaimRewardButton","setToken","clickHandler","lockedRewardVendor","rewardVendorAuthority","nonce","vendorSigner","claimLockedReward","unlockedRewardVendor","claimUnlockedReward","Rewards","loadVendorIfNeeded","fromMessage","reverse","nextReward","sort","shift","Paper","NewVestingButton","NewVestingDialog","defaultEndDate","defaultEndTs","setBeneficiary","isValidBeneficiary","_","displayBeneficiaryError","timestamp","setTimestamp","displayAmount","setDisplayAmount","submitBtnEnabled","isLoading","setIsLoading","createVestingClickHandler","beneficiaryPublicKey","getAccountInfo","beneficiaryAccount","SystemProgram","createVesting","depositAmount","vestingAccount","helperText","defaultValue","TabModel","VestingAccountCard","displayFn","k","outstandingLabel","outstanding","tsOverflow","sub","mod","shiftedStartTs","period","div","vestingDates","Array","formatDate","rewardOverflow","startBalance","rewardPerPeriod","cumulativeVesting","startLabel","endLabel","availableForWithdrawal","setAvailableForWithdrawal","withdrawalAccount","setWithdrawalAccount","withdrawEnabled","gtn","withdraw","tokenAccount","newVesting","toBase58","labels","series","options","axisY","FixedScaleAxis","low","high","ticks","axisX","lineSmooth","Interpolation","step","whitelistOwned","grantor","getMonth","getDate","getFullYear","Vestings","Container","fixed","disablePadding","VestingAccountsSelect","deposit","availableAmount","MyNode","tab","setTab","MyNodeBanner","Lockup","showDepositDialog","setShowDepositDialog","showWithdrawDialog","setShowWithdrawDialog","DepositDialog","WithdrawDialog","TransferDialog","contextText","onTransfer","coin","depositLocked","vaultOwner","withdrawLocked","srmMint","msrmMint","setCoin","setFrom","setVesting","maxDisplayAmount","setMaxDisplayAmount","submitBtnDisabled","TransitionComponent","Transition","keepMounted","max","minWidth","_maxDisplayAmount","forwardRef","Slide","direction","MyNodePage","App","createMuiTheme","palette","default","typography","fontFamily","join","overrides","CssBaseline","maxSnack","basename","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","BufferLayout","u8","publicKeyLayout","LAYOUT","addVariant","struct"],"mappings":"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","file":"static/js/main.cdb99e30.chunk.js","sourcesContent":["import { u32 } from 'buffer-layout';\nconst HEAD_START = 32;\nconst TAIL_START = 36;\nexport class Ring {\n    constructor(data, decoder, capacity, messageSize) {\n        this.data = data;\n        this.decoder = decoder;\n        this.capacity = capacity;\n        this.messageSize = messageSize;\n    }\n    bufferSize() {\n        return this.capacity * this.messageSize + Ring.MESSAGE_START;\n    }\n    messages() {\n        let messages = [];\n        let idx = this.tail();\n        let head = this.head();\n        while (idx % this.capacity !== head) {\n            messages.push(this.messageAt(idx));\n            idx += 1;\n        }\n        return messages;\n    }\n    messageAt(idx) {\n        let start = idx * this.messageSize + Ring.MESSAGE_START;\n        let end = start + this.messageSize;\n        let bytes = this.data.slice(start, end);\n        return this.decoder.decode(bytes);\n    }\n    head() {\n        return this.headCursor() % this.capacity;\n    }\n    headCursor() {\n        let bytes = this.data.slice(HEAD_START, HEAD_START + 4);\n        return u32().decode(bytes);\n    }\n    tail() {\n        return this.tailCursor() % this.capacity;\n    }\n    tailCursor() {\n        let bytes = this.data.slice(TAIL_START, TAIL_START + 4);\n        return u32().decode(bytes);\n    }\n}\nRing.MESSAGE_START = 40;\n//# sourceMappingURL=ring.js.map","\"use strict\";\n// @ts-nocheck\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setLayoutEncoder = exports.setLayoutDecoder = exports.accountFlagsLayout = exports.orderTypeLayout = exports.sideLayout = exports.VersionedLayout = exports.WideBits = exports.u128 = exports.u64 = exports.publicKeyLayout = exports.zeros = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nclass Zeros extends buffer_layout_1.Blob {\n    decode(b, offset) {\n        const slice = super.decode(b, offset);\n        if (!slice.every((v) => v === 0)) {\n            throw new Error('nonzero padding bytes');\n        }\n        return slice;\n    }\n}\nfunction zeros(length) {\n    return new Zeros(length);\n}\nexports.zeros = zeros;\nclass PublicKeyLayout extends buffer_layout_1.Blob {\n    constructor(property) {\n        super(32, property);\n    }\n    decode(b, offset) {\n        return new web3_js_1.PublicKey(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nfunction publicKeyLayout(property) {\n    return new PublicKeyLayout(property);\n}\nexports.publicKeyLayout = publicKeyLayout;\nclass BNLayout extends buffer_layout_1.Blob {\n    decode(b, offset) {\n        return new bn_js_1.default(super.decode(b, offset), 10, 'le');\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toArrayLike(Buffer, 'le', this.span), b, offset);\n    }\n}\nfunction u64(property) {\n    return new BNLayout(8, property);\n}\nexports.u64 = u64;\nfunction u128(property) {\n    return new BNLayout(16, property);\n}\nexports.u128 = u128;\nclass WideBits extends buffer_layout_1.Layout {\n    constructor(property) {\n        super(8, property);\n        this._lower = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n        this._upper = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n    }\n    addBoolean(property) {\n        if (this._lower.fields.length < 32) {\n            this._lower.addBoolean(property);\n        }\n        else {\n            this._upper.addBoolean(property);\n        }\n    }\n    decode(b, offset = 0) {\n        const lowerDecoded = this._lower.decode(b, offset);\n        const upperDecoded = this._upper.decode(b, offset + this._lower.span);\n        return { ...lowerDecoded, ...upperDecoded };\n    }\n    encode(src, b, offset = 0) {\n        return (this._lower.encode(src, b, offset) +\n            this._upper.encode(src, b, offset + this._lower.span));\n    }\n}\nexports.WideBits = WideBits;\nclass VersionedLayout extends buffer_layout_1.Layout {\n    constructor(version, inner, property) {\n        super(inner.span > 0 ? inner.span + 1 : inner.span, property);\n        this.version = version;\n        this.inner = inner;\n    }\n    decode(b, offset = 0) {\n        // if (b.readUInt8(offset) !== this._version) {\n        //   throw new Error('invalid version');\n        // }\n        return this.inner.decode(b, offset + 1);\n    }\n    encode(src, b, offset = 0) {\n        b.writeUInt8(this.version, offset);\n        return 1 + this.inner.encode(src, b, offset + 1);\n    }\n    getSpan(b, offset = 0) {\n        return 1 + this.inner.getSpan(b, offset + 1);\n    }\n}\nexports.VersionedLayout = VersionedLayout;\nclass EnumLayout extends buffer_layout_1.UInt {\n    constructor(values, span, property) {\n        super(span, property);\n        this.values = values;\n    }\n    encode(src, b, offset) {\n        if (this.values[src] !== undefined) {\n            return super.encode(this.values[src], b, offset);\n        }\n        throw new Error('Invalid ' + this.property);\n    }\n    decode(b, offset) {\n        const decodedValue = super.decode(b, offset);\n        const entry = Object.entries(this.values).find(([, value]) => value === decodedValue);\n        if (entry) {\n            return entry[0];\n        }\n        throw new Error('Invalid ' + this.property);\n    }\n}\nfunction sideLayout(property) {\n    return new EnumLayout({ buy: 0, sell: 1 }, 4, property);\n}\nexports.sideLayout = sideLayout;\nfunction orderTypeLayout(property) {\n    return new EnumLayout({ limit: 0, ioc: 1, postOnly: 2 }, 4, property);\n}\nexports.orderTypeLayout = orderTypeLayout;\nconst ACCOUNT_FLAGS_LAYOUT = new WideBits();\nACCOUNT_FLAGS_LAYOUT.addBoolean('initialized');\nACCOUNT_FLAGS_LAYOUT.addBoolean('market');\nACCOUNT_FLAGS_LAYOUT.addBoolean('openOrders');\nACCOUNT_FLAGS_LAYOUT.addBoolean('requestQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('eventQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('bids');\nACCOUNT_FLAGS_LAYOUT.addBoolean('asks');\nfunction accountFlagsLayout(property = 'accountFlags') {\n    return ACCOUNT_FLAGS_LAYOUT.replicate(property);\n}\nexports.accountFlagsLayout = accountFlagsLayout;\nfunction setLayoutDecoder(layout, decoder) {\n    const originalDecode = layout.decode;\n    layout.decode = function decode(b, offset = 0) {\n        return decoder(originalDecode.call(this, b, offset));\n    };\n}\nexports.setLayoutDecoder = setLayoutDecoder;\nfunction setLayoutEncoder(layout, encoder) {\n    const originalEncode = layout.encode;\n    layout.encode = function encode(src, b, offset) {\n        return originalEncode.call(this, encoder(src), b, offset);\n    };\n    return layout;\n}\nexports.setLayoutEncoder = setLayoutEncoder;\n//# sourceMappingURL=layout.js.map","import { struct, u8 } from 'buffer-layout';\nimport { bool, i64, publicKey, u64 } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nexport const VESTING_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('safe'),\n    publicKey('beneficiary'),\n    publicKey('mint'),\n    publicKey('vault'),\n    publicKey('grantor'),\n    u64('outstanding'),\n    u64('startBalance'),\n    i64('startTs'),\n    i64('endTs'),\n    u64('periodCount'),\n    u64('whitelistOwned'),\n    u8('nonce'),\n]);\nexport function decode(data) {\n    return VESTING_LAYOUT.decode(data);\n}\nexport function encode(v) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = VESTING_LAYOUT.encode(v, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultVesting() {\n    return {\n        initialized: false,\n        safe: new PublicKey(Buffer.alloc(32)),\n        beneficiary: new PublicKey(Buffer.alloc(32)),\n        mint: new PublicKey(Buffer.alloc(32)),\n        vault: new PublicKey(Buffer.alloc(32)),\n        grantor: new PublicKey(Buffer.alloc(32)),\n        outstanding: new BN(0),\n        startBalance: new BN(0),\n        startTs: new BN(0),\n        endTs: new BN(0),\n        periodCount: new BN(0),\n        whitelistOwned: new BN(0),\n        nonce: 0,\n    };\n}\nexport const SIZE = encode(defaultVesting()).length;\n//# sourceMappingURL=vesting.js.map","import { struct } from 'buffer-layout';\nimport { bool, publicKey } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nexport const SAFE_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('authority'),\n    publicKey('whitelist'),\n]);\nexport function decode(data) {\n    return SAFE_LAYOUT.decode(data);\n}\nexport function encode(s) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = SAFE_LAYOUT.encode(s, buffer);\n    return buffer.slice(0, len);\n}\nexport const SIZE = encode({\n    initialized: false,\n    authority: new PublicKey(Buffer.alloc(32)),\n    whitelist: new PublicKey(Buffer.alloc(32)),\n}).length;\n//# sourceMappingURL=safe.js.map","import { struct, u8 } from 'buffer-layout';\nimport { bool, i64, publicKey, u64 as borshU64 } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport { u64 } from '@solana/spl-token';\nconst REGISTRAR_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('authority'),\n    u8('nonce'),\n    borshU64('maxStakePerEntity'),\n    i64('withdrawalTimelock'),\n    i64('deactivationTimelock'),\n    publicKey('rewardEventQueue'),\n    publicKey('mint'),\n    publicKey('megaMint'),\n    publicKey('poolMint'),\n    publicKey('poolMintMega'),\n    borshU64('stakeRate'),\n    borshU64('stakeRateMega'),\n]);\nexport function decode(data) {\n    return REGISTRAR_LAYOUT.decode(data);\n}\nexport function encode(r) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = REGISTRAR_LAYOUT.encode(r, buffer);\n    return buffer.slice(0, len);\n}\nexport const SIZE = encode({\n    initialized: false,\n    authority: new PublicKey(Buffer.alloc(32)),\n    nonce: 0,\n    maxStakePerEntity: new u64(0),\n    withdrawalTimelock: new u64(0),\n    deactivationTimelock: new u64(0),\n    rewardEventQueue: new PublicKey(Buffer.alloc(32)),\n    mint: new PublicKey(Buffer.alloc(32)),\n    megaMint: new PublicKey(Buffer.alloc(32)),\n    poolMint: new PublicKey(Buffer.alloc(32)),\n    poolMintMega: new PublicKey(Buffer.alloc(32)),\n    stakeRate: new u64(0),\n    stakeRateMega: new u64(0),\n}).length;\n//# sourceMappingURL=registrar.js.map","import { struct } from 'buffer-layout';\nimport { publicKey, u64, rustEnum, i64 } from '@project-serum/borsh';\nimport { Ring } from './ring';\nconst CAPACITY = 13792;\nconst MESSAGE_SIZE = 145;\nexport class RewardEventQueue extends Ring {\n    constructor(data) {\n        super(data, new RewardEventDecoder(), CAPACITY, MESSAGE_SIZE);\n        if (data.length != this.bufferSize()) {\n            throw new Error(`expected data length ${this.bufferSize()} got ${data.length}`);\n        }\n    }\n    static accountSize() {\n        return CAPACITY * MESSAGE_SIZE + Ring.MESSAGE_START;\n    }\n}\nclass RewardEventDecoder {\n    decode(data) {\n        return REWARD_EVENT_LAYOUT.decode(data);\n    }\n}\nconst REWARD_EVENT_LAYOUT = rustEnum([\n    struct([\n        publicKey('from'),\n        u64('total'),\n        publicKey('pool'),\n        publicKey('vendor'),\n        publicKey('mint'),\n        i64('ts'),\n    ], 'lockedAlloc'),\n    struct([\n        publicKey('from'),\n        u64('total'),\n        publicKey('pool'),\n        publicKey('vendor'),\n        publicKey('mint'),\n        i64('ts'),\n    ], 'unlockedAlloc'),\n]);\n//# sourceMappingURL=reward-event-q.js.map","import { struct } from 'buffer-layout';\nimport { option, publicKey, str, rustEnum, } from '@project-serum/borsh';\nimport { MESSAGE_LAYOUT } from './accounts/mqueue';\nconst META_ENTITY_INSTRUCTION_LAYOUT = rustEnum([\n    struct([\n        publicKey('entity'),\n        publicKey('authority'),\n        str('name'),\n        str('about'),\n        str('imageUrl'),\n        publicKey('chat'),\n    ], 'initialize'),\n    struct([\n        option(str(), 'name'),\n        option(str(), 'about'),\n        option(publicKey(), 'chat'),\n    ], 'updateMetaEntity'),\n    struct([MESSAGE_LAYOUT.replicate('msg')], 'sendMessage'),\n]);\nexport function decode(data) {\n    return META_ENTITY_INSTRUCTION_LAYOUT.decode(data);\n}\nexport function encode(i) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = META_ENTITY_INSTRUCTION_LAYOUT.encode(i, buffer);\n    return buffer.slice(0, len);\n}\n//# sourceMappingURL=instruction.js.map","import { PublicKey, SystemProgram, TransactionInstruction, SYSVAR_RENT_PUBKEY, SYSVAR_CLOCK_PUBKEY, } from '@solana/web3.js';\nimport { createTokenAccountInstrs } from '@project-serum/common';\nimport { TOKEN_PROGRAM_ID } from '@project-serum/serum/lib/token-instructions';\nimport { SIZE as VESTING_SIZE } from './accounts/vesting';\nimport * as instruction from './instruction';\nexport async function createVesting(provider, programId, safe, vesting, vault, mint, depositor, depositorAuthorityPubkey, beneficiary, endTs, periodCount, depositAmount) {\n    let { nonce, ixs } = await allocVestingIxs(provider, programId, safe, vesting, vault, mint, beneficiary);\n    return [\n        ...ixs,\n        // Create Vesting.\n        new TransactionInstruction({\n            keys: [\n                { pubkey: vesting, isWritable: true, isSigner: false },\n                { pubkey: depositor, isWritable: true, isSigner: false },\n                {\n                    pubkey: depositorAuthorityPubkey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: safe, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId,\n            data: instruction.encode({\n                createVesting: {\n                    beneficiary,\n                    endTs,\n                    periodCount,\n                    depositAmount,\n                    nonce,\n                },\n            }),\n        }),\n    ];\n}\nexport async function allocVestingIxs(provider, programId, safe, vesting, vault, mint, beneficiary) {\n    const [vaultAuthority, nonce] = await PublicKey.findProgramAddress([safe.toBuffer(), beneficiary.toBuffer()], programId);\n    const createVaultInstructions = await createTokenAccountInstrs(provider, vault, mint, vaultAuthority);\n    return {\n        nonce,\n        ixs: [\n            ...createVaultInstructions,\n            // Allocate account.\n            SystemProgram.createAccount({\n                fromPubkey: provider.wallet.publicKey,\n                newAccountPubkey: vesting,\n                space: VESTING_SIZE,\n                lamports: await provider.connection.getMinimumBalanceForRentExemption(VESTING_SIZE),\n                programId,\n            }),\n        ],\n    };\n}\n//# sourceMappingURL=transaction-instruction.js.map","import { struct } from 'buffer-layout';\nimport { publicKey, u64, str } from '@project-serum/borsh';\nimport { Ring } from '../../accounts/ring';\nconst CAPACITY = 500;\nconst MESSAGE_SIZE = 320;\nexport class MQueue extends Ring {\n    constructor(data) {\n        super(data, new MessageDecoder(), CAPACITY, MESSAGE_SIZE);\n        if (data.length != this.bufferSize()) {\n            throw new Error(`expected data length ${this.bufferSize()} got ${data.length}`);\n        }\n    }\n    static accountSize() {\n        return CAPACITY * MESSAGE_SIZE + Ring.MESSAGE_START;\n    }\n}\nclass MessageDecoder {\n    decode(data) {\n        return decode(data);\n    }\n}\nexport const MESSAGE_LAYOUT = struct([\n    publicKey('from'),\n    u64('ts'),\n    str('content'),\n]);\nexport function decode(data) {\n    return MESSAGE_LAYOUT.decode(data);\n}\nexport function encode(e) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = MESSAGE_LAYOUT.encode(e, buffer);\n    return buffer.slice(0, len);\n}\n//# sourceMappingURL=mqueue.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MARKETS = exports.TOKEN_MINTS = exports.getLayoutVersion = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst markets_json_1 = __importDefault(require(\"./markets.json\"));\nconst token_mints_json_1 = __importDefault(require(\"./token-mints.json\"));\nfunction getLayoutVersion(programId) {\n    if (programId.equals(new web3_js_1.PublicKey('4ckmDgGdxQoPDLUkDT3vHgSAkzA3QRdNq5ywwY4sUSJn')) ||\n        programId.equals(new web3_js_1.PublicKey('BJ3jrUzddfuSrZHXSCxMUUQsjKEyLmuuyZebkcaFp2fg'))) {\n        return 1;\n    }\n    return 2;\n}\nexports.getLayoutVersion = getLayoutVersion;\nexports.TOKEN_MINTS = token_mints_json_1.default.map((mint) => {\n    return {\n        address: new web3_js_1.PublicKey(mint.address),\n        name: mint.name,\n    };\n});\nexports.MARKETS = markets_json_1.default.map((market) => {\n    return {\n        address: new web3_js_1.PublicKey(market.address),\n        name: market.name,\n        programId: new web3_js_1.PublicKey(market.programId),\n        deprecated: market.deprecated,\n    };\n});\n//# sourceMappingURL=tokens_and_markets.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rustEnum = exports.str = exports.vecU8 = exports.tagged = exports.vec = exports.bool = exports.option = exports.publicKey = exports.i64 = exports.u64 = exports.struct = exports.u32 = exports.u8 = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nvar buffer_layout_2 = require(\"buffer-layout\");\nObject.defineProperty(exports, \"u8\", { enumerable: true, get: function () { return buffer_layout_2.u8; } });\nObject.defineProperty(exports, \"u32\", { enumerable: true, get: function () { return buffer_layout_2.u32; } });\nObject.defineProperty(exports, \"struct\", { enumerable: true, get: function () { return buffer_layout_2.struct; } });\nclass BNLayout extends buffer_layout_1.Layout {\n    constructor(span, signed, property) {\n        super(span, property);\n        this.blob = buffer_layout_1.blob(span);\n        this.signed = signed;\n    }\n    decode(b, offset = 0) {\n        const num = new bn_js_1.default(this.blob.decode(b, offset), 10, 'le');\n        if (this.signed) {\n            return num.fromTwos(this.span * 8).clone();\n        }\n        return num;\n    }\n    encode(src, b, offset = 0) {\n        if (this.signed) {\n            src = src.toTwos(this.span * 8);\n        }\n        return this.blob.encode(src.toArrayLike(Buffer, 'le', this.span), b, offset);\n    }\n}\nfunction u64(property) {\n    return new BNLayout(8, false, property);\n}\nexports.u64 = u64;\nfunction i64(property) {\n    return new BNLayout(8, true, property);\n}\nexports.i64 = i64;\nclass WrappedLayout extends buffer_layout_1.Layout {\n    constructor(layout, decoder, encoder, property) {\n        super(layout.span, property);\n        this.layout = layout;\n        this.decoder = decoder;\n        this.encoder = encoder;\n    }\n    decode(b, offset) {\n        return this.decoder(this.layout.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return this.layout.encode(this.encoder(src), b, offset);\n    }\n    getSpan(b, offset) {\n        return this.layout.getSpan(b, offset);\n    }\n}\nfunction publicKey(property) {\n    return new WrappedLayout(buffer_layout_1.blob(32), (b) => new web3_js_1.PublicKey(b), (key) => key.toBuffer(), property);\n}\nexports.publicKey = publicKey;\nclass OptionLayout extends buffer_layout_1.Layout {\n    constructor(layout, property) {\n        super(-1, property);\n        this.layout = layout;\n        this.discriminator = buffer_layout_1.u8();\n    }\n    encode(src, b, offset = 0) {\n        if (src === null || src === undefined) {\n            return this.discriminator.encode(0, b, offset);\n        }\n        this.discriminator.encode(1, b, offset);\n        return this.layout.encode(src, b, offset + 1) + 1;\n    }\n    decode(b, offset = 0) {\n        const discriminator = this.discriminator.decode(b, offset);\n        if (discriminator === 0) {\n            return null;\n        }\n        else if (discriminator === 1) {\n            return this.layout.decode(b, offset + 1);\n        }\n        throw new Error('Invalid option ' + this.property);\n    }\n    getSpan(b, offset = 0) {\n        const discriminator = this.discriminator.decode(b, offset);\n        if (discriminator === 0) {\n            return 1;\n        }\n        else if (discriminator === 1) {\n            return this.layout.getSpan(b, offset + 1) + 1;\n        }\n        throw new Error('Invalid option ' + this.property);\n    }\n}\nfunction option(layout, property) {\n    return new OptionLayout(layout, property);\n}\nexports.option = option;\nfunction bool(property) {\n    return new WrappedLayout(buffer_layout_1.u8(), decodeBool, encodeBool, property);\n}\nexports.bool = bool;\nfunction decodeBool(value) {\n    if (value === 0) {\n        return false;\n    }\n    else if (value === 1) {\n        return true;\n    }\n    throw new Error('Invalid bool: ' + value);\n}\nfunction encodeBool(value) {\n    return value ? 1 : 0;\n}\nfunction vec(elementLayout, property) {\n    const length = buffer_layout_1.u32('length');\n    const layout = buffer_layout_1.struct([\n        length,\n        buffer_layout_1.seq(elementLayout, buffer_layout_1.offset(length, -length.span), 'values'),\n    ]);\n    return new WrappedLayout(layout, ({ values }) => values, values => ({ values }), property);\n}\nexports.vec = vec;\nfunction tagged(tag, layout, property) {\n    const wrappedLayout = buffer_layout_1.struct([\n        u64('tag'),\n        layout.replicate('data'),\n    ]);\n    function decodeTag({ tag: receivedTag, data }) {\n        if (!receivedTag.eq(tag)) {\n            throw new Error('Invalid tag, expected: ' +\n                tag.toString('hex') +\n                ', got: ' +\n                receivedTag.toString('hex'));\n        }\n        return data;\n    }\n    return new WrappedLayout(wrappedLayout, decodeTag, data => ({ tag, data }), property);\n}\nexports.tagged = tagged;\nfunction vecU8(property) {\n    const length = buffer_layout_1.u32('length');\n    const layout = buffer_layout_1.struct([\n        length,\n        buffer_layout_1.blob(buffer_layout_1.offset(length, -length.span), 'data'),\n    ]);\n    return new WrappedLayout(layout, ({ data }) => data, data => ({ data }), property);\n}\nexports.vecU8 = vecU8;\nfunction str(property) {\n    return new WrappedLayout(vecU8(), data => data.toString('utf-8'), s => Buffer.from(s, 'utf-8'), property);\n}\nexports.str = str;\nfunction rustEnum(variants, property) {\n    const unionLayout = buffer_layout_1.union(buffer_layout_1.u8(), property);\n    variants.forEach((variant, index) => unionLayout.addVariant(index, variant, variant.property));\n    return unionLayout;\n}\nexports.rustEnum = rustEnum;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenInstructions = exports.EVENT_QUEUE_LAYOUT = exports.REQUEST_QUEUE_LAYOUT = exports.decodeRequestQueue = exports.decodeEventQueue = exports.getLayoutVersion = exports.MARKETS = exports.TOKEN_MINTS = exports.supportsSrmFeeDiscounts = exports.getFeeRates = exports.getFeeTier = exports.NEW_ORDER_OWNER_INDEX = exports.NEW_ORDER_OPEN_ORDERS_INDEX = exports.SETTLE_FUNDS_QUOTE_WALLET_INDEX = exports.SETTLE_FUNDS_BASE_WALLET_INDEX = exports.decodeInstruction = exports.DexInstructions = exports.OpenOrders = exports.Orderbook = exports.Market = void 0;\nvar market_1 = require(\"./market\");\nObject.defineProperty(exports, \"Market\", { enumerable: true, get: function () { return market_1.Market; } });\nObject.defineProperty(exports, \"Orderbook\", { enumerable: true, get: function () { return market_1.Orderbook; } });\nObject.defineProperty(exports, \"OpenOrders\", { enumerable: true, get: function () { return market_1.OpenOrders; } });\nvar instructions_1 = require(\"./instructions\");\nObject.defineProperty(exports, \"DexInstructions\", { enumerable: true, get: function () { return instructions_1.DexInstructions; } });\nObject.defineProperty(exports, \"decodeInstruction\", { enumerable: true, get: function () { return instructions_1.decodeInstruction; } });\nObject.defineProperty(exports, \"SETTLE_FUNDS_BASE_WALLET_INDEX\", { enumerable: true, get: function () { return instructions_1.SETTLE_FUNDS_BASE_WALLET_INDEX; } });\nObject.defineProperty(exports, \"SETTLE_FUNDS_QUOTE_WALLET_INDEX\", { enumerable: true, get: function () { return instructions_1.SETTLE_FUNDS_QUOTE_WALLET_INDEX; } });\nObject.defineProperty(exports, \"NEW_ORDER_OPEN_ORDERS_INDEX\", { enumerable: true, get: function () { return instructions_1.NEW_ORDER_OPEN_ORDERS_INDEX; } });\nObject.defineProperty(exports, \"NEW_ORDER_OWNER_INDEX\", { enumerable: true, get: function () { return instructions_1.NEW_ORDER_OWNER_INDEX; } });\nvar fees_1 = require(\"./fees\");\nObject.defineProperty(exports, \"getFeeTier\", { enumerable: true, get: function () { return fees_1.getFeeTier; } });\nObject.defineProperty(exports, \"getFeeRates\", { enumerable: true, get: function () { return fees_1.getFeeRates; } });\nObject.defineProperty(exports, \"supportsSrmFeeDiscounts\", { enumerable: true, get: function () { return fees_1.supportsSrmFeeDiscounts; } });\nvar tokens_and_markets_1 = require(\"./tokens_and_markets\");\nObject.defineProperty(exports, \"TOKEN_MINTS\", { enumerable: true, get: function () { return tokens_and_markets_1.TOKEN_MINTS; } });\nObject.defineProperty(exports, \"MARKETS\", { enumerable: true, get: function () { return tokens_and_markets_1.MARKETS; } });\nObject.defineProperty(exports, \"getLayoutVersion\", { enumerable: true, get: function () { return tokens_and_markets_1.getLayoutVersion; } });\nvar queue_1 = require(\"./queue\");\nObject.defineProperty(exports, \"decodeEventQueue\", { enumerable: true, get: function () { return queue_1.decodeEventQueue; } });\nObject.defineProperty(exports, \"decodeRequestQueue\", { enumerable: true, get: function () { return queue_1.decodeRequestQueue; } });\nObject.defineProperty(exports, \"REQUEST_QUEUE_LAYOUT\", { enumerable: true, get: function () { return queue_1.REQUEST_QUEUE_LAYOUT; } });\nObject.defineProperty(exports, \"EVENT_QUEUE_LAYOUT\", { enumerable: true, get: function () { return queue_1.EVENT_QUEUE_LAYOUT; } });\nexports.TokenInstructions = __importStar(require(\"./token-instructions\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DexInstructions = exports.decodeInstruction = exports.encodeInstruction = exports.INSTRUCTION_LAYOUT = exports.NEW_ORDER_OWNER_INDEX = exports.NEW_ORDER_OPEN_ORDERS_INDEX = exports.SETTLE_FUNDS_QUOTE_WALLET_INDEX = exports.SETTLE_FUNDS_BASE_WALLET_INDEX = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst layout_1 = require(\"./layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst token_instructions_1 = require(\"./token-instructions\");\n// NOTE: Update these if the position of arguments for the settleFunds instruction changes\nexports.SETTLE_FUNDS_BASE_WALLET_INDEX = 5;\nexports.SETTLE_FUNDS_QUOTE_WALLET_INDEX = 6;\n// NOTE: Update these if the position of arguments for the newOrder instruction changes\nexports.NEW_ORDER_OPEN_ORDERS_INDEX = 1;\nexports.NEW_ORDER_OWNER_INDEX = 4;\nexports.INSTRUCTION_LAYOUT = new layout_1.VersionedLayout(0, buffer_layout_1.union(buffer_layout_1.u32('instruction')));\nexports.INSTRUCTION_LAYOUT.inner.addVariant(0, buffer_layout_1.struct([\n    layout_1.u64('baseLotSize'),\n    layout_1.u64('quoteLotSize'),\n    buffer_layout_1.u16('feeRateBps'),\n    layout_1.u64('vaultSignerNonce'),\n    layout_1.u64('quoteDustThreshold'),\n]), 'initializeMarket');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(1, buffer_layout_1.struct([\n    layout_1.sideLayout('side'),\n    layout_1.u64('limitPrice'),\n    layout_1.u64('maxQuantity'),\n    layout_1.orderTypeLayout('orderType'),\n    layout_1.u64('clientId'),\n]), 'newOrder');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(2, buffer_layout_1.struct([buffer_layout_1.u16('limit')]), 'matchOrders');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(3, buffer_layout_1.struct([buffer_layout_1.u16('limit')]), 'consumeEvents');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(4, buffer_layout_1.struct([\n    layout_1.sideLayout('side'),\n    layout_1.u128('orderId'),\n    layout_1.publicKeyLayout('openOrders'),\n    buffer_layout_1.u8('openOrdersSlot'),\n]), 'cancelOrder');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(5, buffer_layout_1.struct([]), 'settleFunds');\nexports.INSTRUCTION_LAYOUT.inner.addVariant(6, buffer_layout_1.struct([layout_1.u64('clientId')]), 'cancelOrderByClientId');\nfunction encodeInstruction(instruction) {\n    const b = Buffer.alloc(100);\n    return b.slice(0, exports.INSTRUCTION_LAYOUT.encode(instruction, b));\n}\nexports.encodeInstruction = encodeInstruction;\nfunction decodeInstruction(message) {\n    return exports.INSTRUCTION_LAYOUT.decode(message);\n}\nexports.decodeInstruction = decodeInstruction;\nclass DexInstructions {\n    static initializeMarket({ market, requestQueue, eventQueue, bids, asks, baseVault, quoteVault, baseMint, quoteMint, baseLotSize, quoteLotSize, feeRateBps, vaultSignerNonce, quoteDustThreshold, programId, }) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                { pubkey: market, isSigner: false, isWritable: true },\n                { pubkey: requestQueue, isSigner: false, isWritable: true },\n                { pubkey: eventQueue, isSigner: false, isWritable: true },\n                { pubkey: bids, isSigner: false, isWritable: true },\n                { pubkey: asks, isSigner: false, isWritable: true },\n                { pubkey: baseVault, isSigner: false, isWritable: true },\n                { pubkey: quoteVault, isSigner: false, isWritable: true },\n                { pubkey: baseMint, isSigner: false, isWritable: false },\n                { pubkey: quoteMint, isSigner: false, isWritable: false },\n            ],\n            programId,\n            data: encodeInstruction({\n                initializeMarket: {\n                    baseLotSize,\n                    quoteLotSize,\n                    feeRateBps,\n                    vaultSignerNonce,\n                    quoteDustThreshold,\n                },\n            }),\n        });\n    }\n    static newOrder({ market, openOrders, payer, owner, requestQueue, baseVault, quoteVault, side, limitPrice, maxQuantity, orderType, clientId, programId, feeDiscountPubkey = null, }) {\n        const keys = [\n            { pubkey: market, isSigner: false, isWritable: true },\n            { pubkey: openOrders, isSigner: false, isWritable: true },\n            { pubkey: requestQueue, isSigner: false, isWritable: true },\n            { pubkey: payer, isSigner: false, isWritable: true },\n            { pubkey: owner, isSigner: true, isWritable: false },\n            { pubkey: baseVault, isSigner: false, isWritable: true },\n            { pubkey: quoteVault, isSigner: false, isWritable: true },\n            { pubkey: token_instructions_1.TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n            { pubkey: web3_js_1.SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n        ];\n        if (feeDiscountPubkey) {\n            keys.push({\n                pubkey: feeDiscountPubkey,\n                isSigner: false,\n                isWritable: false,\n            });\n        }\n        return new web3_js_1.TransactionInstruction({\n            keys,\n            programId,\n            data: encodeInstruction({\n                newOrder: clientId\n                    ? { side, limitPrice, maxQuantity, orderType, clientId }\n                    : { side, limitPrice, maxQuantity, orderType },\n            }),\n        });\n    }\n    static matchOrders({ market, requestQueue, eventQueue, bids, asks, baseVault, quoteVault, limit, programId, }) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                { pubkey: market, isSigner: false, isWritable: true },\n                { pubkey: requestQueue, isSigner: false, isWritable: true },\n                { pubkey: eventQueue, isSigner: false, isWritable: true },\n                { pubkey: bids, isSigner: false, isWritable: true },\n                { pubkey: asks, isSigner: false, isWritable: true },\n                { pubkey: baseVault, isSigner: false, isWritable: true },\n                { pubkey: quoteVault, isSigner: false, isWritable: true },\n            ],\n            programId,\n            data: encodeInstruction({ matchOrders: { limit } }),\n        });\n    }\n    static consumeEvents({ market, eventQueue, openOrdersAccounts, limit, programId, }) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                ...openOrdersAccounts.map((account) => ({\n                    pubkey: account,\n                    isSigner: false,\n                    isWritable: true,\n                })),\n                { pubkey: market, isSigner: false, isWritable: true },\n                { pubkey: eventQueue, isSigner: false, isWritable: true },\n            ],\n            programId,\n            data: encodeInstruction({ consumeEvents: { limit } }),\n        });\n    }\n    static cancelOrder({ market, openOrders, owner, requestQueue, side, orderId, openOrdersSlot, programId, }) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                { pubkey: market, isSigner: false, isWritable: false },\n                { pubkey: openOrders, isSigner: false, isWritable: true },\n                { pubkey: requestQueue, isSigner: false, isWritable: true },\n                { pubkey: owner, isSigner: true, isWritable: false },\n            ],\n            programId,\n            data: encodeInstruction({\n                cancelOrder: { side, orderId, openOrders, openOrdersSlot },\n            }),\n        });\n    }\n    static cancelOrderByClientId({ market, openOrders, owner, requestQueue, clientId, programId, }) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                { pubkey: market, isSigner: false, isWritable: false },\n                { pubkey: openOrders, isSigner: false, isWritable: true },\n                { pubkey: requestQueue, isSigner: false, isWritable: true },\n                { pubkey: owner, isSigner: true, isWritable: false },\n            ],\n            programId,\n            data: encodeInstruction({\n                cancelOrderByClientId: { clientId },\n            }),\n        });\n    }\n    static settleFunds({ market, openOrders, owner, baseVault, quoteVault, baseWallet, quoteWallet, vaultSigner, programId, referrerQuoteWallet = null, }) {\n        const keys = [\n            { pubkey: market, isSigner: false, isWritable: true },\n            { pubkey: openOrders, isSigner: false, isWritable: true },\n            { pubkey: owner, isSigner: true, isWritable: false },\n            { pubkey: baseVault, isSigner: false, isWritable: true },\n            { pubkey: quoteVault, isSigner: false, isWritable: true },\n            { pubkey: baseWallet, isSigner: false, isWritable: true },\n            { pubkey: quoteWallet, isSigner: false, isWritable: true },\n            { pubkey: vaultSigner, isSigner: false, isWritable: false },\n            { pubkey: token_instructions_1.TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n        ];\n        if (referrerQuoteWallet) {\n            keys.push({\n                pubkey: referrerQuoteWallet,\n                isSigner: false,\n                isWritable: true,\n            });\n        }\n        return new web3_js_1.TransactionInstruction({\n            keys,\n            programId,\n            data: encodeInstruction({\n                settleFunds: {},\n            }),\n        });\n    }\n}\nexports.DexInstructions = DexInstructions;\n//# sourceMappingURL=instructions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENT_QUEUE_LAYOUT = exports.REQUEST_QUEUE_LAYOUT = exports.decodeEventQueue = exports.decodeRequestQueue = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst layout_1 = require(\"./layout\");\nconst REQUEST_QUEUE_HEADER = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    buffer_layout_1.u32('head'),\n    layout_1.zeros(4),\n    buffer_layout_1.u32('count'),\n    layout_1.zeros(4),\n    buffer_layout_1.u32('nextSeqNum'),\n    layout_1.zeros(4),\n]);\nconst REQUEST_FLAGS = buffer_layout_1.bits(buffer_layout_1.u8(), false, 'requestFlags');\nREQUEST_FLAGS.addBoolean('newOrder');\nREQUEST_FLAGS.addBoolean('cancelOrder');\nREQUEST_FLAGS.addBoolean('bid');\nREQUEST_FLAGS.addBoolean('postOnly');\nREQUEST_FLAGS.addBoolean('ioc');\nconst REQUEST = buffer_layout_1.struct([\n    REQUEST_FLAGS,\n    buffer_layout_1.u8('openOrdersSlot'),\n    buffer_layout_1.u8('feeTier'),\n    buffer_layout_1.blob(5),\n    layout_1.u64('maxBaseSizeOrCancelId'),\n    layout_1.u64('nativeQuoteQuantityLocked'),\n    layout_1.u128('orderId'),\n    layout_1.publicKeyLayout('openOrders'),\n    layout_1.u64('clientOrderId'),\n]);\nconst EVENT_QUEUE_HEADER = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    buffer_layout_1.u32('head'),\n    layout_1.zeros(4),\n    buffer_layout_1.u32('count'),\n    layout_1.zeros(4),\n    buffer_layout_1.u32('seqNum'),\n    layout_1.zeros(4),\n]);\nconst EVENT_FLAGS = buffer_layout_1.bits(buffer_layout_1.u8(), false, 'eventFlags');\nEVENT_FLAGS.addBoolean('fill');\nEVENT_FLAGS.addBoolean('out');\nEVENT_FLAGS.addBoolean('bid');\nEVENT_FLAGS.addBoolean('maker');\nconst EVENT = buffer_layout_1.struct([\n    EVENT_FLAGS,\n    buffer_layout_1.u8('openOrdersSlot'),\n    buffer_layout_1.u8('feeTier'),\n    buffer_layout_1.blob(5),\n    layout_1.u64('nativeQuantityReleased'),\n    layout_1.u64('nativeQuantityPaid'),\n    layout_1.u64('nativeFeeOrRebate'),\n    layout_1.u128('orderId'),\n    layout_1.publicKeyLayout('openOrders'),\n    layout_1.u64('clientOrderId'),\n]);\nfunction decodeQueue(headerLayout, nodeLayout, buffer, history) {\n    const header = headerLayout.decode(buffer);\n    const allocLen = Math.floor((buffer.length - headerLayout.span) / nodeLayout.span);\n    const nodes = [];\n    if (history) {\n        for (let i = 0; i < Math.min(history, allocLen); ++i) {\n            const nodeIndex = (header.head + header.count + allocLen - 1 - i) % allocLen;\n            nodes.push(nodeLayout.decode(buffer, headerLayout.span + nodeIndex * nodeLayout.span));\n        }\n    }\n    else {\n        for (let i = 0; i < header.count; ++i) {\n            const nodeIndex = (header.head + i) % allocLen;\n            nodes.push(nodeLayout.decode(buffer, headerLayout.span + nodeIndex * nodeLayout.span));\n        }\n    }\n    return { header, nodes };\n}\nfunction decodeRequestQueue(buffer, history) {\n    const { header, nodes } = decodeQueue(REQUEST_QUEUE_HEADER, REQUEST, buffer, history);\n    if (!header.accountFlags.initialized || !header.accountFlags.requestQueue) {\n        throw new Error('Invalid requests queue');\n    }\n    return nodes;\n}\nexports.decodeRequestQueue = decodeRequestQueue;\nfunction decodeEventQueue(buffer, history) {\n    const { header, nodes } = decodeQueue(EVENT_QUEUE_HEADER, EVENT, buffer, history);\n    if (!header.accountFlags.initialized || !header.accountFlags.eventQueue) {\n        throw new Error('Invalid events queue');\n    }\n    return nodes;\n}\nexports.decodeEventQueue = decodeEventQueue;\nexports.REQUEST_QUEUE_LAYOUT = {\n    HEADER: REQUEST_QUEUE_HEADER,\n    NODE: REQUEST,\n};\nexports.EVENT_QUEUE_LAYOUT = {\n    HEADER: EVENT_QUEUE_HEADER,\n    NODE: EVENT,\n};\n//# sourceMappingURL=queue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFeeTier = exports.getFeeRates = exports.supportsSrmFeeDiscounts = void 0;\nconst tokens_and_markets_1 = require(\"./tokens_and_markets\");\nfunction supportsSrmFeeDiscounts(programId) {\n    return tokens_and_markets_1.getLayoutVersion(programId) > 1;\n}\nexports.supportsSrmFeeDiscounts = supportsSrmFeeDiscounts;\nfunction getFeeRates(feeTier) {\n    if (feeTier === 1) {\n        // SRM2\n        return { taker: 0.002, maker: -0.0003 };\n    }\n    else if (feeTier === 2) {\n        // SRM3\n        return { taker: 0.0018, maker: -0.0003 };\n    }\n    else if (feeTier === 3) {\n        // SRM4\n        return { taker: 0.0016, maker: -0.0003 };\n    }\n    else if (feeTier === 4) {\n        // SRM5\n        return { taker: 0.0014, maker: -0.0003 };\n    }\n    else if (feeTier === 5) {\n        // SRM6\n        return { taker: 0.0012, maker: -0.0003 };\n    }\n    else if (feeTier === 6) {\n        // MSRM\n        return { taker: 0.001, maker: -0.0005 };\n    }\n    // Base\n    return { taker: 0.0022, maker: -0.0003 };\n}\nexports.getFeeRates = getFeeRates;\nfunction getFeeTier(msrmBalance, srmBalance) {\n    if (msrmBalance >= 1) {\n        return 6;\n    }\n    else if (srmBalance >= 1000000) {\n        return 5;\n    }\n    else if (srmBalance >= 100000) {\n        return 4;\n    }\n    else if (srmBalance >= 10000) {\n        return 3;\n    }\n    else if (srmBalance >= 1000) {\n        return 2;\n    }\n    else if (srmBalance >= 100) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\nexports.getFeeTier = getFeeTier;\n//# sourceMappingURL=fees.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.simulateTransaction = void 0;\n/** Copy of Connection.simulateTransaction that takes a commitment parameter. */\nasync function simulateTransaction(connection, transaction, commitment) {\n    // @ts-ignore\n    transaction.recentBlockhash = await connection._recentBlockhash(\n    // @ts-ignore\n    connection._disableBlockhashCaching);\n    const signData = transaction.serializeMessage();\n    // @ts-ignore\n    const wireTransaction = transaction._serialize(signData);\n    const encodedTransaction = wireTransaction.toString('base64');\n    const config = { encoding: 'base64', commitment };\n    const args = [encodedTransaction, config];\n    // @ts-ignore\n    const res = await connection._rpcRequest('simulateTransaction', args);\n    if (res.error) {\n        throw new Error('failed to simulate transaction: ' + res.error.message);\n    }\n    return res.result;\n}\nexports.simulateTransaction = simulateTransaction;\n//# sourceMappingURL=simulate-transaction.js.map","import BN from 'bn.js';\nimport * as bs58 from 'bs58';\nimport { Account, SystemProgram, PublicKey, Transaction, TransactionInstruction, Connection, SYSVAR_RENT_PUBKEY, SYSVAR_CLOCK_PUBKEY, } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '@project-serum/serum/lib/token-instructions';\nimport { Provider, NodeWallet, networks, getTokenAccount, simulateTransaction, } from '@project-serum/common';\nimport * as instruction from './instruction';\nimport * as accounts from './accounts';\nimport { SIZE as SAFE_SIZE } from './accounts/safe';\nimport { SIZE as WHITELIST_SIZE, } from './accounts/whitelist';\nimport * as transactionIx from './transaction-instruction';\n// For all requests requiring an optional `Account` object, if none is provided,\n// the Client's provider Account will be used.\n//\n// For example,, when creating a vesting account, the beneficiary will default\n// to the provider.\nexport default class Client {\n    constructor(cfg) {\n        this.provider = cfg.provider;\n        this.programId = cfg.programId;\n        this.safe = cfg.safe;\n        this.accounts = new Accounts(cfg.provider, cfg.safe, cfg.programId);\n    }\n    // Connects to the devnet deployment of the lockup program.\n    static devnet(wallet, opts) {\n        if (wallet === undefined) {\n            wallet = NodeWallet.local();\n        }\n        opts = opts || Provider.defaultOptions();\n        const connection = new Connection('https://devnet.solana.com', opts.preflightCommitment);\n        const provider = new Provider(connection, wallet, opts);\n        return new Client({\n            provider,\n            programId: networks.devnet.lockupProgramId,\n            safe: networks.devnet.safe,\n        });\n    }\n    static localhost(wallet, opts) {\n        if (wallet === undefined) {\n            wallet = NodeWallet.local();\n        }\n        opts = opts || Provider.defaultOptions();\n        const connection = new Connection('http://localhost:8899', opts.preflightCommitment);\n        const provider = new Provider(connection, wallet, opts);\n        return new Client({\n            provider,\n            programId: networks.localhost.lockupProgramId,\n            safe: networks.localhost.safe,\n        });\n    }\n    static async initialize(provider, req) {\n        let { programId, authority } = req;\n        if (authority === undefined) {\n            authority = provider.wallet.publicKey;\n        }\n        const safe = new Account();\n        const whitelist = new Account();\n        let tx = new Transaction();\n        tx.add(\n        // Create Safe.\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: safe.publicKey,\n            space: SAFE_SIZE,\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(SAFE_SIZE),\n            programId: programId,\n        }), \n        // Create Whitelist.\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: whitelist.publicKey,\n            space: WHITELIST_SIZE,\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(WHITELIST_SIZE),\n            programId: programId,\n        }), \n        // Initialize Safe.\n        new TransactionInstruction({\n            keys: [\n                { pubkey: safe.publicKey, isWritable: true, isSigner: false },\n                { pubkey: whitelist.publicKey, isWritable: true, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: programId,\n            data: instruction.encode({\n                initialize: {\n                    authority,\n                },\n            }),\n        }));\n        const signers = [safe, whitelist];\n        const txSig = await provider.send(tx, signers);\n        const client = new Client({\n            safe: safe.publicKey,\n            provider,\n            programId,\n        });\n        return [\n            client,\n            {\n                tx: txSig,\n                safe: safe.publicKey,\n                whitelist: whitelist.publicKey,\n            },\n        ];\n    }\n    async createVesting(req) {\n        let { beneficiary, endTs, periodCount, depositAmount, depositor, depositorAuthority, mint, } = req;\n        if (beneficiary === undefined) {\n            beneficiary = new PublicKey(Buffer.alloc(32));\n        }\n        if (mint === undefined) {\n            const dTokenAccount = await getTokenAccount(this.provider, depositor);\n            mint = dTokenAccount.mint;\n        }\n        const depositorAuthorityPubkey = depositorAuthority === undefined\n            ? this.provider.wallet.publicKey\n            : depositorAuthority.publicKey;\n        const vesting = new Account();\n        const vault = new Account();\n        let createVestingIxs = await transactionIx.createVesting(this.provider, this.programId, this.safe, vesting.publicKey, vault.publicKey, mint, depositor, depositorAuthorityPubkey, beneficiary, endTs, periodCount, depositAmount);\n        const tx = new Transaction();\n        tx.add(...createVestingIxs);\n        let signers = [vesting, vault, depositorAuthority];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n            vesting: vesting.publicKey,\n        };\n    }\n    async claim(req) {\n        let { beneficiary, vesting } = req;\n        const beneficiaryAddress = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.safe, beneficiaryAddress);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: beneficiaryAddress, isWritable: false, isSigner: true },\n                { pubkey: vesting, isWritable: true, isSigner: false },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                claim: {},\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async withdraw(req) {\n        let { amount, beneficiary, vesting, tokenAccount } = req;\n        const beneficiaryAddress = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        const vestingAcc = await this.accounts.vesting(vesting);\n        const vault = vestingAcc.vault;\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.safe, beneficiaryAddress);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: beneficiaryAddress, isWritable: false, isSigner: true },\n                { pubkey: vesting, isWritable: true, isSigner: false },\n                { pubkey: tokenAccount, isWritable: true, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                withdraw: {\n                    amount,\n                },\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async whitelistWithdraw(req) {\n        let { amount, instructionData, beneficiary, vesting, whitelistProgram, whitelistProgramVault, whitelistProgramVaultAuthority, relayAccounts, relaySigners, safe, } = req;\n        const beneficiaryAddress = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (safe === undefined) {\n            safe = await this.accounts.safe();\n        }\n        const vestingAcc = await this.accounts.vesting(vesting);\n        const vault = vestingAcc.vault;\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.safe, beneficiaryAddress);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: beneficiaryAddress, isWritable: false, isSigner: true },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: safe.whitelist, isWritable: false, isSigner: false },\n                { pubkey: whitelistProgram, isWritable: false, isSigner: false },\n                // Relay accounts.\n                { pubkey: vesting, isWritable: true, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: whitelistProgramVault, isWritable: true, isSigner: false },\n                {\n                    pubkey: whitelistProgramVaultAuthority,\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ].concat(relayAccounts),\n            programId: this.programId,\n            data: instruction.encode({\n                whitelistWithdraw: {\n                    amount,\n                    instructionData,\n                },\n            }),\n        }));\n        let signers = [beneficiary].concat(relaySigners);\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async whitelistDeposit(req) {\n        let { instructionData, beneficiary, vesting, whitelistProgram, whitelistProgramVault, whitelistProgramVaultAuthority, relayAccounts, relaySigners, safe, } = req;\n        const beneficiaryAddress = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (safe === undefined) {\n            safe = await this.accounts.safe();\n        }\n        const vestingAcc = await this.accounts.vesting(vesting);\n        const vault = vestingAcc.vault;\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.safe, beneficiaryAddress);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: beneficiaryAddress, isWritable: false, isSigner: true },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: safe.whitelist, isWritable: false, isSigner: false },\n                { pubkey: whitelistProgram, isWritable: false, isSigner: false },\n                // Relay accounts.\n                { pubkey: vesting, isWritable: true, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: whitelistProgramVault, isWritable: true, isSigner: false },\n                {\n                    pubkey: whitelistProgramVaultAuthority,\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ].concat(relayAccounts),\n            programId: this.programId,\n            data: instruction.encode({\n                whitelistDeposit: {\n                    instructionData,\n                },\n            }),\n        }));\n        let signers = [beneficiary].concat(relaySigners);\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async whitelistAdd(req) {\n        let { entry, authority } = req;\n        const authorityAddress = authority === undefined\n            ? this.provider.wallet.publicKey\n            : authority.publicKey;\n        const safe = await this.accounts.safe(this.safe);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: authorityAddress, isWritable: false, isSigner: true },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: safe.whitelist, isWritable: true, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                whitelistAdd: {\n                    entry,\n                },\n            }),\n        }));\n        let signers = [authority];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async whitelistDelete(req) {\n        let { entry, authority } = req;\n        const authorityAddress = authority === undefined\n            ? this.provider.wallet.publicKey\n            : authority.publicKey;\n        const safe = await this.accounts.safe(this.safe);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: authorityAddress, isWritable: false, isSigner: true },\n                { pubkey: this.safe, isWritable: false, isSigner: false },\n                { pubkey: safe.whitelist, isWritable: true, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                whitelistDelete: {\n                    entry,\n                },\n            }),\n        }));\n        let signers = [authority];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async setAuthority(req) {\n        throw new Error('not implemented');\n    }\n}\nclass Accounts {\n    constructor(provider, safeAddress, programId) {\n        this.provider = provider;\n        this.safeAddress = safeAddress;\n        this.programId = programId;\n    }\n    async safe(safeAddress) {\n        if (safeAddress === undefined) {\n            safeAddress = this.safeAddress;\n        }\n        const accountInfo = await this.provider.connection.getAccountInfo(safeAddress);\n        if (accountInfo === null) {\n            throw new Error(`Safe does not exist ${safeAddress}`);\n        }\n        return accounts.safe.decode(accountInfo.data);\n    }\n    async vesting(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Safe does not exist ${address}`);\n        }\n        return accounts.vesting.decode(accountInfo.data);\n    }\n    async whitelist(address) {\n        if (address === undefined) {\n            address = (await this.safe(this.safeAddress)).whitelist;\n        }\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Safe does not exist ${address}`);\n        }\n        return accounts.whitelist.decode(accountInfo.data);\n    }\n    async vaultAuthority(programId, safeAddress, beneficiary) {\n        const [pubkey, _nonce] = await PublicKey.findProgramAddress([safeAddress.toBuffer(), beneficiary.toBuffer()], programId);\n        return pubkey;\n    }\n    async availableForWithdrawal(vesting) {\n        let tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: vesting, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                availableForWithdrawal: {},\n            }),\n        }));\n        tx.setSigners(...[this.provider.wallet.publicKey]);\n        let resp = await simulateTransaction(this.provider.connection, tx, 'recent');\n        let log = resp.value.logs[1].slice('Program log: '.length);\n        return new BN(JSON.parse(log).result);\n    }\n    // Fetch all vesting accounts with the given beneficiary.\n    async allVestings(beneficiary) {\n        const vestingBytes = accounts.vesting\n            .encode({\n            ...accounts.vesting.defaultVesting(),\n            initialized: true,\n            safe: this.safeAddress,\n            beneficiary,\n        })\n            .slice(0, 65);\n        let filters = [\n            {\n                memcmp: {\n                    offset: 0,\n                    bytes: bs58.encode(vestingBytes),\n                },\n            },\n            {\n                dataSize: accounts.vesting.SIZE,\n            },\n        ];\n        // @ts-ignore\n        let resp = await this.provider.connection._rpcRequest('getProgramAccounts', [\n            this.programId.toBase58(),\n            {\n                commitment: this.provider.connection.commitment,\n                filters,\n            },\n        ]);\n        if (resp.error) {\n            throw new Error('failed to get vesting accounts for ' +\n                beneficiary.toBase58() +\n                ': ' +\n                resp.error.message);\n        }\n        return (resp.result\n            // @ts-ignore\n            .map(({ pubkey, account: { data } }) => {\n            data = bs58.decode(data);\n            return {\n                publicKey: new PublicKey(pubkey),\n                account: accounts.vesting.decode(data),\n            };\n        }));\n    }\n}\n//# sourceMappingURL=client.js.map","import { struct } from 'buffer-layout';\nimport { bool, i64, publicKey, rustEnum, u64 as borshU64, } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport { u64 } from '@solana/spl-token';\nconst BALANCES_LAYOUT = struct([\n    borshU64('sptAmount'),\n    borshU64('sptMegaAmount'),\n]);\nconst ENTITY_STATE_LAYOUT = rustEnum([\n    struct([], 'inactive'),\n    struct([i64('deactivationStartTs'), i64('timelock')], 'pendingDeactivation'),\n    struct([], 'active'),\n]);\nconst ENTITY_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('registrar'),\n    publicKey('leader'),\n    BALANCES_LAYOUT.replicate('balances'),\n    ENTITY_STATE_LAYOUT.replicate('state'),\n    publicKey('metadata'),\n]);\nexport function decode(data) {\n    return ENTITY_LAYOUT.decode(data);\n}\nexport function encode(e) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = ENTITY_LAYOUT.encode(e, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultEntity() {\n    return {\n        initialized: false,\n        registrar: new PublicKey(Buffer.alloc(32)),\n        leader: new PublicKey(Buffer.alloc(32)),\n        balances: {\n            sptAmount: new u64(0),\n            sptMegaAmount: new u64(0),\n        },\n        state: {\n            pendingDeactivation: {\n                deactivationStartTs: new u64(0),\n                timelock: new u64(0),\n            },\n        },\n        metadata: new PublicKey(Buffer.alloc(32)),\n    };\n}\nexport const SIZE = encode(defaultEntity()).length;\n//# sourceMappingURL=entity.js.map","import { struct, u32 } from 'buffer-layout';\nimport { vec, bool, publicKey, i64 as borshI64 } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nconst BALANCE_SANDBOX_LAYOUT = struct([\n    publicKey('owner'),\n    publicKey('spt'),\n    publicKey('sptMega'),\n    publicKey('vault'),\n    publicKey('vaultMega'),\n    publicKey('vaultStake'),\n    publicKey('vaultStakeMega'),\n    publicKey('vaultPendingWithdrawal'),\n    publicKey('vaultPendingWithdrawalMega'),\n]);\nexport const MEMBER_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('registrar'),\n    publicKey('beneficiary'),\n    publicKey('entity'),\n    publicKey('metadata'),\n    vec(BALANCE_SANDBOX_LAYOUT.replicate('balancesInner'), 'balances'),\n    u32('rewardsCursor'),\n    borshI64('lastStakeTs'),\n]);\nexport function decode(data) {\n    return MEMBER_LAYOUT.decode(data);\n}\nexport function encode(m) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = MEMBER_LAYOUT.encode(m, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultMember() {\n    return {\n        initialized: false,\n        registrar: new PublicKey(Buffer.alloc(32)),\n        beneficiary: new PublicKey(Buffer.alloc(32)),\n        entity: new PublicKey(Buffer.alloc(32)),\n        metadata: new PublicKey(Buffer.alloc(32)),\n        balances: [defaultBalanceSandbox(), defaultBalanceSandbox()],\n        rewardsCursor: 0,\n        lastStakeTs: new BN(0),\n    };\n}\nfunction defaultBalanceSandbox() {\n    return {\n        owner: new PublicKey(Buffer.alloc(32)),\n        spt: new PublicKey(Buffer.alloc(32)),\n        sptMega: new PublicKey(Buffer.alloc(32)),\n        vault: new PublicKey(Buffer.alloc(32)),\n        vaultMega: new PublicKey(Buffer.alloc(32)),\n        vaultStake: new PublicKey(Buffer.alloc(32)),\n        vaultStakeMega: new PublicKey(Buffer.alloc(32)),\n        vaultPendingWithdrawal: new PublicKey(Buffer.alloc(32)),\n        vaultPendingWithdrawalMega: new PublicKey(Buffer.alloc(32)),\n    };\n}\nexport const SIZE = encode(defaultMember()).length;\n//# sourceMappingURL=member.js.map","import { struct } from 'buffer-layout';\nimport { bool, i64, publicKey, u64 as borshU64 } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport { u64 } from '@solana/spl-token';\nconst PENDING_WITHDRAWAL_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('member'),\n    bool('burned'),\n    publicKey('pool'),\n    i64('startTs'),\n    i64('endTs'),\n    borshU64('amount'),\n    publicKey('balanceId'),\n]);\nexport function decode(data) {\n    return PENDING_WITHDRAWAL_LAYOUT.decode(data);\n}\nexport function encode(pw) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = PENDING_WITHDRAWAL_LAYOUT.encode(pw, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultPendingWithdrawal() {\n    return {\n        initialized: false,\n        member: new PublicKey(Buffer.alloc(32)),\n        burned: false,\n        pool: new PublicKey(Buffer.alloc(32)),\n        startTs: new u64(0),\n        endTs: new u64(0),\n        amount: new u64(0),\n        balanceId: new PublicKey(Buffer.alloc(32)),\n    };\n}\nexport const SIZE = encode(defaultPendingWithdrawal()).length;\n//# sourceMappingURL=pending-withdrawal.js.map","import * as borsh from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nconst LOCKED_REWARD_VENDOR_LAYOUT = borsh.struct([\n    borsh.bool('initialized'),\n    borsh.publicKey('registrar'),\n    borsh.publicKey('vault'),\n    borsh.u8('nonce'),\n    borsh.publicKey('pool'),\n    borsh.u64('poolTokenSupply'),\n    borsh.u32('rewardEventQueueCursor'),\n    borsh.i64('startTs'),\n    borsh.i64('endTs'),\n    borsh.i64('expiryTs'),\n    borsh.publicKey('expiryReceiver'),\n    borsh.u64('total'),\n    borsh.u64('periodCount'),\n    borsh.bool('expired'),\n]);\nexport function decode(data) {\n    return LOCKED_REWARD_VENDOR_LAYOUT.decode(data);\n}\nexport function encode(v) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = LOCKED_REWARD_VENDOR_LAYOUT.encode(v, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultLockedRewardVendor() {\n    return {\n        initialized: false,\n        registrar: new PublicKey(Buffer.alloc(32)),\n        vault: new PublicKey(Buffer.alloc(32)),\n        nonce: 0,\n        pool: new PublicKey(Buffer.alloc(32)),\n        poolTokenSupply: new BN(0),\n        rewardEventQueueCursor: 0,\n        startTs: new BN(0),\n        endTs: new BN(0),\n        expiryTs: new BN(0),\n        expiryReceiver: new PublicKey(Buffer.alloc(32)),\n        total: new BN(0),\n        periodCount: new BN(0),\n        expired: false,\n    };\n}\nexport const SIZE = encode(defaultLockedRewardVendor()).length;\n//# sourceMappingURL=locked-vendor.js.map","import * as borsh from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nconst LOCKED_REWARD_VENDOR_LAYOUT = borsh.struct([\n    borsh.bool('initialized'),\n    borsh.publicKey('registrar'),\n    borsh.publicKey('vault'),\n    borsh.u8('nonce'),\n    borsh.publicKey('pool'),\n    borsh.u64('poolTokenSupply'),\n    borsh.u32('rewardEventQueueCursor'),\n    borsh.i64('startTs'),\n    borsh.i64('expiryTs'),\n    borsh.publicKey('expiryReceiver'),\n    borsh.u64('total'),\n    borsh.bool('expired'),\n]);\nexport function decode(data) {\n    return LOCKED_REWARD_VENDOR_LAYOUT.decode(data);\n}\nexport function encode(v) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = LOCKED_REWARD_VENDOR_LAYOUT.encode(v, buffer);\n    return buffer.slice(0, len);\n}\nexport function defaultUnlockedRewardVendor() {\n    return {\n        initialized: false,\n        registrar: new PublicKey(Buffer.alloc(32)),\n        vault: new PublicKey(Buffer.alloc(32)),\n        nonce: 0,\n        pool: new PublicKey(Buffer.alloc(32)),\n        poolTokenSupply: new BN(0),\n        rewardEventQueueCursor: 0,\n        startTs: new BN(0),\n        expiryTs: new BN(0),\n        expiryReceiver: new PublicKey(Buffer.alloc(32)),\n        total: new BN(0),\n        expired: false,\n    };\n}\nexport const SIZE = encode(defaultUnlockedRewardVendor()).length;\n//# sourceMappingURL=unlocked-vendor.js.map","import { struct } from 'buffer-layout';\nimport { PublicKey } from '@solana/web3.js';\nimport { bool, publicKey, str } from '@project-serum/borsh';\nconst METADATA_LAYOUT = struct([\n    bool('initialized'),\n    publicKey('entity'),\n    publicKey('authority'),\n    str('name'),\n    str('about'),\n    str('imageUrl'),\n    publicKey('chat'),\n]);\nexport function decode(data) {\n    return METADATA_LAYOUT.decode(data);\n}\nexport function encode(e) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = METADATA_LAYOUT.encode(e, buffer);\n    return buffer.slice(0, len);\n}\nconst maxName = 'ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\nexport function defaultMetadata() {\n    return {\n        initialized: true,\n        entity: new PublicKey(Buffer.alloc(32)),\n        authority: new PublicKey(Buffer.alloc(32)),\n        name: maxName,\n        about: maxName,\n        imageUrl: maxName,\n        chat: new PublicKey(Buffer.alloc(32)),\n    };\n}\nexport const SIZE = encode(defaultMetadata()).length;\n//# sourceMappingURL=metadata.js.map","import * as bs58 from 'bs58';\nimport { PublicKey } from '@solana/web3.js';\nimport { getTokenAccount, parseTokenAccount, getMintInfo, connection as cmnConnection, } from '@project-serum/common';\nimport * as accounts from '../accounts';\nimport { RewardEventQueue } from '../accounts/reward-event-q';\nimport * as metaEntity from '../meta-entity';\nimport EventEmitter from 'eventemitter3';\n// TODO: handle susbcription state within client object.\nlet REWARD_Q_LISTENER = -1;\nexport default class Accounts {\n    constructor(provider, registrarAddress, programId, metaEntityProgramId) {\n        this.provider = provider;\n        this.registrarAddress = registrarAddress;\n        this.programId = programId;\n        this.metaEntityProgramId = metaEntityProgramId;\n    }\n    async registrar(address) {\n        if (address === undefined) {\n            address = this.registrarAddress;\n        }\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Registrar does not exist ${address}`);\n        }\n        return accounts.registrar.decode(accountInfo.data);\n    }\n    async entity(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Entity does not exist ${address}`);\n        }\n        return accounts.entity.decode(accountInfo.data);\n    }\n    async vaultAuthority(programId, registrarAddr, registrar) {\n        if (registrar === undefined) {\n            registrar = await this.registrar(registrarAddr);\n        }\n        return PublicKey.createProgramAddress([registrarAddr.toBuffer(), Buffer.from([registrar.nonce])], programId);\n    }\n    async member(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Member does not exist ${address}`);\n        }\n        return accounts.member.decode(accountInfo.data);\n    }\n    async balancesFor(member, balanceId) {\n        let m = await this.member(member);\n        let b = m.balances.filter(b => b.owner.equals(balanceId)).pop();\n        if (b === undefined) {\n            throw new Error(`Invalid balance id: ${balanceId.toString()}`);\n        }\n        return b;\n    }\n    async depositVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vault);\n    }\n    async depositMegaVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vaultMega);\n    }\n    async pendingWithdrawalVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vaultPendingWithdrawal);\n    }\n    async pendingWithdrawalMegaVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vaultPendingWithdrawalMega);\n    }\n    async metadata(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Entity does not exist ${address}`);\n        }\n        return metaEntity.accounts.metadata.decode(accountInfo.data);\n    }\n    async pendingWithdrawal(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`PendingWithdrawal does not exist ${address}`);\n        }\n        return accounts.pendingWithdrawal.decode(accountInfo.data);\n    }\n    async poolTokenMint(registrar) {\n        if (registrar === undefined) {\n            registrar = await this.registrar();\n        }\n        return await getMintInfo(this.provider, registrar.poolMint);\n    }\n    async megaPoolTokenMint(registrar) {\n        if (registrar === undefined) {\n            registrar = await this.registrar();\n        }\n        return await getMintInfo(this.provider, registrar.poolMintMega);\n    }\n    async poolVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vaultStake);\n    }\n    async megaPoolVault(member, balanceId) {\n        const b = await this.balancesFor(member, balanceId);\n        return getTokenAccount(this.provider, b.vaultStakeMega);\n    }\n    async allEntities() {\n        const entityBytes = accounts.entity\n            .encode({\n            ...accounts.entity.defaultEntity(),\n            initialized: true,\n            registrar: this.registrarAddress,\n        })\n            .slice(0, 33);\n        let filters = [\n            {\n                memcmp: {\n                    offset: 0,\n                    bytes: bs58.encode(entityBytes),\n                },\n            },\n            {\n                dataSize: accounts.entity.SIZE,\n            },\n        ];\n        // @ts-ignore\n        let resp = await this.provider.connection._rpcRequest('getProgramAccounts', [\n            this.programId.toBase58(),\n            {\n                commitment: this.provider.connection.commitment,\n                filters,\n            },\n        ]);\n        if (resp.error) {\n            throw new Error('failed to get entity accounts');\n        }\n        return (resp.result\n            // @ts-ignore\n            .map(({ pubkey, account: { data } }) => {\n            data = bs58.decode(data);\n            return {\n                publicKey: new PublicKey(pubkey),\n                account: accounts.entity.decode(data),\n            };\n        }));\n    }\n    async membersWithBeneficiary(publicKey) {\n        const memberBytes = accounts.member\n            .encode({\n            ...accounts.member.defaultMember(),\n            initialized: true,\n            registrar: this.registrarAddress,\n            beneficiary: publicKey,\n        })\n            .slice(0, 65);\n        let filters = [\n            {\n                memcmp: {\n                    offset: 0,\n                    bytes: bs58.encode(memberBytes),\n                },\n            },\n            {\n                dataSize: accounts.member.SIZE,\n            },\n        ];\n        // @ts-ignore\n        let resp = await this.provider.connection._rpcRequest('getProgramAccounts', [\n            this.programId.toBase58(),\n            {\n                commitment: this.provider.connection.commitment,\n                filters,\n            },\n        ]);\n        if (resp.error) {\n            throw new Error('failed to get member accounts owned by ' +\n                publicKey.toBase58() +\n                ': ' +\n                resp.error.message);\n        }\n        return (resp.result\n            // @ts-ignore\n            .map(({ pubkey, account: { data } }) => {\n            data = bs58.decode(data);\n            return {\n                publicKey: new PublicKey(pubkey),\n                account: accounts.member.decode(data),\n            };\n        }));\n    }\n    async pendingWithdrawalsForMember(member) {\n        const pendingWithdrawalBytes = accounts.pendingWithdrawal\n            .encode({\n            ...accounts.pendingWithdrawal.defaultPendingWithdrawal(),\n            initialized: true,\n            member,\n        })\n            .slice(0, 33);\n        let filters = [\n            {\n                memcmp: {\n                    offset: 0,\n                    bytes: bs58.encode(pendingWithdrawalBytes),\n                },\n            },\n            {\n                dataSize: accounts.pendingWithdrawal.SIZE,\n            },\n        ];\n        // @ts-ignore\n        let resp = await this.provider.connection._rpcRequest('getProgramAccounts', [\n            this.programId.toBase58(),\n            {\n                commitment: this.provider.connection.commitment,\n                filters,\n            },\n        ]);\n        if (resp.error) {\n            throw new Error('failed to get pending withdrawals for ' +\n                member.toBase58() +\n                ': ' +\n                resp.error.message);\n        }\n        return (resp.result\n            // @ts-ignore\n            .map(({ pubkey, account: { data } }) => {\n            data = bs58.decode(data);\n            return {\n                publicKey: new PublicKey(pubkey),\n                account: accounts.pendingWithdrawal.decode(data),\n            };\n        }));\n    }\n    async allMetadata() {\n        const metadataBytes = metaEntity.accounts.metadata\n            .encode({\n            ...metaEntity.accounts.metadata.defaultMetadata(),\n            initialized: true,\n        })\n            .slice(0, 1);\n        // @ts-ignore\n        let resp = await this.provider.connection._rpcRequest('getProgramAccounts', [\n            this.metaEntityProgramId.toBase58(),\n            {\n                commitment: this.provider.connection.commitment,\n                filters: [\n                    {\n                        memcmp: {\n                            offset: 0,\n                            bytes: bs58.encode(metadataBytes),\n                        },\n                    },\n                    {\n                        dataSize: metaEntity.accounts.metadata.SIZE,\n                    },\n                ],\n            },\n        ]);\n        if (resp.error) {\n            throw new Error('failed to get metadata accounts');\n        }\n        return (resp.result\n            // @ts-ignore\n            .map(({ pubkey, account: { data } }) => {\n            data = bs58.decode(data);\n            return {\n                publicKey: new PublicKey(pubkey),\n                account: metaEntity.accounts.metadata.decode(data),\n            };\n        }));\n    }\n    async memberDeref(address) {\n        const memberAccount = await this.member(address);\n        // Main.\n        const mainB = memberAccount.balances[0];\n        const lockedB = memberAccount.balances[1];\n        const [spt, sptMega, vault, vaultMega, vaultStake, vaultStakeMega, vaultPendingWithdrawal, vaultPendingWithdrawalMega, lockedSpt, lockedSptMega, lockedVault, lockedVaultMega, lockedVaultStake, lockedVaultStakeMega, lockedVaultPendingWithdrawal, lockedVaultPendingWithdrawalMega,] = (await cmnConnection.getMultipleSolanaAccounts(this.provider.connection, [\n            mainB.spt,\n            mainB.sptMega,\n            mainB.vault,\n            mainB.vaultMega,\n            mainB.vaultStake,\n            mainB.vaultStakeMega,\n            mainB.vaultPendingWithdrawal,\n            mainB.vaultPendingWithdrawalMega,\n            lockedB.spt,\n            lockedB.sptMega,\n            lockedB.vault,\n            lockedB.vaultMega,\n            lockedB.vaultStake,\n            lockedB.vaultStakeMega,\n            lockedB.vaultPendingWithdrawal,\n            lockedB.vaultPendingWithdrawalMega,\n        ]))\n            // @ts-ignore\n            .map(acc => parseTokenAccount(acc.account.data));\n        const main = {\n            owner: mainB.owner,\n            spt,\n            sptMega,\n            vault,\n            vaultMega,\n            vaultStake,\n            vaultStakeMega,\n            vaultPendingWithdrawal,\n            vaultPendingWithdrawalMega,\n        };\n        const locked = {\n            owner: lockedB.owner,\n            spt: lockedSpt,\n            sptMega: lockedSptMega,\n            vault: lockedVault,\n            vaultMega: lockedVaultMega,\n            vaultStake: lockedVaultStake,\n            vaultStakeMega: lockedVaultStakeMega,\n            vaultPendingWithdrawal: lockedVaultPendingWithdrawal,\n            vaultPendingWithdrawalMega: lockedVaultPendingWithdrawalMega,\n        };\n        return {\n            publicKey: address,\n            account: {\n                member: memberAccount,\n                balances: [main, locked],\n            },\n        };\n    }\n    async memberConnect(address) {\n        const memberDeref = await this.memberDeref(address);\n        // Single event emitter to mux all the websocket connections.\n        //\n        // TODO: these connections are wasteful. Ideally we would have a single\n        //       subscriptions with the account subscriptions multiplexed.\n        //       Solana doesn't support this, however.\n        const eeMux = new EventEmitter();\n        const mMain = memberDeref.account.member.balances[0];\n        const memberEE = this.accountConnect(address, accounts.member.decode);\n        const spt = this.accountConnect(mMain.spt, parseTokenAccount);\n        const sptMega = this.accountConnect(mMain.sptMega, parseTokenAccount);\n        const vault = this.accountConnect(mMain.vault, parseTokenAccount);\n        const vaultMega = this.accountConnect(mMain.vaultMega, parseTokenAccount);\n        const vaultStake = this.accountConnect(mMain.vaultStake, parseTokenAccount);\n        const vaultStakeMega = this.accountConnect(mMain.vaultStakeMega, parseTokenAccount);\n        const vaultPw = this.accountConnect(mMain.vaultPendingWithdrawal, parseTokenAccount);\n        const vaultPwMega = this.accountConnect(mMain.vaultPendingWithdrawalMega, parseTokenAccount);\n        const mLocked = memberDeref.account.member.balances[1];\n        const lockedMember = this.accountConnect(address, accounts.member.decode);\n        const lockedSpt = this.accountConnect(mLocked.spt, parseTokenAccount);\n        const lockedSptMega = this.accountConnect(mLocked.sptMega, parseTokenAccount);\n        const lockedVault = this.accountConnect(mLocked.vault, parseTokenAccount);\n        const lockedVaultMega = this.accountConnect(mLocked.vaultMega, parseTokenAccount);\n        const lockedVaultStake = this.accountConnect(mLocked.vaultStake, parseTokenAccount);\n        const lockedVaultStakeMega = this.accountConnect(mLocked.vaultStakeMega, parseTokenAccount);\n        const lockedVaultPw = this.accountConnect(mLocked.vaultPendingWithdrawal, parseTokenAccount);\n        const lockedVaultPwMega = this.accountConnect(mLocked.vaultPendingWithdrawalMega, parseTokenAccount);\n        // Main.\n        memberEE.on('change', newMemberAccount => {\n            memberDeref.account.member = newMemberAccount;\n            eeMux.emit('change', memberDeref);\n        });\n        spt.on('change', t => {\n            memberDeref.account.balances[0].spt = t;\n            eeMux.emit('change', memberDeref);\n        });\n        sptMega.on('change', t => {\n            memberDeref.account.balances[0].sptMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vault.on('change', t => {\n            memberDeref.account.balances[0].vault = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vaultMega.on('change', t => {\n            memberDeref.account.balances[0].vaultMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vaultStake.on('change', t => {\n            memberDeref.account.balances[0].vaultStake = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vaultStakeMega.on('change', t => {\n            memberDeref.account.balances[0].vaultStakeMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vaultPw.on('change', t => {\n            memberDeref.account.balances[0].vaultPendingWithdrawal = t;\n            eeMux.emit('change', memberDeref);\n        });\n        vaultPwMega.on('change', t => {\n            memberDeref.account.balances[0].vaultPendingWithdrawalMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        // Locked.\n        lockedMember.on('change', newMemberAccount => {\n            memberDeref.account.member = newMemberAccount;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedSpt.on('change', t => {\n            memberDeref.account.balances[1].spt = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedSptMega.on('change', t => {\n            memberDeref.account.balances[1].sptMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVault.on('change', t => {\n            memberDeref.account.balances[1].vault = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVaultMega.on('change', t => {\n            memberDeref.account.balances[1].vaultMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVaultStake.on('change', t => {\n            memberDeref.account.balances[1].vaultStake = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVaultStakeMega.on('change', t => {\n            memberDeref.account.balances[1].vaultStakeMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVaultPw.on('change', t => {\n            memberDeref.account.balances[1].vaultPendingWithdrawal = t;\n            eeMux.emit('change', memberDeref);\n        });\n        lockedVaultPwMega.on('change', t => {\n            memberDeref.account.balances[1].vaultPendingWithdrawalMega = t;\n            eeMux.emit('change', memberDeref);\n        });\n        return [memberDeref, eeMux];\n    }\n    accountConnect(address, decoder) {\n        const ee = new EventEmitter();\n        const sub = this.provider.connection.onAccountChange(address, acc => ee.emit('change', decoder(acc.data)), 'recent');\n        return ee;\n    }\n    rewardEventQueueConnect(address) {\n        const ee = new EventEmitter();\n        let rewardEventQueue = null;\n        REWARD_Q_LISTENER = this.provider.connection.onAccountChange(address, acc => {\n            rewardEventQueue = new RewardEventQueue(acc.data);\n            ee.emit('change', {\n                publicKey: this.rewardEventQueue,\n                account: rewardEventQueue,\n            });\n        }, 'recent');\n        this.rewardEventQueue(address).then(rewardEventQueue => {\n            ee.emit('connected', rewardEventQueue);\n        });\n        return ee;\n    }\n    rewardEventQueueDisconnect() {\n        if (REWARD_Q_LISTENER !== -1) {\n            this.provider.connection\n                .removeAccountChangeListener(REWARD_Q_LISTENER)\n                .catch(console.error);\n        }\n    }\n    async rewardEventQueue(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Reward event queue dopes not exit ${address}`);\n        }\n        return {\n            publicKey: address,\n            account: new RewardEventQueue(accountInfo.data),\n        };\n    }\n    mqueueConnect(address) {\n        const ee = new EventEmitter();\n        let mqueue = null;\n        this.provider.connection.onAccountChange(address, acc => {\n            // todo: emit message by message instead of the entire queue.\n            mqueue = new metaEntity.accounts.mqueue.MQueue(acc.data);\n            ee.emit('mqueue', mqueue);\n        }, 'recent');\n        this.mqueue(address).then(mq => {\n            ee.emit('connected', mq.account.messages());\n        });\n        return ee;\n    }\n    async mqueue(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`MQueue does not exist ${address}`);\n        }\n        return {\n            publicKey: address,\n            account: new metaEntity.accounts.mqueue.MQueue(accountInfo.data),\n        };\n    }\n    async lockedRewardVendor(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Vendor does not exist ${address}`);\n        }\n        return {\n            publicKey: address,\n            account: accounts.lockedRewardVendor.decode(accountInfo.data),\n        };\n    }\n    async rewardVendorAuthority(vendor, nonce) {\n        return PublicKey.createProgramAddress([\n            this.registrarAddress.toBuffer(),\n            vendor.toBuffer(),\n            Buffer.from([nonce]),\n        ], this.programId);\n    }\n    async unlockedRewardVendor(address) {\n        const accountInfo = await this.provider.connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error(`Vendor does not exist ${address}`);\n        }\n        return {\n            publicKey: address,\n            account: accounts.unlockedRewardVendor.decode(accountInfo.data),\n        };\n    }\n}\n//# sourceMappingURL=accounts.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMintDecimals = exports.Orderbook = exports.ORDERBOOK_LAYOUT = exports.OpenOrders = exports._OPEN_ORDERS_LAYOUT_V2 = exports._OPEN_ORDERS_LAYOUT_V1 = exports.Market = exports._MARKET_STATE_LAYOUT_V2 = exports._MARKET_STAT_LAYOUT_V1 = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst layout_1 = require(\"./layout\");\nconst slab_1 = require(\"./slab\");\nconst instructions_1 = require(\"./instructions\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst queue_1 = require(\"./queue\");\nconst buffer_1 = require(\"buffer\");\nconst fees_1 = require(\"./fees\");\nconst token_instructions_1 = require(\"./token-instructions\");\nconst tokens_and_markets_1 = require(\"./tokens_and_markets\");\nexports._MARKET_STAT_LAYOUT_V1 = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    layout_1.publicKeyLayout('ownAddress'),\n    layout_1.u64('vaultSignerNonce'),\n    layout_1.publicKeyLayout('baseMint'),\n    layout_1.publicKeyLayout('quoteMint'),\n    layout_1.publicKeyLayout('baseVault'),\n    layout_1.u64('baseDepositsTotal'),\n    layout_1.u64('baseFeesAccrued'),\n    layout_1.publicKeyLayout('quoteVault'),\n    layout_1.u64('quoteDepositsTotal'),\n    layout_1.u64('quoteFeesAccrued'),\n    layout_1.u64('quoteDustThreshold'),\n    layout_1.publicKeyLayout('requestQueue'),\n    layout_1.publicKeyLayout('eventQueue'),\n    layout_1.publicKeyLayout('bids'),\n    layout_1.publicKeyLayout('asks'),\n    layout_1.u64('baseLotSize'),\n    layout_1.u64('quoteLotSize'),\n    layout_1.u64('feeRateBps'),\n    buffer_layout_1.blob(7),\n]);\nexports._MARKET_STATE_LAYOUT_V2 = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    layout_1.publicKeyLayout('ownAddress'),\n    layout_1.u64('vaultSignerNonce'),\n    layout_1.publicKeyLayout('baseMint'),\n    layout_1.publicKeyLayout('quoteMint'),\n    layout_1.publicKeyLayout('baseVault'),\n    layout_1.u64('baseDepositsTotal'),\n    layout_1.u64('baseFeesAccrued'),\n    layout_1.publicKeyLayout('quoteVault'),\n    layout_1.u64('quoteDepositsTotal'),\n    layout_1.u64('quoteFeesAccrued'),\n    layout_1.u64('quoteDustThreshold'),\n    layout_1.publicKeyLayout('requestQueue'),\n    layout_1.publicKeyLayout('eventQueue'),\n    layout_1.publicKeyLayout('bids'),\n    layout_1.publicKeyLayout('asks'),\n    layout_1.u64('baseLotSize'),\n    layout_1.u64('quoteLotSize'),\n    layout_1.u64('feeRateBps'),\n    layout_1.u64('referrerRebatesAccrued'),\n    buffer_layout_1.blob(7),\n]);\nclass Market {\n    constructor(decoded, baseMintDecimals, quoteMintDecimals, options = {}, programId) {\n        const { skipPreflight = false, commitment = 'recent' } = options;\n        if (!decoded.accountFlags.initialized || !decoded.accountFlags.market) {\n            throw new Error('Invalid market state');\n        }\n        this._decoded = decoded;\n        this._baseSplTokenDecimals = baseMintDecimals;\n        this._quoteSplTokenDecimals = quoteMintDecimals;\n        this._skipPreflight = skipPreflight;\n        this._commitment = commitment;\n        this._programId = programId;\n        this._openOrdersAccountsCache = {};\n        this._feeDiscountKeysCache = {};\n    }\n    static getLayout(programId) {\n        if (tokens_and_markets_1.getLayoutVersion(programId) === 1) {\n            return exports._MARKET_STAT_LAYOUT_V1;\n        }\n        return exports._MARKET_STATE_LAYOUT_V2;\n    }\n    static async load(connection, address, options = {}, programId) {\n        const { owner, data } = throwIfNull(await connection.getAccountInfo(address), 'Market not found');\n        if (!owner.equals(programId)) {\n            throw new Error('Address not owned by program: ' + owner.toBase58());\n        }\n        const decoded = this.getLayout(programId).decode(data);\n        if (!decoded.accountFlags.initialized ||\n            !decoded.accountFlags.market ||\n            !decoded.ownAddress.equals(address)) {\n            throw new Error('Invalid market');\n        }\n        const [baseMintDecimals, quoteMintDecimals] = await Promise.all([\n            getMintDecimals(connection, decoded.baseMint),\n            getMintDecimals(connection, decoded.quoteMint),\n        ]);\n        return new Market(decoded, baseMintDecimals, quoteMintDecimals, options, programId);\n    }\n    get programId() {\n        return this._programId;\n    }\n    get address() {\n        return this._decoded.ownAddress;\n    }\n    get publicKey() {\n        return this.address;\n    }\n    get baseMintAddress() {\n        return this._decoded.baseMint;\n    }\n    get quoteMintAddress() {\n        return this._decoded.quoteMint;\n    }\n    get bidsAddress() {\n        return this._decoded.bids;\n    }\n    get asksAddress() {\n        return this._decoded.asks;\n    }\n    async loadBids(connection) {\n        const { data } = throwIfNull(await connection.getAccountInfo(this._decoded.bids));\n        return Orderbook.decode(this, data);\n    }\n    async loadAsks(connection) {\n        const { data } = throwIfNull(await connection.getAccountInfo(this._decoded.asks));\n        return Orderbook.decode(this, data);\n    }\n    async loadOrdersForOwner(connection, ownerAddress, cacheDurationMs = 0) {\n        const [bids, asks, openOrdersAccounts] = await Promise.all([\n            this.loadBids(connection),\n            this.loadAsks(connection),\n            this.findOpenOrdersAccountsForOwner(connection, ownerAddress, cacheDurationMs),\n        ]);\n        return this.filterForOpenOrders(bids, asks, openOrdersAccounts);\n    }\n    filterForOpenOrders(bids, asks, openOrdersAccounts) {\n        return [...bids, ...asks].filter((order) => openOrdersAccounts.some((openOrders) => order.openOrdersAddress.equals(openOrders.address)));\n    }\n    async findBaseTokenAccountsForOwner(connection, ownerAddress, includeUnwrappedSol = false) {\n        if (this.baseMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT) && includeUnwrappedSol) {\n            const [wrapped, unwrapped] = await Promise.all([\n                this.findBaseTokenAccountsForOwner(connection, ownerAddress, false),\n                connection.getAccountInfo(ownerAddress),\n            ]);\n            if (unwrapped !== null) {\n                return [{ pubkey: ownerAddress, account: unwrapped }, ...wrapped];\n            }\n            return wrapped;\n        }\n        return await this.getTokenAccountsByOwnerForMint(connection, ownerAddress, this.baseMintAddress);\n    }\n    async getTokenAccountsByOwnerForMint(connection, ownerAddress, mintAddress) {\n        return (await connection.getTokenAccountsByOwner(ownerAddress, {\n            mint: mintAddress,\n        })).value;\n    }\n    async findQuoteTokenAccountsForOwner(connection, ownerAddress, includeUnwrappedSol = false) {\n        if (this.quoteMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT) && includeUnwrappedSol) {\n            const [wrapped, unwrapped] = await Promise.all([\n                this.findQuoteTokenAccountsForOwner(connection, ownerAddress, false),\n                connection.getAccountInfo(ownerAddress),\n            ]);\n            if (unwrapped !== null) {\n                return [{ pubkey: ownerAddress, account: unwrapped }, ...wrapped];\n            }\n            return wrapped;\n        }\n        return await this.getTokenAccountsByOwnerForMint(connection, ownerAddress, this.quoteMintAddress);\n    }\n    async findOpenOrdersAccountsForOwner(connection, ownerAddress, cacheDurationMs = 0) {\n        const strOwner = ownerAddress.toBase58();\n        const now = new Date().getTime();\n        if (strOwner in this._openOrdersAccountsCache &&\n            now - this._openOrdersAccountsCache[strOwner].ts < cacheDurationMs) {\n            return this._openOrdersAccountsCache[strOwner].accounts;\n        }\n        const openOrdersAccountsForOwner = await OpenOrders.findForMarketAndOwner(connection, this.address, ownerAddress, this._programId);\n        this._openOrdersAccountsCache[strOwner] = {\n            accounts: openOrdersAccountsForOwner,\n            ts: now,\n        };\n        return openOrdersAccountsForOwner;\n    }\n    async placeOrder(connection, { owner, payer, side, price, size, orderType = 'limit', clientId, openOrdersAddressKey, feeDiscountPubkey, }) {\n        const { transaction, signers } = await this.makePlaceOrderTransaction(connection, {\n            owner,\n            payer,\n            side,\n            price,\n            size,\n            orderType,\n            clientId,\n            openOrdersAddressKey,\n            feeDiscountPubkey,\n        });\n        return await this._sendTransaction(connection, transaction, [\n            owner,\n            ...signers,\n        ]);\n    }\n    getSplTokenBalanceFromAccountInfo(accountInfo, decimals) {\n        return divideBnToNumber(new bn_js_1.default(accountInfo.data.slice(64, 72), 10, 'le'), new bn_js_1.default(10).pow(new bn_js_1.default(decimals)));\n    }\n    get supportsSrmFeeDiscounts() {\n        return fees_1.supportsSrmFeeDiscounts(this._programId);\n    }\n    get supportsReferralFees() {\n        return tokens_and_markets_1.getLayoutVersion(this._programId) > 1;\n    }\n    async findFeeDiscountKeys(connection, ownerAddress, cacheDurationMs = 0) {\n        let sortedAccounts = [];\n        const now = new Date().getTime();\n        const strOwner = ownerAddress.toBase58();\n        if (strOwner in this._feeDiscountKeysCache &&\n            now - this._feeDiscountKeysCache[strOwner].ts < cacheDurationMs) {\n            return this._feeDiscountKeysCache[strOwner].accounts;\n        }\n        if (this.supportsSrmFeeDiscounts) {\n            // Fee discounts based on (M)SRM holdings supported in newer versions\n            const msrmAccounts = (await this.getTokenAccountsByOwnerForMint(connection, ownerAddress, token_instructions_1.MSRM_MINT)).map(({ pubkey, account }) => {\n                const balance = this.getSplTokenBalanceFromAccountInfo(account, token_instructions_1.MSRM_DECIMALS);\n                return {\n                    pubkey,\n                    mint: token_instructions_1.MSRM_MINT,\n                    balance,\n                    feeTier: fees_1.getFeeTier(balance, 0),\n                };\n            });\n            const srmAccounts = (await this.getTokenAccountsByOwnerForMint(connection, ownerAddress, token_instructions_1.SRM_MINT)).map(({ pubkey, account }) => {\n                const balance = this.getSplTokenBalanceFromAccountInfo(account, token_instructions_1.SRM_DECIMALS);\n                return {\n                    pubkey,\n                    mint: token_instructions_1.SRM_MINT,\n                    balance,\n                    feeTier: fees_1.getFeeTier(0, balance),\n                };\n            });\n            sortedAccounts = msrmAccounts.concat(srmAccounts).sort((a, b) => {\n                if (a.feeTier > b.feeTier) {\n                    return -1;\n                }\n                else if (a.feeTier < b.feeTier) {\n                    return 1;\n                }\n                else {\n                    if (a.balance > b.balance) {\n                        return -1;\n                    }\n                    else if (a.balance < b.balance) {\n                        return 1;\n                    }\n                    else {\n                        return 0;\n                    }\n                }\n            });\n        }\n        this._feeDiscountKeysCache[strOwner] = {\n            accounts: sortedAccounts,\n            ts: now,\n        };\n        return sortedAccounts;\n    }\n    async findBestFeeDiscountKey(connection, ownerAddress, cacheDurationMs = 30000) {\n        const accounts = await this.findFeeDiscountKeys(connection, ownerAddress, cacheDurationMs);\n        if (accounts.length > 0) {\n            return {\n                pubkey: accounts[0].pubkey,\n                feeTier: accounts[0].feeTier,\n            };\n        }\n        return {\n            pubkey: null,\n            feeTier: 0,\n        };\n    }\n    async makePlaceOrderTransaction(connection, { owner, payer, side, price, size, orderType = 'limit', clientId, openOrdersAddressKey, feeDiscountPubkey = undefined, }, cacheDurationMs = 0, feeDiscountPubkeyCacheDurationMs = 0) {\n        var _a, _b;\n        // @ts-ignore\n        const ownerAddress = (_a = owner.publicKey) !== null && _a !== void 0 ? _a : owner;\n        const openOrdersAccounts = await this.findOpenOrdersAccountsForOwner(connection, ownerAddress, cacheDurationMs);\n        const transaction = new web3_js_1.Transaction();\n        const signers = [];\n        // Fetch an SRM fee discount key if the market supports discounts and it is not supplied\n        let useFeeDiscountPubkey;\n        if (feeDiscountPubkey) {\n            useFeeDiscountPubkey = feeDiscountPubkey;\n        }\n        else if (feeDiscountPubkey === undefined && this.supportsSrmFeeDiscounts) {\n            useFeeDiscountPubkey = (await this.findBestFeeDiscountKey(connection, ownerAddress, feeDiscountPubkeyCacheDurationMs)).pubkey;\n        }\n        else {\n            useFeeDiscountPubkey = null;\n        }\n        let openOrdersAddress;\n        if (openOrdersAccounts.length === 0) {\n            const newOpenOrdersAccount = new web3_js_1.Account();\n            transaction.add(await OpenOrders.makeCreateAccountTransaction(connection, this.address, ownerAddress, newOpenOrdersAccount.publicKey, this._programId));\n            openOrdersAddress = newOpenOrdersAccount.publicKey;\n            signers.push(newOpenOrdersAccount);\n            // refresh the cache of open order accounts on next fetch\n            this._openOrdersAccountsCache[ownerAddress.toBase58()].ts = 0;\n        }\n        else if (openOrdersAddressKey) {\n            openOrdersAddress = openOrdersAddressKey;\n        }\n        else {\n            openOrdersAddress = openOrdersAccounts[0].address;\n        }\n        let wrappedSolAccount = null;\n        if (payer.equals(ownerAddress)) {\n            if ((side === 'buy' && this.quoteMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT)) ||\n                (side === 'sell' && this.baseMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT))) {\n                wrappedSolAccount = new web3_js_1.Account();\n                let lamports;\n                if (side === 'buy') {\n                    lamports = Math.round(price * size * 1.01 * web3_js_1.LAMPORTS_PER_SOL);\n                    if (openOrdersAccounts.length > 0) {\n                        lamports -= openOrdersAccounts[0].quoteTokenFree.toNumber();\n                    }\n                }\n                else {\n                    lamports = Math.round(size * web3_js_1.LAMPORTS_PER_SOL);\n                    if (openOrdersAccounts.length > 0) {\n                        lamports -= openOrdersAccounts[0].baseTokenFree.toNumber();\n                    }\n                }\n                lamports = Math.max(lamports, 0) + 1e7;\n                transaction.add(web3_js_1.SystemProgram.createAccount({\n                    fromPubkey: ownerAddress,\n                    newAccountPubkey: wrappedSolAccount.publicKey,\n                    lamports,\n                    space: 165,\n                    programId: token_instructions_1.TOKEN_PROGRAM_ID,\n                }));\n                transaction.add(token_instructions_1.initializeAccount({\n                    account: wrappedSolAccount.publicKey,\n                    mint: token_instructions_1.WRAPPED_SOL_MINT,\n                    owner: ownerAddress,\n                }));\n                signers.push(wrappedSolAccount);\n            }\n            else {\n                throw new Error('Invalid payer account');\n            }\n        }\n        const placeOrderInstruction = this.makePlaceOrderInstruction(connection, {\n            owner,\n            payer: (_b = wrappedSolAccount === null || wrappedSolAccount === void 0 ? void 0 : wrappedSolAccount.publicKey) !== null && _b !== void 0 ? _b : payer,\n            side,\n            price,\n            size,\n            orderType,\n            clientId,\n            openOrdersAddressKey: openOrdersAddress,\n            feeDiscountPubkey: useFeeDiscountPubkey,\n        });\n        transaction.add(placeOrderInstruction);\n        if (wrappedSolAccount) {\n            transaction.add(token_instructions_1.closeAccount({\n                source: wrappedSolAccount.publicKey,\n                destination: ownerAddress,\n                owner: ownerAddress,\n            }));\n        }\n        return { transaction, signers, payer: owner };\n    }\n    makePlaceOrderInstruction(connection, { owner, payer, side, price, size, orderType = 'limit', clientId, openOrdersAddressKey, feeDiscountPubkey = null, }) {\n        var _a;\n        // @ts-ignore\n        const ownerAddress = (_a = owner.publicKey) !== null && _a !== void 0 ? _a : owner;\n        if (this.baseSizeNumberToLots(size).lte(new bn_js_1.default(0))) {\n            throw new Error('size too small');\n        }\n        if (this.priceNumberToLots(price).lte(new bn_js_1.default(0))) {\n            throw new Error('invalid price');\n        }\n        if (!this.supportsSrmFeeDiscounts) {\n            feeDiscountPubkey = null;\n        }\n        return instructions_1.DexInstructions.newOrder({\n            market: this.address,\n            requestQueue: this._decoded.requestQueue,\n            baseVault: this._decoded.baseVault,\n            quoteVault: this._decoded.quoteVault,\n            openOrders: openOrdersAddressKey,\n            owner: ownerAddress,\n            payer,\n            side,\n            limitPrice: this.priceNumberToLots(price),\n            maxQuantity: this.baseSizeNumberToLots(size),\n            orderType,\n            clientId,\n            programId: this._programId,\n            feeDiscountPubkey,\n        });\n    }\n    async _sendTransaction(connection, transaction, signers) {\n        const signature = await connection.sendTransaction(transaction, signers, {\n            skipPreflight: this._skipPreflight,\n        });\n        const { value } = await connection.confirmTransaction(signature, this._commitment);\n        if (value === null || value === void 0 ? void 0 : value.err) {\n            throw new Error(JSON.stringify(value.err));\n        }\n        return signature;\n    }\n    async cancelOrderByClientId(connection, owner, openOrders, clientId) {\n        const transaction = await this.makeCancelOrderByClientIdTransaction(connection, owner.publicKey, openOrders, clientId);\n        return await this._sendTransaction(connection, transaction, [owner]);\n    }\n    async makeCancelOrderByClientIdTransaction(connection, owner, openOrders, clientId) {\n        const transaction = new web3_js_1.Transaction();\n        transaction.add(instructions_1.DexInstructions.cancelOrderByClientId({\n            market: this.address,\n            owner,\n            openOrders,\n            requestQueue: this._decoded.requestQueue,\n            clientId,\n            programId: this._programId,\n        }));\n        return transaction;\n    }\n    async cancelOrder(connection, owner, order) {\n        const transaction = await this.makeCancelOrderTransaction(connection, owner.publicKey, order);\n        return await this._sendTransaction(connection, transaction, [owner]);\n    }\n    async makeCancelOrderTransaction(connection, owner, order) {\n        const transaction = new web3_js_1.Transaction();\n        transaction.add(this.makeCancelOrderInstruction(connection, owner, order));\n        return transaction;\n    }\n    makeCancelOrderInstruction(connection, owner, order) {\n        return instructions_1.DexInstructions.cancelOrder({\n            market: this.address,\n            owner,\n            openOrders: order.openOrdersAddress,\n            requestQueue: this._decoded.requestQueue,\n            side: order.side,\n            orderId: order.orderId,\n            openOrdersSlot: order.openOrdersSlot,\n            programId: this._programId,\n        });\n    }\n    async settleFunds(connection, owner, openOrders, baseWallet, quoteWallet, referrerQuoteWallet = null) {\n        if (!openOrders.owner.equals(owner.publicKey)) {\n            throw new Error('Invalid open orders account');\n        }\n        if (referrerQuoteWallet && !this.supportsReferralFees) {\n            throw new Error('This program ID does not support referrerQuoteWallet');\n        }\n        const { transaction, signers } = await this.makeSettleFundsTransaction(connection, openOrders, baseWallet, quoteWallet, referrerQuoteWallet);\n        return await this._sendTransaction(connection, transaction, [\n            owner,\n            ...signers,\n        ]);\n    }\n    async makeSettleFundsTransaction(connection, openOrders, baseWallet, quoteWallet, referrerQuoteWallet = null) {\n        // @ts-ignore\n        const vaultSigner = await web3_js_1.PublicKey.createProgramAddress([\n            this.address.toBuffer(),\n            this._decoded.vaultSignerNonce.toArrayLike(buffer_1.Buffer, 'le', 8),\n        ], this._programId);\n        const transaction = new web3_js_1.Transaction();\n        const signers = [];\n        let wrappedSolAccount = null;\n        if ((this.baseMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT) &&\n            baseWallet.equals(openOrders.owner)) ||\n            (this.quoteMintAddress.equals(token_instructions_1.WRAPPED_SOL_MINT) &&\n                quoteWallet.equals(openOrders.owner))) {\n            wrappedSolAccount = new web3_js_1.Account();\n            transaction.add(web3_js_1.SystemProgram.createAccount({\n                fromPubkey: openOrders.owner,\n                newAccountPubkey: wrappedSolAccount.publicKey,\n                lamports: await connection.getMinimumBalanceForRentExemption(165),\n                space: 165,\n                programId: token_instructions_1.TOKEN_PROGRAM_ID,\n            }));\n            transaction.add(token_instructions_1.initializeAccount({\n                account: wrappedSolAccount.publicKey,\n                mint: token_instructions_1.WRAPPED_SOL_MINT,\n                owner: openOrders.owner,\n            }));\n            signers.push(wrappedSolAccount);\n        }\n        transaction.add(instructions_1.DexInstructions.settleFunds({\n            market: this.address,\n            openOrders: openOrders.address,\n            owner: openOrders.owner,\n            baseVault: this._decoded.baseVault,\n            quoteVault: this._decoded.quoteVault,\n            baseWallet: baseWallet.equals(openOrders.owner) && wrappedSolAccount\n                ? wrappedSolAccount.publicKey\n                : baseWallet,\n            quoteWallet: quoteWallet.equals(openOrders.owner) && wrappedSolAccount\n                ? wrappedSolAccount.publicKey\n                : quoteWallet,\n            vaultSigner,\n            programId: this._programId,\n            referrerQuoteWallet,\n        }));\n        if (wrappedSolAccount) {\n            transaction.add(token_instructions_1.closeAccount({\n                source: wrappedSolAccount.publicKey,\n                destination: openOrders.owner,\n                owner: openOrders.owner,\n            }));\n        }\n        return { transaction, signers, payer: openOrders.owner };\n    }\n    async matchOrders(connection, feePayer, limit) {\n        const tx = this.makeMatchOrdersTransaction(limit);\n        return await this._sendTransaction(connection, tx, [feePayer]);\n    }\n    makeMatchOrdersTransaction(limit) {\n        const tx = new web3_js_1.Transaction();\n        tx.add(instructions_1.DexInstructions.matchOrders({\n            market: this.address,\n            requestQueue: this._decoded.requestQueue,\n            eventQueue: this._decoded.eventQueue,\n            bids: this._decoded.bids,\n            asks: this._decoded.asks,\n            baseVault: this._decoded.baseVault,\n            quoteVault: this._decoded.quoteVault,\n            limit,\n            programId: this._programId,\n        }));\n        return tx;\n    }\n    async loadRequestQueue(connection) {\n        const { data } = throwIfNull(await connection.getAccountInfo(this._decoded.requestQueue));\n        return queue_1.decodeRequestQueue(data);\n    }\n    async loadEventQueue(connection) {\n        const { data } = throwIfNull(await connection.getAccountInfo(this._decoded.eventQueue));\n        return queue_1.decodeEventQueue(data);\n    }\n    async loadFills(connection, limit = 100) {\n        // TODO: once there's a separate source of fills use that instead\n        const { data } = throwIfNull(await connection.getAccountInfo(this._decoded.eventQueue));\n        const events = queue_1.decodeEventQueue(data, limit);\n        return events\n            .filter((event) => event.eventFlags.fill && event.nativeQuantityPaid.gtn(0))\n            .map(this.parseFillEvent.bind(this));\n    }\n    parseFillEvent(event) {\n        let size, price, side, priceBeforeFees;\n        if (event.eventFlags.bid) {\n            side = 'buy';\n            priceBeforeFees = event.eventFlags.maker\n                ? event.nativeQuantityPaid.add(event.nativeFeeOrRebate)\n                : event.nativeQuantityPaid.sub(event.nativeFeeOrRebate);\n            price = divideBnToNumber(priceBeforeFees.mul(this._baseSplTokenMultiplier), this._quoteSplTokenMultiplier.mul(event.nativeQuantityReleased));\n            size = divideBnToNumber(event.nativeQuantityReleased, this._baseSplTokenMultiplier);\n        }\n        else {\n            side = 'sell';\n            priceBeforeFees = event.eventFlags.maker\n                ? event.nativeQuantityReleased.sub(event.nativeFeeOrRebate)\n                : event.nativeQuantityReleased.add(event.nativeFeeOrRebate);\n            price = divideBnToNumber(priceBeforeFees.mul(this._baseSplTokenMultiplier), this._quoteSplTokenMultiplier.mul(event.nativeQuantityPaid));\n            size = divideBnToNumber(event.nativeQuantityPaid, this._baseSplTokenMultiplier);\n        }\n        return {\n            ...event,\n            side,\n            price,\n            feeCost: this.quoteSplSizeToNumber(event.nativeFeeOrRebate) *\n                (event.eventFlags.maker ? -1 : 1),\n            size,\n        };\n    }\n    get _baseSplTokenMultiplier() {\n        return new bn_js_1.default(10).pow(new bn_js_1.default(this._baseSplTokenDecimals));\n    }\n    get _quoteSplTokenMultiplier() {\n        return new bn_js_1.default(10).pow(new bn_js_1.default(this._quoteSplTokenDecimals));\n    }\n    priceLotsToNumber(price) {\n        return divideBnToNumber(price.mul(this._decoded.quoteLotSize).mul(this._baseSplTokenMultiplier), this._decoded.baseLotSize.mul(this._quoteSplTokenMultiplier));\n    }\n    priceNumberToLots(price) {\n        return new bn_js_1.default(Math.round((price *\n            Math.pow(10, this._quoteSplTokenDecimals) *\n            this._decoded.baseLotSize.toNumber()) /\n            (Math.pow(10, this._baseSplTokenDecimals) *\n                this._decoded.quoteLotSize.toNumber())));\n    }\n    baseSplSizeToNumber(size) {\n        return divideBnToNumber(size, this._baseSplTokenMultiplier);\n    }\n    quoteSplSizeToNumber(size) {\n        return divideBnToNumber(size, this._quoteSplTokenMultiplier);\n    }\n    baseSizeLotsToNumber(size) {\n        return divideBnToNumber(size.mul(this._decoded.baseLotSize), this._baseSplTokenMultiplier);\n    }\n    baseSizeNumberToLots(size) {\n        const native = new bn_js_1.default(Math.round(size * Math.pow(10, this._baseSplTokenDecimals)));\n        // rounds down to the nearest lot size\n        return native.div(this._decoded.baseLotSize);\n    }\n    quoteSizeLotsToNumber(size) {\n        return divideBnToNumber(size.mul(this._decoded.quoteLotSize), this._quoteSplTokenMultiplier);\n    }\n    quoteSizeNumberToLots(size) {\n        const native = new bn_js_1.default(Math.round(size * Math.pow(10, this._quoteSplTokenDecimals)));\n        // rounds down to the nearest lot size\n        return native.div(this._decoded.quoteLotSize);\n    }\n    get minOrderSize() {\n        return this.baseSizeLotsToNumber(new bn_js_1.default(1));\n    }\n    get tickSize() {\n        return this.priceLotsToNumber(new bn_js_1.default(1));\n    }\n}\nexports.Market = Market;\nexports._OPEN_ORDERS_LAYOUT_V1 = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    layout_1.publicKeyLayout('market'),\n    layout_1.publicKeyLayout('owner'),\n    // These are in spl-token (i.e. not lot) units\n    layout_1.u64('baseTokenFree'),\n    layout_1.u64('baseTokenTotal'),\n    layout_1.u64('quoteTokenFree'),\n    layout_1.u64('quoteTokenTotal'),\n    layout_1.u128('freeSlotBits'),\n    layout_1.u128('isBidBits'),\n    buffer_layout_1.seq(layout_1.u128(), 128, 'orders'),\n    buffer_layout_1.seq(layout_1.u64(), 128, 'clientIds'),\n    buffer_layout_1.blob(7),\n]);\nexports._OPEN_ORDERS_LAYOUT_V2 = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    layout_1.publicKeyLayout('market'),\n    layout_1.publicKeyLayout('owner'),\n    // These are in spl-token (i.e. not lot) units\n    layout_1.u64('baseTokenFree'),\n    layout_1.u64('baseTokenTotal'),\n    layout_1.u64('quoteTokenFree'),\n    layout_1.u64('quoteTokenTotal'),\n    layout_1.u128('freeSlotBits'),\n    layout_1.u128('isBidBits'),\n    buffer_layout_1.seq(layout_1.u128(), 128, 'orders'),\n    buffer_layout_1.seq(layout_1.u64(), 128, 'clientIds'),\n    layout_1.u64('referrerRebatesAccrued'),\n    buffer_layout_1.blob(7),\n]);\nclass OpenOrders {\n    constructor(address, decoded, programId) {\n        this.address = address;\n        this._programId = programId;\n        Object.assign(this, decoded);\n    }\n    static getLayout(programId) {\n        if (tokens_and_markets_1.getLayoutVersion(programId) === 1) {\n            return exports._OPEN_ORDERS_LAYOUT_V1;\n        }\n        return exports._OPEN_ORDERS_LAYOUT_V2;\n    }\n    static async findForOwner(connection, ownerAddress, programId) {\n        const filters = [\n            {\n                memcmp: {\n                    offset: this.getLayout(programId).offsetOf('owner'),\n                    bytes: ownerAddress.toBase58(),\n                },\n            },\n            {\n                dataSize: this.getLayout(programId).span,\n            },\n        ];\n        const accounts = await getFilteredProgramAccounts(connection, programId, filters);\n        return accounts.map(({ publicKey, accountInfo }) => OpenOrders.fromAccountInfo(publicKey, accountInfo, programId));\n    }\n    static async findForMarketAndOwner(connection, marketAddress, ownerAddress, programId) {\n        const filters = [\n            {\n                memcmp: {\n                    offset: this.getLayout(programId).offsetOf('market'),\n                    bytes: marketAddress.toBase58(),\n                },\n            },\n            {\n                memcmp: {\n                    offset: this.getLayout(programId).offsetOf('owner'),\n                    bytes: ownerAddress.toBase58(),\n                },\n            },\n            {\n                dataSize: this.getLayout(programId).span,\n            },\n        ];\n        const accounts = await getFilteredProgramAccounts(connection, programId, filters);\n        return accounts.map(({ publicKey, accountInfo }) => OpenOrders.fromAccountInfo(publicKey, accountInfo, programId));\n    }\n    static async load(connection, address, programId) {\n        const accountInfo = await connection.getAccountInfo(address);\n        if (accountInfo === null) {\n            throw new Error('Open orders account not found');\n        }\n        return OpenOrders.fromAccountInfo(address, accountInfo, programId);\n    }\n    static fromAccountInfo(address, accountInfo, programId) {\n        const { owner, data } = accountInfo;\n        if (!owner.equals(programId)) {\n            throw new Error('Address not owned by program');\n        }\n        const decoded = this.getLayout(programId).decode(data);\n        if (!decoded.accountFlags.initialized || !decoded.accountFlags.openOrders) {\n            throw new Error('Invalid open orders account');\n        }\n        return new OpenOrders(address, decoded, programId);\n    }\n    static async makeCreateAccountTransaction(connection, marketAddress, ownerAddress, newAccountAddress, programId) {\n        return web3_js_1.SystemProgram.createAccount({\n            fromPubkey: ownerAddress,\n            newAccountPubkey: newAccountAddress,\n            lamports: await connection.getMinimumBalanceForRentExemption(this.getLayout(programId).span),\n            space: this.getLayout(programId).span,\n            programId,\n        });\n    }\n    get publicKey() {\n        return this.address;\n    }\n}\nexports.OpenOrders = OpenOrders;\nexports.ORDERBOOK_LAYOUT = buffer_layout_1.struct([\n    buffer_layout_1.blob(5),\n    layout_1.accountFlagsLayout('accountFlags'),\n    slab_1.SLAB_LAYOUT.replicate('slab'),\n    buffer_layout_1.blob(7),\n]);\nclass Orderbook {\n    constructor(market, accountFlags, slab) {\n        if (!accountFlags.initialized || !(accountFlags.bids ^ accountFlags.asks)) {\n            throw new Error('Invalid orderbook');\n        }\n        this.market = market;\n        this.isBids = accountFlags.bids;\n        this.slab = slab;\n    }\n    static get LAYOUT() {\n        return exports.ORDERBOOK_LAYOUT;\n    }\n    static decode(market, buffer) {\n        const { accountFlags, slab } = exports.ORDERBOOK_LAYOUT.decode(buffer);\n        return new Orderbook(market, accountFlags, slab);\n    }\n    getL2(depth) {\n        const descending = this.isBids;\n        const levels = []; // (price, size)\n        for (const { key, quantity } of this.slab.items(descending)) {\n            const price = getPriceFromKey(key);\n            if (levels.length > 0 && levels[levels.length - 1][0].eq(price)) {\n                levels[levels.length - 1][1].iadd(quantity);\n            }\n            else if (levels.length === depth) {\n                break;\n            }\n            else {\n                levels.push([price, quantity]);\n            }\n        }\n        return levels.map(([priceLots, sizeLots]) => [\n            this.market.priceLotsToNumber(priceLots),\n            this.market.baseSizeLotsToNumber(sizeLots),\n            priceLots,\n            sizeLots,\n        ]);\n    }\n    *[Symbol.iterator]() {\n        for (const { key, ownerSlot, owner, quantity, feeTier, clientOrderId, } of this.slab) {\n            const price = getPriceFromKey(key);\n            yield {\n                orderId: key,\n                clientId: clientOrderId,\n                openOrdersAddress: owner,\n                openOrdersSlot: ownerSlot,\n                feeTier,\n                price: this.market.priceLotsToNumber(price),\n                priceLots: price,\n                size: this.market.baseSizeLotsToNumber(quantity),\n                sizeLots: quantity,\n                side: (this.isBids ? 'buy' : 'sell'),\n            };\n        }\n    }\n}\nexports.Orderbook = Orderbook;\nfunction getPriceFromKey(key) {\n    return key.ushrn(64);\n}\nfunction divideBnToNumber(numerator, denominator) {\n    const quotient = numerator.div(denominator).toNumber();\n    const rem = numerator.umod(denominator);\n    const gcd = rem.gcd(denominator);\n    return quotient + rem.div(gcd).toNumber() / denominator.div(gcd).toNumber();\n}\nconst MINT_LAYOUT = buffer_layout_1.struct([buffer_layout_1.blob(44), buffer_layout_1.u8('decimals'), buffer_layout_1.blob(37)]);\nasync function getMintDecimals(connection, mint) {\n    if (mint.equals(token_instructions_1.WRAPPED_SOL_MINT)) {\n        return 9;\n    }\n    const { data } = throwIfNull(await connection.getAccountInfo(mint), 'mint not found');\n    const { decimals } = MINT_LAYOUT.decode(data);\n    return decimals;\n}\nexports.getMintDecimals = getMintDecimals;\nasync function getFilteredProgramAccounts(connection, programId, filters) {\n    // @ts-ignore\n    const resp = await connection._rpcRequest('getProgramAccounts', [\n        programId.toBase58(),\n        {\n            commitment: connection.commitment,\n            filters,\n            encoding: 'base64',\n        },\n    ]);\n    if (resp.error) {\n        throw new Error(resp.error.message);\n    }\n    return resp.result.map(({ pubkey, account: { data, executable, owner, lamports } }) => ({\n        publicKey: new web3_js_1.PublicKey(pubkey),\n        accountInfo: {\n            data: buffer_1.Buffer.from(data[0], 'base64'),\n            executable,\n            owner: new web3_js_1.PublicKey(owner),\n            lamports,\n        },\n    }));\n}\nfunction throwIfNull(value, message = 'account not found') {\n    if (value === null) {\n        throw new Error(message);\n    }\n    return value;\n}\n//# sourceMappingURL=market.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Slab = exports.SLAB_LAYOUT = void 0;\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst layout_1 = require(\"./layout\");\nconst SLAB_HEADER_LAYOUT = buffer_layout_1.struct([\n    // Number of modified slab nodes\n    buffer_layout_1.u32('bumpIndex'),\n    layout_1.zeros(4),\n    // Linked list of unused nodes\n    buffer_layout_1.u32('freeListLen'),\n    layout_1.zeros(4),\n    buffer_layout_1.u32('freeListHead'),\n    buffer_layout_1.u32('root'),\n    buffer_layout_1.u32('leafCount'),\n    layout_1.zeros(4),\n], 'header');\nconst SLAB_NODE_LAYOUT = buffer_layout_1.union(buffer_layout_1.u32('tag'), buffer_layout_1.blob(68), 'node');\nSLAB_NODE_LAYOUT.addVariant(0, buffer_layout_1.struct([]), 'uninitialized');\nSLAB_NODE_LAYOUT.addVariant(1, buffer_layout_1.struct([\n    // Only the first prefixLen high-order bits of key are meaningful\n    buffer_layout_1.u32('prefixLen'),\n    layout_1.u128('key'),\n    buffer_layout_1.seq(buffer_layout_1.u32(), 2, 'children'),\n]), 'innerNode');\nSLAB_NODE_LAYOUT.addVariant(2, buffer_layout_1.struct([\n    buffer_layout_1.u8('ownerSlot'),\n    buffer_layout_1.u8('feeTier'),\n    buffer_layout_1.blob(2),\n    layout_1.u128('key'),\n    layout_1.publicKeyLayout('owner'),\n    layout_1.u64('quantity'),\n    layout_1.u64('clientOrderId'),\n]), 'leafNode');\nSLAB_NODE_LAYOUT.addVariant(3, buffer_layout_1.struct([buffer_layout_1.u32('next')]), 'freeNode');\nSLAB_NODE_LAYOUT.addVariant(4, buffer_layout_1.struct([]), 'lastFreeNode');\nexports.SLAB_LAYOUT = buffer_layout_1.struct([\n    SLAB_HEADER_LAYOUT,\n    buffer_layout_1.seq(SLAB_NODE_LAYOUT, buffer_layout_1.offset(SLAB_HEADER_LAYOUT.layoutFor('bumpIndex'), SLAB_HEADER_LAYOUT.offsetOf('bumpIndex') - SLAB_HEADER_LAYOUT.span), 'nodes'),\n]);\nclass Slab {\n    constructor(header, nodes) {\n        this.header = header;\n        this.nodes = nodes;\n    }\n    static decode(buffer) {\n        return exports.SLAB_LAYOUT.decode(buffer);\n    }\n    get(searchKey) {\n        if (this.header.leafCount === 0) {\n            return null;\n        }\n        if (!(searchKey instanceof bn_js_1.default)) {\n            searchKey = new bn_js_1.default(searchKey);\n        }\n        let index = this.header.root;\n        while (true) {\n            const { leafNode, innerNode } = this.nodes[index];\n            if (leafNode) {\n                if (leafNode.key.eq(searchKey)) {\n                    return leafNode;\n                }\n                return null;\n            }\n            else if (innerNode) {\n                if (!innerNode.key\n                    .xor(searchKey)\n                    .iushrn(128 - innerNode.prefixLen)\n                    .isZero()) {\n                    return null;\n                }\n                index =\n                    innerNode.children[searchKey.testn(128 - innerNode.prefixLen - 1) ? 1 : 0];\n            }\n            else {\n                throw new Error('Invalid slab');\n            }\n        }\n    }\n    [Symbol.iterator]() {\n        return this.items(false);\n    }\n    *items(descending = false) {\n        if (this.header.leafCount === 0) {\n            return;\n        }\n        const stack = [this.header.root];\n        while (stack.length > 0) {\n            const index = stack.pop();\n            const { leafNode, innerNode } = this.nodes[index];\n            if (leafNode) {\n                yield leafNode;\n            }\n            else if (innerNode) {\n                if (descending) {\n                    stack.push(innerNode.children[0], innerNode.children[1]);\n                }\n                else {\n                    stack.push(innerNode.children[1], innerNode.children[0]);\n                }\n            }\n        }\n    }\n}\nexports.Slab = Slab;\nlayout_1.setLayoutDecoder(exports.SLAB_LAYOUT, ({ header, nodes }) => new Slab(header, nodes));\n//# sourceMappingURL=slab.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeWallet = exports.Provider = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst simulate_transaction_1 = require(\"./simulate-transaction\");\nclass Provider {\n    constructor(connection, wallet, opts) {\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n    }\n    static defaultOptions() {\n        return {\n            preflightCommitment: 'recent',\n            commitment: 'recent',\n        };\n    }\n    static local(url, opts) {\n        opts = opts || Provider.defaultOptions();\n        const connection = new web3_js_1.Connection(url || 'http://localhost:8899', opts.preflightCommitment);\n        const wallet = NodeWallet.local();\n        return new Provider(connection, wallet, opts);\n    }\n    async send(tx, signers, opts) {\n        var _a;\n        if (signers === undefined) {\n            signers = [];\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const signerKps = signers.filter(s => s !== undefined);\n        const signerPubkeys = [this.wallet.publicKey].concat(signerKps.map(s => s.publicKey));\n        tx.setSigners(...signerPubkeys);\n        tx.recentBlockhash = (await this.connection.getRecentBlockhash(opts.preflightCommitment)).blockhash;\n        await this.wallet.signTransaction(tx);\n        signerKps.forEach(kp => {\n            tx.partialSign(kp);\n        });\n        const rawTx = tx.serialize();\n        try {\n            const txId = await web3_js_1.sendAndConfirmRawTransaction(this.connection, rawTx, opts);\n            return txId;\n        }\n        catch (err) {\n            console.error('Transaction failed. Simulating for logs...');\n            const r = await simulate_transaction_1.simulateTransaction(this.connection, tx, (_a = opts.commitment) !== null && _a !== void 0 ? _a : 'recent');\n            console.error(r);\n            throw err;\n        }\n    }\n    async sendAll(reqs, opts) {\n        var _a;\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const blockhash = await this.connection.getRecentBlockhash(opts.preflightCommitment);\n        let txs = reqs.map(r => {\n            let tx = r.tx;\n            let signers = r.signers;\n            if (signers === undefined) {\n                signers = [];\n            }\n            const signerKps = signers.filter(s => s !== undefined);\n            const signerPubkeys = [this.wallet.publicKey].concat(signerKps.map(s => s.publicKey));\n            tx.setSigners(...signerPubkeys);\n            tx.recentBlockhash = blockhash.blockhash;\n            signerKps.forEach(kp => {\n                tx.partialSign(kp);\n            });\n            return tx;\n        });\n        const signedTxs = await this.wallet.signAllTransactions(txs);\n        const sigs = [];\n        for (let k = 0; k < txs.length; k += 1) {\n            const tx = signedTxs[k];\n            const rawTx = tx.serialize();\n            try {\n                sigs.push(await web3_js_1.sendAndConfirmRawTransaction(this.connection, rawTx, opts));\n            }\n            catch (err) {\n                console.error('Transaction failed. Simulating for logs...');\n                const r = await simulate_transaction_1.simulateTransaction(this.connection, tx, (_a = opts.commitment) !== null && _a !== void 0 ? _a : 'recent');\n                console.error(r);\n                throw err;\n            }\n        }\n        return sigs;\n    }\n}\nexports.Provider = Provider;\nclass NodeWallet {\n    constructor(payer) {\n        this.payer = payer;\n    }\n    static local() {\n        const payer = new web3_js_1.Account(Buffer.from(JSON.parse(require('fs').readFileSync(require('os').homedir() + '/.config/solana/id.json', {\n            encoding: 'utf-8',\n        }))));\n        return new NodeWallet(payer);\n    }\n    async signTransaction(tx) {\n        tx.partialSign(this.payer);\n        return tx;\n    }\n    async signAllTransactions(txs) {\n        return txs.map(t => {\n            t.partialSign(this.payer);\n            return t;\n        });\n    }\n    get publicKey() {\n        return this.payer.publicKey;\n    }\n}\nexports.NodeWallet = NodeWallet;\n//# sourceMappingURL=provider.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOwnedAccountsFilters = exports.parseMintData = exports.parseTokenAccountData = exports.MINT_LAYOUT = exports.ACCOUNT_LAYOUT = exports.getOwnedTokenAccounts = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst serum_1 = require(\"@project-serum/serum\");\nconst bs58 = __importStar(require(\"bs58\"));\nconst BufferLayout = __importStar(require(\"buffer-layout\"));\nasync function getOwnedTokenAccounts(connection, publicKey) {\n    let filters = getOwnedAccountsFilters(publicKey);\n    // @ts-ignore\n    let resp = await connection._rpcRequest('getProgramAccounts', [\n        serum_1.TokenInstructions.TOKEN_PROGRAM_ID.toBase58(),\n        {\n            commitment: connection.commitment,\n            filters,\n        },\n    ]);\n    if (resp.error) {\n        throw new Error('failed to get token accounts owned by ' +\n            publicKey.toBase58() +\n            ': ' +\n            resp.error.message);\n    }\n    return (resp.result\n        // @ts-ignore\n        .map(({ pubkey, account: { data } }) => {\n        data = bs58.decode(data);\n        return {\n            publicKey: new web3_js_1.PublicKey(pubkey),\n            account: parseTokenAccountData(data),\n        };\n    }));\n}\nexports.getOwnedTokenAccounts = getOwnedTokenAccounts;\n// todo: remove\nexports.ACCOUNT_LAYOUT = BufferLayout.struct([\n    BufferLayout.blob(32, 'mint'),\n    BufferLayout.blob(32, 'owner'),\n    BufferLayout.nu64('amount'),\n    BufferLayout.blob(93),\n]);\nexports.MINT_LAYOUT = BufferLayout.struct([\n    BufferLayout.blob(44),\n    BufferLayout.u8('decimals'),\n    BufferLayout.blob(37),\n]);\nfunction parseTokenAccountData(data) {\n    // @ts-ignore\n    let { mint, owner, amount } = exports.ACCOUNT_LAYOUT.decode(data);\n    return {\n        mint: new web3_js_1.PublicKey(mint),\n        owner: new web3_js_1.PublicKey(owner),\n        amount,\n    };\n}\nexports.parseTokenAccountData = parseTokenAccountData;\n// @ts-ignore\nfunction parseMintData(data) {\n    // @ts-ignore\n    let { decimals } = exports.MINT_LAYOUT.decode(data);\n    return { decimals };\n}\nexports.parseMintData = parseMintData;\n// @ts-ignore\nfunction getOwnedAccountsFilters(publicKey) {\n    return [\n        {\n            memcmp: {\n                // @ts-ignore\n                offset: exports.ACCOUNT_LAYOUT.offsetOf('owner'),\n                bytes: publicKey.toBase58(),\n            },\n        },\n        {\n            dataSize: exports.ACCOUNT_LAYOUT.span,\n        },\n    ];\n}\nexports.getOwnedAccountsFilters = getOwnedAccountsFilters;\n//# sourceMappingURL=token.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.networks = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nexports.networks = {\n    mainnet: {\n        // Cluster.\n        label: 'Mainnet Beta',\n        url: 'https://solana-api.projectserum.com',\n        explorerClusterSuffix: '',\n        srm: new web3_js_1.PublicKey('SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt'),\n        msrm: new web3_js_1.PublicKey('MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L'),\n        srmFaucet: null,\n        msrmFaucet: null,\n        god: new web3_js_1.PublicKey('FhmUh2PEpTzUwBWPt4qgDBeqfmb2ES3T64CkT1ZiktSS'),\n        megaGod: new web3_js_1.PublicKey('FhmUh2PEpTzUwBWPt4qgDBeqfmb2ES3T64CkT1ZiktSS'),\n        registryProgramId: new web3_js_1.PublicKey('Gw1XNGbSnx7PJcHTTuxxhWfkjjPmq29Qkv1hWbVFnrDp'),\n        lockupProgramId: new web3_js_1.PublicKey('6GSn1woRF541HaiEWqNofYn8quzJuRBPi1nwoho8zNnh'),\n        metaEntityProgramId: new web3_js_1.PublicKey('9etE5ZjHZTrZ2wQfyfTSp5WBxjpvaakNJa5fSVToZn17'),\n        registrar: new web3_js_1.PublicKey('4VuXXLYZ6zztpj6xV2v8pqfAA9rJMUcQznhcL945bYxg'),\n        rewardEventQueue: new web3_js_1.PublicKey('3pYWVc4cEum5PyVyZFPBK5WDAwCu6SZMSQhv7KcSmbu8'),\n        safe: new web3_js_1.PublicKey('9GWd7WDUbeYSQ7LYu4KVE99Ards2mmXGi3bRhiptBvdx'),\n        defaultEntity: new web3_js_1.PublicKey('52saNiBhPsjnkXnHp4rJ3QKWXxKimzkzwcZstBFLeybZ'),\n    },\n    devnet: {\n        // Cluster.\n        label: 'Devnet',\n        url: 'https://devnet.solana.com',\n        explorerClusterSuffix: 'devnet',\n        srm: new web3_js_1.PublicKey('5ya5rnzm5MkvCXhLDCJqAUzT16A37ks2DekkfoNnwNMn'),\n        msrm: new web3_js_1.PublicKey('3fHm9sEBS3CukUX366mwzn3YwEc5zWNzR4JcGK6EVQad'),\n        srmFaucet: new web3_js_1.PublicKey('4qfd8QDCFXgvcaBfA2KYfQaobBQbRDn4gJxg86NhZRgD'),\n        msrmFaucet: new web3_js_1.PublicKey('7C9R9UN5tvJ8CTVgEYnRKXtSaVCYd14k98D4hDQf6gT7'),\n        god: new web3_js_1.PublicKey('GQZdNZhFJdhQhuL2yzVSAbZgsddkvoY2mcwfuT3mpjyW'),\n        megaGod: new web3_js_1.PublicKey('FPzCxY3zdmgXpDqyEnAhNMpthNdqnCoG2sK3qv77GXH1'),\n        registryProgramId: new web3_js_1.PublicKey('3ofaHrxu7RdqH8m1wXfVrsTqgwctmx2NsHPv6m7oh1dy'),\n        lockupProgramId: new web3_js_1.PublicKey('Az4dD6YeA4akzz4Qx3RuQqaCtLEaDiBT8u7mDL24sbAu'),\n        metaEntityProgramId: new web3_js_1.PublicKey('8v8hwdeyBhmV4y235F9XQ7g5Vz2EYvJTkGqTfrh3Hz5f'),\n        registrar: new web3_js_1.PublicKey('CU9WcqupNYvJErkGcXFAc97toGNn3sudA3basC3DNyYa'),\n        rewardEventQueue: new web3_js_1.PublicKey('FimrG7oMRxSARZ1eFKoNYpZb11RmsGughABf7HEtJHg4'),\n        safe: new web3_js_1.PublicKey('6Duzo1gCreYjn5ha4GvFsYu1xSUDwXdDRzYhPVF9ir5u'),\n        defaultEntity: new web3_js_1.PublicKey('C4jSXy8jNzzrd9mDyCR4dt4L7MKqnXS6QXzddWRh3jRK'),\n    },\n    // Fill in with your local cluster addresses.\n    localhost: {\n        // Cluster.\n        label: 'Localhost',\n        url: 'http://localhost:8899',\n        explorerClusterSuffix: 'localhost',\n        srm: new web3_js_1.PublicKey('5SJCvEnLQkvPj6SPDStiaTwUB1aYa95KewfiBjGL1cmS'),\n        msrm: new web3_js_1.PublicKey('CxVUauucfZnQPNnvUqScDAVWUfMxvwnSSS9zPqbQQoCw'),\n        srmFaucet: null,\n        msrmFaucet: null,\n        god: new web3_js_1.PublicKey('GznWNRfue3Y7htP9WbRfW6uitRa9NMg8oLckR1qSiESB'),\n        megaGod: new web3_js_1.PublicKey('7Kr3WMCDcW598utPoSeJk7zJ2nmZZBoZikJLp8M9Hghv'),\n        registryProgramId: new web3_js_1.PublicKey('F3nugLJnYswkr5MhtsbkYnGExw7FiRew6izTkTrabVuG'),\n        lockupProgramId: new web3_js_1.PublicKey('D5E96snBmYVFd6Gg6BtXKhbJWdjBRhqYYvibyaaKcsVv'),\n        metaEntityProgramId: new web3_js_1.PublicKey('Cu372h1sfqBVUG83cYYocmBGTNc1UNWghfui2TczJjLZ'),\n        registrar: new web3_js_1.PublicKey('3qMdUVwah5Ej1rxaWFkrx6HDxcZ3aZoxaiPj5yP7fiv8'),\n        rewardEventQueue: new web3_js_1.PublicKey('DYx33pZf9BgSNPGxSvCEZjWjDTk9ybAqRnGKMHPYy7G8'),\n        safe: new web3_js_1.PublicKey('252GViKQx5Q6HmmDN3LgkevcMCnRgMREqsUz9DZojroH'),\n        defaultEntity: new web3_js_1.PublicKey('Gb1Gobnvyx2BPn7KdmNayi8bVbqBJZ3Xy9pxC9r7cPxW'),\n    },\n};\n//# sourceMappingURL=networks.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GetMultipleAccountsAndContextRpcResult = exports.getMultipleSolanaAccounts = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst superstruct_1 = require(\"superstruct\");\nconst assert_1 = __importDefault(require(\"assert\"));\nasync function getMultipleSolanaAccounts(connection, publicKeys) {\n    const args = [publicKeys.map(k => k.toBase58()), { commitment: 'recent' }];\n    // @ts-ignore\n    const unsafeRes = await connection._rpcRequest('getMultipleAccounts', args);\n    const res = exports.GetMultipleAccountsAndContextRpcResult(unsafeRes);\n    if (res.error) {\n        throw new Error('failed to get info about accounts ' +\n            publicKeys.map(k => k.toBase58()).join(', ') +\n            ': ' +\n            res.error.message);\n    }\n    assert_1.default(typeof res.result !== 'undefined');\n    const accounts = [];\n    for (const account of res.result.value) {\n        let value = null;\n        if (res.result.value) {\n            const { executable, owner, lamports, data } = account;\n            assert_1.default(data[1] === 'base64');\n            value = {\n                executable,\n                owner: new web3_js_1.PublicKey(owner),\n                lamports,\n                data: Buffer.from(data[0], 'base64'),\n            };\n        }\n        if (value === null) {\n            throw new Error('Invalid response');\n        }\n        accounts.push(value);\n    }\n    return accounts.map((account, idx) => {\n        return {\n            publicKey: publicKeys[idx],\n            account,\n        };\n    });\n}\nexports.getMultipleSolanaAccounts = getMultipleSolanaAccounts;\nfunction jsonRpcResult(resultDescription) {\n    const jsonRpcVersion = superstruct_1.struct.literal('2.0');\n    return superstruct_1.struct.union([\n        superstruct_1.struct({\n            jsonrpc: jsonRpcVersion,\n            id: 'string',\n            error: 'any',\n        }),\n        superstruct_1.struct({\n            jsonrpc: jsonRpcVersion,\n            id: 'string',\n            error: 'null?',\n            result: resultDescription,\n        }),\n    ]);\n}\nfunction jsonRpcResultAndContext(resultDescription) {\n    return jsonRpcResult({\n        context: superstruct_1.struct({\n            slot: 'number',\n        }),\n        value: resultDescription,\n    });\n}\nconst AccountInfoResult = superstruct_1.struct({\n    executable: 'boolean',\n    owner: 'string',\n    lamports: 'number',\n    data: 'any',\n    rentEpoch: 'number?',\n});\nexports.GetMultipleAccountsAndContextRpcResult = jsonRpcResultAndContext(superstruct_1.struct.array([superstruct_1.struct.union(['null', AccountInfoResult])]));\n//# sourceMappingURL=connection.js.map","export type Action = {\n  type: ActionType;\n  item: any;\n};\n\nexport enum ActionType {\n  // Common.\n  CommonTriggerBootstrap,\n  CommonAppWillBootstrap,\n  CommonAppDidBootstrap,\n  CommonTriggerShutdown,\n  CommonDidShutdown,\n  CommonWalletDidConnect,\n  CommonWalletDidDisconnect,\n  CommonWalletSetProvider,\n  CommonSetNetwork,\n  CommonOwnedTokenAccountsSet,\n  CommonWalletReset,\n\n  // Lockup.\n  LockupSetSafe,\n  LockupSetVestings,\n  LockupUpdateVesting,\n  LockupCreateVesting,\n\n  // Registry.\n  RegistryCreateEntity,\n  RegistrySetEntities,\n  RegistryUpdateEntity,\n  RegistrySetMember,\n  RegistrySetMetadata,\n  RegistrySetRewardEventQueue,\n  RegistryCreateMetadata,\n  RegistrySetPoolMint,\n  RegistrySetPoolMintMega,\n  RegistrySetRegistrar,\n  RegistrySetPendingWithdrawals,\n  RegistryCreatePendingWithdrawal,\n  RegistryUpdatePendingWithdrawal,\n  RegistryCreateRewardVendor,\n}\n","import { AccountInfo as TokenAccount, MintInfo } from '@solana/spl-token';\nimport * as lockup from '@project-serum/lockup';\nimport * as registry from '@project-serum/registry';\nimport {\n  ProgramAccount as CommonProgramAccount,\n  networks,\n  Network,\n} from '@project-serum/common';\nimport { Action, ActionType } from './actions';\n\nexport enum BootstrapState {\n  NeedsBootstrap,\n  IsBootstrapping,\n  Bootstrapped,\n}\n\nexport default function reducer(\n  state: State = initialState,\n  action: Action,\n): State {\n  let newState = {\n    common: { ...state.common },\n    lockup: { ...state.lockup },\n    registry: { ...state.registry },\n  };\n  switch (action.type) {\n    // Common.\n    case ActionType.CommonAppWillBootstrap:\n      newState.common.bootstrapState = BootstrapState.IsBootstrapping;\n      newState.common.bootstrapTrigger = false;\n      return newState;\n    case ActionType.CommonAppDidBootstrap:\n      newState.common.bootstrapState = BootstrapState.Bootstrapped;\n      return newState;\n    case ActionType.CommonWalletSetProvider:\n      newState.common.walletProvider = action.item.walletProvider;\n      return newState;\n    case ActionType.CommonWalletDidConnect:\n      newState.common.isWalletConnected = true;\n      return newState;\n    case ActionType.CommonWalletDidDisconnect:\n      newState.common.isWalletConnected = false;\n      return newState;\n    case ActionType.CommonSetNetwork:\n      if (newState.common.network.label !== action.item.network.label) {\n        newState.common.network = action.item.network;\n        newState.common.bootstrapState = BootstrapState.NeedsBootstrap;\n        newState.common.shutdownTrigger = true;\n      }\n      return newState;\n    case ActionType.CommonTriggerBootstrap:\n      newState.common.bootstrapState = BootstrapState.NeedsBootstrap;\n      newState.common.bootstrapTrigger = true;\n      return newState;\n    case ActionType.CommonTriggerShutdown:\n      newState.common.bootstrapState = BootstrapState.NeedsBootstrap;\n      newState.common.shutdownTrigger = true;\n      return newState;\n    case ActionType.CommonDidShutdown:\n      // Reset everything except network.\n      let s = {\n        ...initialState,\n      };\n      s.common.network = newState.common.network;\n      return s;\n    case ActionType.CommonOwnedTokenAccountsSet:\n      newState.common.ownedTokenAccounts = action.item.ownedTokenAccounts;\n      return newState;\n\n    // Lockup.\n    case ActionType.LockupSetVestings:\n      newState.lockup.vestings = action.item.vestingAccounts;\n      return newState;\n    case ActionType.LockupUpdateVesting:\n      newState.lockup.vestings = newState.lockup.vestings.map(v => {\n        if (v.publicKey.equals(action.item.vesting.publicKey)) {\n          return action.item.vesting;\n        }\n        return v;\n      });\n      return newState;\n    case ActionType.LockupCreateVesting:\n      newState.lockup.vestings.unshift(action.item.vesting);\n      return newState;\n    case ActionType.LockupSetSafe:\n      newState.lockup.safe = action.item.safe;\n      return newState;\n\n    // Registry.\n    case ActionType.RegistryCreateEntity:\n      newState.registry.entities.unshift(action.item.entity);\n      return newState;\n    case ActionType.RegistrySetEntities:\n      newState.registry.entities = action.item.entities;\n      return newState;\n    case ActionType.RegistryUpdateEntity:\n      newState.registry.entities = newState.registry.entities.map(e => {\n        if (\n          e.publicKey.toString() === action.item.entity.publicKey.toString()\n        ) {\n          e = action.item.entity;\n        }\n        return { ...e };\n      });\n      return newState;\n    case ActionType.RegistrySetMember:\n      newState.registry.member = {\n        isReady: true,\n        data: action.item.member,\n      };\n      return newState;\n    case ActionType.RegistrySetPoolMint:\n      newState.registry.poolTokenMint = action.item.poolMint;\n      return newState;\n    case ActionType.RegistrySetPoolMintMega:\n      newState.registry.megaPoolTokenMint = action.item.poolMintMega;\n      return newState;\n    case ActionType.RegistrySetRegistrar:\n      newState.registry.registrar = action.item.registrar;\n      return newState;\n    case ActionType.RegistrySetPendingWithdrawals:\n      newState.registry.pendingWithdrawals = new Map(\n        newState.registry.pendingWithdrawals,\n      ).set(\n        action.item.memberPublicKey.toString(),\n        action.item.pendingWithdrawals,\n      );\n      return newState;\n    case ActionType.RegistryCreatePendingWithdrawal:\n      const oldPw = newState.registry.pendingWithdrawals;\n      const memberWithdrawals = oldPw.has(\n        action.item.memberPublicKey.toString(),\n      )\n        ? [\n            ...(oldPw.get(\n              action.item.memberPublicKey.toString(),\n            ) as ProgramAccount<registry.accounts.PendingWithdrawal>[]),\n          ]\n        : [];\n      memberWithdrawals.unshift(action.item.pendingWithdrawal);\n      newState.registry.pendingWithdrawals = new Map(oldPw).set(\n        action.item.memberPublicKey.toString(),\n        memberWithdrawals,\n      );\n      return newState;\n    case ActionType.RegistryUpdatePendingWithdrawal:\n      const allPendingWithdrawals = new Map(\n        newState.registry.pendingWithdrawals,\n      );\n      const memberPendingWithdrawals = allPendingWithdrawals\n        .get(action.item.memberPublicKey.toString())!\n        .map(pw => {\n          if (\n            pw.publicKey.toString() ===\n            action.item.pendingWithdrawal.publicKey.toString()\n          ) {\n            return action.item.pendingWithdrawal;\n          }\n          return pw;\n        });\n\n      newState.registry.pendingWithdrawals.set(\n        action.item.memberPublicKey.toString(),\n        memberPendingWithdrawals,\n      );\n      return newState;\n    case ActionType.RegistrySetMetadata:\n      const entityMetadata = new Map();\n      action.item.entityMetadata.forEach(\n        (\n          emd: ProgramAccount<registry.metaEntity.accounts.metadata.Metadata>,\n        ) => {\n          entityMetadata.set(emd.account.entity.toString(), emd);\n        },\n      );\n      newState.registry.entityMetadata = entityMetadata;\n      return newState;\n    case ActionType.RegistryCreateMetadata:\n      const emd = new Map(newState.registry.entityMetadata);\n      emd.set(action.item.entityPublicKey.toString(), action.item.metadata);\n      newState.registry.entityMetadata = emd;\n      return newState;\n    case ActionType.RegistrySetRewardEventQueue:\n      newState.registry.rewardEventQueue = action.item.rewardEventQueue;\n      return newState;\n    case ActionType.RegistryCreateRewardVendor:\n      const vendors = new Map(newState.registry.vendors);\n      vendors.set(action.item.vendor.publicKey.toString(), action.item.vendor);\n      newState.registry.vendors = vendors;\n      return newState;\n    // Misc.\n    default:\n      return newState;\n  }\n}\n\nexport type State = {\n  common: CommonState;\n  lockup: LockupState;\n  registry: RegistryState;\n};\n\nexport type CommonState = {\n  walletProvider?: string;\n  isWalletConnected: boolean;\n  bootstrapTrigger: boolean;\n  bootstrapState: BootstrapState;\n  shutdownTrigger: boolean;\n  network: Network;\n  ownedTokenAccounts: ProgramAccount<TokenAccount>[];\n};\n\nexport type LockupState = {\n  safe?: ProgramAccount<lockup.accounts.Safe>;\n  vestings: ProgramAccount<lockup.accounts.Vesting>[];\n};\n\nexport type RegistryState = {\n  entities: ProgramAccount<registry.accounts.Entity>[];\n  entityMetadata: Map<\n    string,\n    ProgramAccount<registry.metaEntity.accounts.metadata.Metadata>\n  >;\n  member: AsyncData<ProgramAccount<registry.accounts.MemberDeref>>;\n  poolTokenMint?: ProgramAccount<MintInfo>;\n  megaPoolTokenMint?: ProgramAccount<MintInfo>;\n  registrar?: ProgramAccount<registry.accounts.Registrar>;\n  pendingWithdrawals: Map<\n    string,\n    Array<ProgramAccount<registry.accounts.PendingWithdrawal>>\n  >;\n  rewardEventQueue?: ProgramAccount<registry.accounts.RewardEventQueue>;\n  vendors: Map<\n    string,\n    ProgramAccount<\n      | registry.accounts.LockedRewardVendor\n      | registry.accounts.UnlockedRewardVendor\n    >\n  >;\n};\n\nexport type AsyncData<T> = {\n  isReady: boolean;\n  data?: T;\n};\n\nfunction defaultAsyncData<T>(): AsyncData<T> {\n  return { isReady: false };\n}\n\n// Re-export.\nexport type ProgramAccount<T> = CommonProgramAccount<T>;\n\nexport const initialState: State = {\n  common: {\n    bootstrapTrigger: false,\n    shutdownTrigger: false,\n    isWalletConnected: false,\n    walletProvider: 'https://www.sollet.io',\n    bootstrapState: BootstrapState.NeedsBootstrap,\n    network: networks.mainnet,\n    ownedTokenAccounts: [],\n  },\n  lockup: {\n    vestings: [],\n  },\n  registry: {\n    member: defaultAsyncData(),\n    entities: [],\n    entityMetadata: new Map(),\n    pendingWithdrawals: new Map(),\n    vendors: new Map(),\n  },\n};\n","import { createStore } from 'redux';\nimport reducer from './reducer';\n\nexport const store = createStore(reducer);\n","import { Account, SystemProgram, Connection, PublicKey, Transaction, TransactionInstruction, SYSVAR_RENT_PUBKEY, SYSVAR_CLOCK_PUBKEY, } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '@project-serum/serum/lib/token-instructions';\nimport { createTokenAccountInstrs, createMint, getTokenAccount, Provider, NodeWallet, networks, } from '@project-serum/common';\nimport { txIx as lockupTxIx, } from '@project-serum/lockup';\nimport * as instruction from '../instruction';\nimport * as accounts from '../accounts';\nimport { SIZE as REGISTRAR_SIZE } from '../accounts/registrar';\nimport * as metaEntity from '../meta-entity';\nimport Accounts from './accounts';\nexport default class Client {\n    constructor(cfg) {\n        this.provider = cfg.provider;\n        this.programId = cfg.programId;\n        this.metaEntityProgramId = cfg.metaEntityProgramId;\n        this.accounts = new Accounts(cfg.provider, cfg.registrar, cfg.programId, cfg.metaEntityProgramId);\n        this.registrar = cfg.registrar;\n        this.rewardEventQueue = cfg.rewardEventQueue;\n    }\n    // Connects to the devnet deployment of the program.\n    static devnet(wallet, opts) {\n        if (wallet === undefined) {\n            wallet = NodeWallet.local();\n        }\n        opts = opts || Provider.defaultOptions();\n        const connection = new Connection('https://devnet.solana.com', opts.preflightCommitment);\n        const provider = new Provider(connection, wallet, opts);\n        return new Client({\n            provider,\n            programId: networks.devnet.registryProgramId,\n            registrar: networks.devnet.registrar,\n            metaEntityProgramId: networks.devnet.metaEntityProgramId,\n            rewardEventQueue: networks.devnet.rewardEventQueue,\n        });\n    }\n    static localhost(wallet, opts) {\n        if (wallet === undefined) {\n            wallet = NodeWallet.local();\n        }\n        opts = opts || Provider.defaultOptions();\n        const connection = new Connection('http://localhost:8899', opts.preflightCommitment);\n        const provider = new Provider(connection, wallet, opts);\n        return new Client({\n            provider,\n            programId: networks.localhost.registryProgramId,\n            registrar: networks.localhost.registrar,\n            metaEntityProgramId: networks.localhost.metaEntityProgramId,\n            rewardEventQueue: networks.localhost.rewardEventQueue,\n        });\n    }\n    // Initializes both the registry and its associated staking pool.\n    static async initialize(provider, req) {\n        let { programId, metaEntityProgramId, mint, megaMint, withdrawalTimelock, deactivationTimelock, maxStakePerEntity, authority, registrar, stakeRate, stakeRateMega, } = req;\n        if (authority === undefined) {\n            authority = provider.wallet.publicKey;\n        }\n        if (registrar === undefined) {\n            registrar = new Account();\n        }\n        const rewardEventQueue = new Account();\n        const pool = new Account();\n        const megaPool = new Account();\n        // Create program vault authorities.\n        const [vaultAuthority, vaultNonce] = await PublicKey.findProgramAddress([registrar.publicKey.toBuffer()], programId);\n        // Create pool tokens.\n        const poolMint = await createMint(provider, vaultAuthority);\n        const megaPoolMint = await createMint(provider, vaultAuthority);\n        const tx = new Transaction();\n        tx.add(\n        // Create reward event queue.\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: rewardEventQueue.publicKey,\n            space: accounts.RewardEventQueue.accountSize(),\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(accounts.RewardEventQueue.accountSize()),\n            programId: programId,\n        }), \n        // Create registrar.\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: registrar.publicKey,\n            space: REGISTRAR_SIZE,\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(REGISTRAR_SIZE),\n            programId: programId,\n        }), \n        // Iniitalize registrar.\n        new TransactionInstruction({\n            keys: [\n                { pubkey: registrar.publicKey, isWritable: true, isSigner: false },\n                { pubkey: poolMint, isWritable: false, isSigner: false },\n                { pubkey: megaPoolMint, isWritable: false, isSigner: false },\n                {\n                    pubkey: rewardEventQueue.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: programId,\n            data: instruction.encode({\n                initialize: {\n                    authority,\n                    mint,\n                    megaMint,\n                    nonce: vaultNonce,\n                    withdrawalTimelock,\n                    deactivationTimelock,\n                    maxStakePerEntity,\n                    stakeRate,\n                    stakeRateMega,\n                },\n            }),\n        }));\n        const createSigners = [rewardEventQueue, registrar];\n        const sig = await provider.send(tx, createSigners);\n        const client = new Client({\n            registrar: registrar.publicKey,\n            provider,\n            programId,\n            metaEntityProgramId,\n            rewardEventQueue: rewardEventQueue.publicKey,\n        });\n        return [\n            client,\n            {\n                tx: sig,\n                registrar: registrar.publicKey,\n                pool: pool.publicKey,\n                megaPool: megaPool.publicKey,\n            },\n        ];\n    }\n    async updateRegistrar(req) {\n        let { authority, newAuthority, withdrawalTimelock, deactivationTimelock, maxStakePerEntity, } = req;\n        let authorityPubkey = authority === undefined\n            ? this.provider.wallet.publicKey\n            : authority.publicKey;\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: this.registrar, isWritable: true, isSigner: false },\n                { pubkey: authorityPubkey, isWritable: false, isSigner: true },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                updateRegistrar: {\n                    newAuthority,\n                    withdrawalTimelock,\n                    deactivationTimelock,\n                    maxStakePerEntity,\n                },\n            }),\n        }));\n        let signers = [authority];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async createEntity(req) {\n        let { leader, name, about, imageUrl } = req;\n        const leaderPubkey = leader === undefined ? this.provider.wallet.publicKey : leader.publicKey;\n        const metadataAccount = new Account();\n        const mqueue = new Account();\n        const entity = new Account();\n        const metadataInstrs = await metaEntity.transaction.initializeInstrs({\n            mqueue,\n            programId: this.metaEntityProgramId,\n            authority: leaderPubkey,\n            name,\n            about,\n            provider: this.provider,\n            metadataAccount,\n            imageUrl,\n            entity: entity.publicKey,\n        });\n        const tx = new Transaction();\n        tx.add(...metadataInstrs, SystemProgram.createAccount({\n            fromPubkey: this.provider.wallet.publicKey,\n            newAccountPubkey: entity.publicKey,\n            lamports: await this.provider.connection.getMinimumBalanceForRentExemption(accounts.entity.SIZE),\n            space: accounts.entity.SIZE,\n            programId: this.programId,\n        }));\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: entity.publicKey, isWritable: true, isSigner: false },\n                { pubkey: leaderPubkey, isWritable: false, isSigner: true },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                createEntity: {\n                    metadata: metadataAccount.publicKey,\n                },\n            }),\n        }));\n        let signers = [metadataAccount, mqueue, entity, leader];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n            entity: entity.publicKey,\n            metadata: metadataAccount.publicKey,\n        };\n    }\n    async updateEntity(req) {\n        let { leader, newLeader, entity } = req;\n        const leaderPubkey = leader === undefined ? this.provider.wallet.publicKey : leader.publicKey;\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: entity, isWritable: true, isSigner: false },\n                { pubkey: leaderPubkey, isWritable: false, isSigner: true },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                updateEntity: {\n                    leader: newLeader,\n                },\n            }),\n        }));\n        let signers = [leader];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async createMember(req) {\n        let { beneficiary, entity, delegate, registrar } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (registrar === undefined) {\n            registrar = await this.accounts.registrar();\n        }\n        const member = new Account();\n        const registrySigner = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const [mainTxs, main] = await this.createBalanceSandbox(registrar, registrySigner, beneficiaryPubkey);\n        const [lockedTxs, locked] = await this.createBalanceSandbox(registrar, registrySigner, delegate);\n        const tx = new Transaction();\n        tx.add(SystemProgram.createAccount({\n            fromPubkey: this.provider.wallet.publicKey,\n            newAccountPubkey: member.publicKey,\n            lamports: await this.provider.connection.getMinimumBalanceForRentExemption(accounts.member.SIZE),\n            space: accounts.member.SIZE,\n            programId: this.programId,\n        }), new TransactionInstruction({\n            keys: [\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: entity, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: registrySigner, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n                // Main.\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: false },\n                { pubkey: main.spt, isWritable: true, isSigner: false },\n                { pubkey: main.sptMega, isWritable: true, isSigner: false },\n                { pubkey: main.vault, isWritable: false, isSigner: false },\n                { pubkey: main.vaultMega, isWritable: false, isSigner: false },\n                { pubkey: main.vaultStake, isWritable: false, isSigner: false },\n                { pubkey: main.vaultStakeMega, isWritable: false, isSigner: false },\n                {\n                    pubkey: main.vaultPendingWithdrawal,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                {\n                    pubkey: main.vaultPendingWithdrawalMega,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                // Locked.\n                { pubkey: delegate, isWritable: false, isSigner: false },\n                { pubkey: locked.spt, isWritable: true, isSigner: false },\n                { pubkey: locked.sptMega, isWritable: true, isSigner: false },\n                { pubkey: locked.vault, isWritable: false, isSigner: false },\n                { pubkey: locked.vaultMega, isWritable: false, isSigner: false },\n                { pubkey: locked.vaultStake, isWritable: false, isSigner: false },\n                { pubkey: locked.vaultStakeMega, isWritable: false, isSigner: false },\n                {\n                    pubkey: locked.vaultPendingWithdrawal,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                {\n                    pubkey: locked.vaultPendingWithdrawalMega,\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                createMember: {},\n            }),\n        }));\n        let signers = [member, beneficiary];\n        const allTxs = [...mainTxs, ...lockedTxs, { tx, signers }];\n        let txSigs = await this.provider.sendAll(allTxs);\n        return {\n            txs: txSigs,\n            member: member.publicKey,\n            balances: [main, locked],\n        };\n    }\n    async createBalanceSandbox(r, registrySigner, owner) {\n        const spt = new Account();\n        const sptMega = new Account();\n        const vault = new Account();\n        const vaultMega = new Account();\n        const vaultStake = new Account();\n        const vaultStakeMega = new Account();\n        const vaultPw = new Account();\n        const vaultPwMega = new Account();\n        const lamports = await this.provider.connection.getMinimumBalanceForRentExemption(165);\n        const createSptIx = await createTokenAccountInstrs(this.provider, spt.publicKey, r.poolMint, registrySigner, lamports);\n        const createMsptIx = await createTokenAccountInstrs(this.provider, sptMega.publicKey, r.poolMintMega, registrySigner, lamports);\n        const createVaultIx = await createTokenAccountInstrs(this.provider, vault.publicKey, r.mint, registrySigner, lamports);\n        const createVaultMegaIx = await createTokenAccountInstrs(this.provider, vaultMega.publicKey, r.megaMint, registrySigner, lamports);\n        const createVaultStakeIx = await createTokenAccountInstrs(this.provider, vaultStake.publicKey, r.mint, registrySigner, lamports);\n        const createVaultStakeMegaIx = await createTokenAccountInstrs(this.provider, vaultStakeMega.publicKey, r.megaMint, registrySigner, lamports);\n        const createVaultPwIx = await createTokenAccountInstrs(this.provider, vaultPw.publicKey, r.mint, registrySigner, lamports);\n        const createVaultPwMegaIx = await createTokenAccountInstrs(this.provider, vaultPwMega.publicKey, r.megaMint, registrySigner, lamports);\n        let tx0 = new Transaction();\n        tx0.add(...createSptIx, ...createMsptIx, ...createVaultIx, ...createVaultMegaIx);\n        let signers0 = [spt, sptMega, vault, vaultMega];\n        const tx1 = new Transaction();\n        tx1.add(...createVaultStakeIx, ...createVaultStakeMegaIx, ...createVaultPwIx, ...createVaultPwMegaIx);\n        let signers1 = [vaultStake, vaultStakeMega, vaultPw, vaultPwMega];\n        const txs = [\n            { tx: tx0, signers: signers0 },\n            { tx: tx1, signers: signers1 },\n        ];\n        return [\n            txs,\n            {\n                owner,\n                spt: spt.publicKey,\n                sptMega: sptMega.publicKey,\n                vault: vault.publicKey,\n                vaultMega: vaultMega.publicKey,\n                vaultStake: vaultStake.publicKey,\n                vaultStakeMega: vaultStakeMega.publicKey,\n                vaultPendingWithdrawal: vaultPw.publicKey,\n                vaultPendingWithdrawalMega: vaultPwMega.publicKey,\n            },\n        ];\n    }\n    async updateMember(req) {\n        let { member, beneficiary, delegate } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: member, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                updateMember: {\n                    delegate,\n                },\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async deposit(req) {\n        let { entity, member, beneficiary, depositor, depositorAuthority, amount, vault, vaultOwner, } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        const depositorAuthorityPubkey = depositorAuthority === undefined\n            ? this.provider.wallet.publicKey\n            : depositorAuthority.publicKey;\n        if (entity === undefined) {\n            let m = await this.accounts.member(member);\n            entity = m.entity;\n        }\n        if (vault === undefined || vaultOwner == undefined) {\n            const v = await this.vaultFor(depositor, member, beneficiaryPubkey);\n            vault = v.vaultAddress;\n            vaultOwner = v.vault.owner;\n        }\n        // Dummy account to pass into the instruction, since it conforms to the\n        // lockup program's whitelist withdraw/deposit interface.\n        const dummyAccountMeta = {\n            pubkey: SYSVAR_CLOCK_PUBKEY,\n            isWritable: false,\n            isSigner: false,\n        };\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                // Whitelist relay interface.\n                dummyAccountMeta,\n                { pubkey: depositor, isWritable: true, isSigner: false },\n                {\n                    pubkey: depositorAuthorityPubkey,\n                    isWritable: true,\n                    isSigner: true,\n                },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultOwner, isWritable: false, isSigner: false },\n                // Program specific.\n                { pubkey: member, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: entity, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                deposit: {\n                    amount,\n                },\n            }),\n        }));\n        let signers = [depositorAuthority, beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async withdraw(req) {\n        let { entity, member, beneficiary, depositor, depositorAuthority, amount, vault, vaultOwner, } = req;\n        if (entity === undefined) {\n            let m = await this.accounts.member(member);\n            entity = m.entity;\n        }\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        const depositorAuthorityPubkey = depositorAuthority === undefined\n            ? this.provider.wallet.publicKey\n            : depositorAuthority.publicKey;\n        if (vault === undefined || vaultOwner === undefined) {\n            let v = await this.vaultFor(depositor, member, beneficiaryPubkey);\n            vault = v.vaultAddress;\n            vaultOwner = v.vault.owner;\n        }\n        // Dummy account to pass into the instruction, since it conforms to the\n        // lockup program's whitelist withdraw/deposit interface.\n        const dummyAccountMeta = {\n            pubkey: SYSVAR_CLOCK_PUBKEY,\n            isWritable: false,\n            isSigner: false,\n        };\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                // Whitelist relay interface.\n                dummyAccountMeta,\n                { pubkey: depositor, isWritable: true, isSigner: false },\n                {\n                    pubkey: depositorAuthorityPubkey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultOwner, isWritable: false, isSigner: false },\n                // Program specific.\n                { pubkey: member, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: entity, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                withdraw: {\n                    amount,\n                },\n            }),\n        }));\n        let signers = [depositorAuthority, beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async vaultFor(depositor, member, balanceId) {\n        let vaultAddress = undefined;\n        let vault = undefined;\n        let depositorAcc = await getTokenAccount(this.provider, depositor);\n        let balances = (await this.accounts.member(member)).balances\n            .filter(b => b.owner.equals(balanceId))\n            .pop();\n        if (balances === undefined) {\n            throw new Error(`Invalid balance ID: ${balanceId}`);\n        }\n        let vaultAcc = await this.accounts.depositVault(member, balanceId);\n        if (vaultAcc.mint.equals(depositorAcc.mint)) {\n            vaultAddress = balances.vault;\n            vault = vaultAcc;\n        }\n        let megaVaultAcc = await this.accounts.depositMegaVault(member, balanceId);\n        if (megaVaultAcc.mint.equals(depositorAcc.mint)) {\n            vaultAddress = balances.vaultMega;\n            vault = megaVaultAcc;\n        }\n        if (vaultAddress === undefined) {\n            throw new Error(`Invalid depositor account: ${depositor}`);\n        }\n        if (vault === undefined) {\n            throw new Error(`Invalid mint for depositor account: ${depositor}`);\n        }\n        return {\n            vaultAddress,\n            vault,\n        };\n    }\n    async stake(req) {\n        let { member, beneficiary, amount, spt, registrar, isMega, balanceId, } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (registrar === undefined) {\n            registrar = await this.accounts.registrar();\n        }\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const balances = member.account.balances\n            .filter(b => b.owner.equals(balanceId))\n            .pop();\n        if (balances === undefined)\n            throw new Error('balance not found');\n        const [vault, vaultStake, poolMint] = (() => {\n            if (isMega) {\n                return [\n                    balances.vaultMega,\n                    balances.vaultStakeMega,\n                    registrar.poolMintMega,\n                ];\n            }\n            else {\n                return [balances.vault, balances.vaultStake, registrar.poolMint];\n            }\n        })();\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: member.account.entity, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: vaultStake, isWritable: true, isSigner: false },\n                { pubkey: poolMint, isWritable: true, isSigner: false },\n                { pubkey: spt, isWritable: true, isSigner: false },\n                {\n                    pubkey: registrar.rewardEventQueue,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n            ].concat(member.account.balances\n                .map(b => {\n                return [\n                    { pubkey: b.owner, isWritable: false, isSigner: false },\n                    { pubkey: b.spt, isWritable: false, isSigner: false },\n                    {\n                        pubkey: b.sptMega,\n                        isWritable: false,\n                        isSigner: false,\n                    },\n                ];\n            })\n                // @ts-ignore\n                .flat()),\n            programId: this.programId,\n            data: instruction.encode({\n                stake: {\n                    amount,\n                    balanceId,\n                },\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async startStakeWithdrawal(req) {\n        let { pendingWithdrawal, member, beneficiary, amount, spt, registrar, isMega, balanceId, } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (pendingWithdrawal === undefined) {\n            pendingWithdrawal = new Account();\n        }\n        if (registrar === undefined) {\n            registrar = await this.accounts.registrar();\n        }\n        const entity = member.account.entity;\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const bId = balanceId.equals(this.provider.wallet.publicKey) ? 0 : 1;\n        const [vaultPw, poolVault, poolMint] = (() => {\n            if (isMega) {\n                return [\n                    member.account.balances[bId].vaultPendingWithdrawalMega,\n                    member.account.balances[bId].vaultStakeMega,\n                    registrar.poolMintMega,\n                ];\n            }\n            else {\n                return [\n                    member.account.balances[bId].vaultPendingWithdrawal,\n                    member.account.balances[bId].vaultStake,\n                    registrar.poolMint,\n                ];\n            }\n        })();\n        const tx = new Transaction();\n        tx.add(SystemProgram.createAccount({\n            fromPubkey: this.provider.wallet.publicKey,\n            newAccountPubkey: pendingWithdrawal.publicKey,\n            lamports: await this.provider.connection.getMinimumBalanceForRentExemption(accounts.pendingWithdrawal.SIZE),\n            space: accounts.pendingWithdrawal.SIZE,\n            programId: this.programId,\n        }));\n        tx.add(new TransactionInstruction({\n            keys: [\n                {\n                    pubkey: pendingWithdrawal.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: entity, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: vaultPw, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                { pubkey: poolVault, isWritable: true, isSigner: false },\n                { pubkey: poolMint, isWritable: true, isSigner: false },\n                { pubkey: spt, isWritable: true, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n                {\n                    pubkey: registrar.rewardEventQueue,\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ].concat(member.account.balances\n                .map(b => {\n                return [\n                    { pubkey: b.owner, isWritable: false, isSigner: false },\n                    { pubkey: b.spt, isWritable: false, isSigner: false },\n                    {\n                        pubkey: b.sptMega,\n                        isWritable: false,\n                        isSigner: false,\n                    },\n                ];\n            })\n                // @ts-ignore\n                .flat()),\n            programId: this.programId,\n            data: instruction.encode({\n                startStakeWithdrawal: {\n                    amount,\n                    balanceId,\n                },\n            }),\n        }));\n        let signers = [beneficiary, pendingWithdrawal];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n            pendingWithdrawal: pendingWithdrawal.publicKey,\n        };\n    }\n    async endStakeWithdrawal(req) {\n        let { member, beneficiary, pendingWithdrawal, registrar } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (pendingWithdrawal instanceof PublicKey) {\n            const account = await this.accounts.pendingWithdrawal(pendingWithdrawal);\n            pendingWithdrawal = {\n                publicKey: pendingWithdrawal,\n                account,\n            };\n        }\n        if (registrar === undefined) {\n            registrar = await this.accounts.registrar();\n        }\n        let bId = pendingWithdrawal.account.balanceId.equals(this.provider.wallet.publicKey)\n            ? 0\n            : 1;\n        const [vault, vaultPw] = (() => {\n            const isMega = pendingWithdrawal.account.pool.equals(registrar.poolMintMega);\n            if (isMega) {\n                return [\n                    member.account.balances[bId].vaultMega,\n                    member.account.balances[bId].vaultPendingWithdrawalMega,\n                ];\n            }\n            else {\n                return [\n                    member.account.balances[bId].vault,\n                    member.account.balances[bId].vaultPendingWithdrawal,\n                ];\n            }\n        })();\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                {\n                    pubkey: pendingWithdrawal.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: vault, isWritable: true, isSigner: false },\n                { pubkey: vaultPw, isWritable: true, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: member.account.entity, isWritable: true, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                endStakeWithdrawal: {},\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async switchEntity(req) {\n        let { member, newEntity, beneficiary, registrar } = req;\n        const beneficiaryPubkey = beneficiary === undefined\n            ? this.provider.wallet.publicKey\n            : beneficiary.publicKey;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (registrar === undefined) {\n            registrar = await this.accounts.registrar();\n        }\n        const vaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: beneficiaryPubkey, isWritable: false, isSigner: true },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: member.account.entity, isWritable: true, isSigner: false },\n                { pubkey: newEntity, isWritable: true, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n                { pubkey: vaultAuthority, isWritable: false, isSigner: false },\n                {\n                    pubkey: registrar.rewardEventQueue,\n                    isWritable: false,\n                    isSigner: false,\n                },\n            ].concat(member.account.balances\n                .map(b => {\n                return [\n                    { pubkey: b.owner, isWritable: false, isSigner: false },\n                    { pubkey: b.spt, isWritable: false, isSigner: false },\n                    {\n                        pubkey: b.sptMega,\n                        isWritable: false,\n                        isSigner: false,\n                    },\n                ];\n            })\n                // @ts-ignore\n                .flat()),\n            programId: this.programId,\n            data: instruction.encode({\n                switchEntity: {},\n            }),\n        }));\n        let signers = [beneficiary];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async dropLockedReward(req) {\n        let { total, endTs, expiryTs, depositor, depositorMint, poolTokenMint, periodCount, } = req;\n        const vendor = new Account();\n        const vendorVault = new Account();\n        const [vendorVaultAuthority, nonce] = await PublicKey.findProgramAddress([this.registrar.toBuffer(), vendor.publicKey.toBuffer()], this.programId);\n        const createLockedVendorVaultInstrs = await createTokenAccountInstrs(this.provider, vendorVault.publicKey, depositorMint, vendorVaultAuthority);\n        const tx = new Transaction();\n        tx.add(\n        // Create LockedRewardVendor token vault.\n        ...createLockedVendorVaultInstrs, \n        // Create LockedRewardVendor account.\n        SystemProgram.createAccount({\n            fromPubkey: this.provider.wallet.publicKey,\n            newAccountPubkey: vendor.publicKey,\n            lamports: await this.provider.connection.getMinimumBalanceForRentExemption(accounts.lockedRewardVendor.SIZE),\n            space: accounts.lockedRewardVendor.SIZE,\n            programId: this.programId,\n        }), new TransactionInstruction({\n            keys: [\n                { pubkey: this.rewardEventQueue, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: depositor, isWritable: true, isSigner: false },\n                {\n                    pubkey: this.provider.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                { pubkey: poolTokenMint, isWritable: false, isSigner: false },\n                { pubkey: vendor.publicKey, isWritable: true, isSigner: false },\n                {\n                    pubkey: vendorVault.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                dropLockedReward: {\n                    total,\n                    endTs,\n                    expiryTs,\n                    expiryReceiver: this.provider.wallet.publicKey,\n                    periodCount,\n                    nonce,\n                },\n            }),\n        }));\n        let signers = [vendor, vendorVault];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async dropUnlockedReward(req) {\n        let { total, expiryTs, depositor, depositorMint, poolTokenMint } = req;\n        const vendor = new Account();\n        const vendorVault = new Account();\n        const [vendorVaultAuthority, nonce] = await PublicKey.findProgramAddress([this.registrar.toBuffer(), vendor.publicKey.toBuffer()], this.programId);\n        const createUnlockedVendorVaultInstrs = await createTokenAccountInstrs(this.provider, vendorVault.publicKey, depositorMint, vendorVaultAuthority);\n        const tx = new Transaction();\n        tx.add(\n        // Create UnlockedRewardVendor token vault.\n        ...createUnlockedVendorVaultInstrs, \n        // Create UnlockedRewardVendor account.\n        SystemProgram.createAccount({\n            fromPubkey: this.provider.wallet.publicKey,\n            newAccountPubkey: vendor.publicKey,\n            lamports: await this.provider.connection.getMinimumBalanceForRentExemption(accounts.unlockedRewardVendor.SIZE),\n            space: accounts.unlockedRewardVendor.SIZE,\n            programId: this.programId,\n        }), new TransactionInstruction({\n            keys: [\n                { pubkey: this.rewardEventQueue, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: depositor, isWritable: true, isSigner: false },\n                {\n                    pubkey: this.provider.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: false,\n                },\n                { pubkey: poolTokenMint, isWritable: false, isSigner: false },\n                { pubkey: vendor.publicKey, isWritable: true, isSigner: false },\n                {\n                    pubkey: vendorVault.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ],\n            programId: this.programId,\n            data: instruction.encode({\n                dropUnlockedReward: {\n                    total,\n                    expiryTs,\n                    expiryReceiver: this.provider.wallet.publicKey,\n                    nonce,\n                },\n            }),\n        }));\n        let signers = [vendor, vendorVault];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async claimLockedReward(req) {\n        let { cursor, member, vendor, vendorSigner, safe, lockupProgramId, mint, poolMint, } = req;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (vendor instanceof PublicKey) {\n            vendor = await this.accounts.lockedRewardVendor(vendor);\n        }\n        if (!poolMint) {\n            const r = await this.accounts.registrar();\n            poolMint = r.poolMint;\n        }\n        const vesting = new Account();\n        const vestingVault = new Account();\n        const { nonce, ixs } = await lockupTxIx.allocVestingIxs(this.provider, lockupProgramId, safe, vesting.publicKey, vestingVault.publicKey, mint, this.provider.wallet.publicKey);\n        const tx = new Transaction();\n        tx.add(...ixs, new TransactionInstruction({\n            keys: [\n                {\n                    pubkey: this.provider.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n                { pubkey: member.account.entity, isWritable: false, isSigner: false },\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: vendor.publicKey, isWritable: false, isSigner: false },\n                { pubkey: vendor.account.vault, isWritable: true, isSigner: false },\n                { pubkey: vendorSigner, isWritable: false, isSigner: false },\n                { pubkey: safe, isWritable: false, isSigner: false },\n                { pubkey: lockupProgramId, isWritable: false, isSigner: false },\n                { pubkey: vesting.publicKey, isWritable: true, isSigner: false },\n                { pubkey: vestingVault.publicKey, isWritable: true, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_RENT_PUBKEY, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ].concat(member.account.balances.map(b => {\n                return vendor.account.pool.equals(poolMint)\n                    ? {\n                        pubkey: b.spt,\n                        isWritable: false,\n                        isSigner: false,\n                    }\n                    : {\n                        pubkey: b.sptMega,\n                        isWritable: false,\n                        isSigner: false,\n                    };\n            })),\n            programId: this.programId,\n            data: instruction.encode({\n                claimLockedReward: {\n                    cursor,\n                    nonce,\n                },\n            }),\n        }));\n        let signers = [vesting, vestingVault];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async claimUnlockedReward(req) {\n        let { cursor, member, vendor, vendorSigner, token, poolMint } = req;\n        if (member instanceof PublicKey) {\n            const account = await this.accounts.member(member);\n            member = {\n                publicKey: member,\n                account,\n            };\n        }\n        if (vendor instanceof PublicKey) {\n            vendor = await this.accounts.lockedRewardVendor(vendor);\n        }\n        if (!poolMint) {\n            const r = await this.accounts.registrar();\n            poolMint = r.poolMint;\n        }\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [\n                {\n                    pubkey: this.provider.wallet.publicKey,\n                    isWritable: false,\n                    isSigner: true,\n                },\n                { pubkey: member.account.entity, isWritable: false, isSigner: false },\n                { pubkey: member.publicKey, isWritable: true, isSigner: false },\n                { pubkey: this.registrar, isWritable: false, isSigner: false },\n                { pubkey: vendor.publicKey, isWritable: false, isSigner: false },\n                { pubkey: vendor.account.vault, isWritable: true, isSigner: false },\n                { pubkey: vendorSigner, isWritable: false, isSigner: false },\n                { pubkey: token, isWritable: true, isSigner: false },\n                { pubkey: TOKEN_PROGRAM_ID, isWritable: false, isSigner: false },\n                { pubkey: SYSVAR_CLOCK_PUBKEY, isWritable: false, isSigner: false },\n            ].concat(member.account.balances.map(b => {\n                return vendor.account.pool.equals(poolMint)\n                    ? {\n                        pubkey: b.spt,\n                        isWritable: false,\n                        isSigner: false,\n                    }\n                    : {\n                        pubkey: b.sptMega,\n                        isWritable: false,\n                        isSigner: false,\n                    };\n            })),\n            programId: this.programId,\n            data: instruction.encode({\n                claimUnlockedReward: {\n                    cursor,\n                },\n            }),\n        }));\n        let signers = [];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n    async depositLocked(req) {\n        const { amount, vesting, safe, lockupClient, registrar, entity, member, vault, } = req;\n        const registryVaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const instructionData = instruction.encode({\n            deposit: {\n                amount,\n            },\n        });\n        const relayAccounts = [\n            { pubkey: member, isWritable: true, isSigner: false },\n            {\n                pubkey: this.provider.wallet.publicKey,\n                isWritable: false,\n                isSigner: true,\n            },\n            { pubkey: entity, isWritable: true, isSigner: false },\n            { pubkey: this.registrar, isWritable: false, isSigner: false },\n        ];\n        const relaySigners = [];\n        const { tx } = await lockupClient.whitelistWithdraw({\n            amount,\n            instructionData,\n            vesting,\n            whitelistProgram: this.programId,\n            whitelistProgramVault: vault,\n            whitelistProgramVaultAuthority: registryVaultAuthority,\n            relayAccounts,\n            relaySigners,\n            safe,\n        });\n        return { tx };\n    }\n    async withdrawLocked(req) {\n        const { amount, vesting, safe, lockupClient, registrar, member, entity, vault, } = req;\n        const registryVaultAuthority = await this.accounts.vaultAuthority(this.programId, this.registrar, registrar);\n        const instructionData = instruction.encode({\n            withdraw: {\n                amount,\n            },\n        });\n        const relayAccounts = [\n            { pubkey: member, isWritable: true, isSigner: false },\n            {\n                pubkey: this.provider.wallet.publicKey,\n                isWritable: false,\n                isSigner: true,\n            },\n            { pubkey: entity, isWritable: true, isSigner: false },\n            { pubkey: this.registrar, isWritable: false, isSigner: false },\n        ];\n        const relaySigners = [];\n        const { tx } = await lockupClient.whitelistDeposit({\n            instructionData,\n            vesting,\n            whitelistProgram: this.programId,\n            whitelistProgramVault: vault,\n            whitelistProgramVaultAuthority: registryVaultAuthority,\n            relayAccounts,\n            relaySigners,\n            safe,\n        });\n        return { tx };\n    }\n    async sendMessage(req) {\n        const { from, ts, content, mqueue } = req;\n        const tx = new Transaction();\n        tx.add(new TransactionInstruction({\n            keys: [{ pubkey: mqueue, isWritable: true, isSigner: false }],\n            programId: this.metaEntityProgramId,\n            data: metaEntity.instruction.encode({\n                sendMessage: {\n                    msg: {\n                        from,\n                        ts,\n                        content,\n                    },\n                },\n            }),\n        }));\n        let signers = [];\n        let txSig = await this.provider.send(tx, signers);\n        return {\n            tx: txSig,\n        };\n    }\n}\n//# sourceMappingURL=index.js.map","import React, {\n  PropsWithChildren,\n  ReactElement,\n  ReactNode,\n  useMemo,\n  useContext,\n} from 'react';\nimport { useSelector } from 'react-redux';\nimport { Connection, ConfirmOptions } from '@solana/web3.js';\n// @ts-ignore\nimport Wallet from '@project-serum/sol-wallet-adapter';\nimport { Provider } from '@project-serum/common';\nimport { Client as LockupClient } from '@project-serum/lockup';\nimport { Client as RegistryClient } from '@project-serum/registry';\nimport { State as StoreState } from '../../store/reducer';\n\nexport function useWallet(): WalletContextValues {\n  const w = useContext(WalletContext);\n  if (!w) {\n    throw new Error('Missing wallet context');\n  }\n  return w;\n}\n\nconst WalletContext = React.createContext<null | WalletContextValues>(null);\n\ntype WalletContextValues = {\n  wallet: Wallet;\n  lockupClient: LockupClient;\n  registryClient: RegistryClient;\n};\n\nexport default function WalletProvider(\n  props: PropsWithChildren<ReactNode>,\n): ReactElement {\n  const { walletProvider, network } = useSelector((state: StoreState) => {\n    return {\n      walletProvider: state.common.walletProvider,\n      network: state.common.network,\n    };\n  });\n\n  const { wallet, lockupClient, registryClient } = useMemo(() => {\n    const opts: ConfirmOptions = {\n      preflightCommitment: 'recent',\n      commitment: 'recent',\n    };\n    const connection = new Connection(network.url, opts.preflightCommitment);\n    const wallet = new Wallet(walletProvider, network.url);\n    const provider = new Provider(connection, wallet, opts);\n\n    return {\n      wallet,\n      lockupClient: new LockupClient({\n        provider,\n        programId: network.lockupProgramId,\n        safe: network.safe,\n      }),\n      registryClient: new RegistryClient({\n        provider,\n        programId: network.registryProgramId,\n        metaEntityProgramId: network.metaEntityProgramId,\n        registrar: network.registrar,\n        rewardEventQueue: network.rewardEventQueue,\n      }),\n    };\n  }, [walletProvider, network]);\n\n  return (\n    <WalletContext.Provider value={{ wallet, lockupClient, registryClient }}>\n      {props.children}\n    </WalletContext.Provider>\n  );\n}\n","import React, {\n  PropsWithChildren,\n  ReactNode,\n  useEffect,\n  useCallback,\n} from 'react';\nimport { MintInfo } from '@solana/spl-token';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { PublicKey } from '@solana/web3.js';\nimport { token, ProgramAccount, parseMintAccount } from '@project-serum/common';\nimport * as registry from '@project-serum/registry';\nimport { State as StoreState } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport { useWallet } from './WalletProvider';\n\n// BootstrapProvider performs data fetching on application startup.\nexport default function BootstrapProvider(props: PropsWithChildren<ReactNode>) {\n  const { bootstrapTrigger, shutdownTrigger, network } = useSelector(\n    (state: StoreState) => {\n      return {\n        bootstrapTrigger: state.common.bootstrapTrigger,\n        shutdownTrigger: state.common.shutdownTrigger,\n        network: state.common.network,\n      };\n    },\n  );\n  const dispatch = useDispatch();\n  const { wallet, lockupClient, registryClient } = useWallet();\n  const { enqueueSnackbar } = useSnackbar();\n\n  // Entry point for bootstrapping all the data for the app.\n  const bootstrap = useCallback(async () => {\n    // Websocket subscriptions.\n    const startSubscriptions = async (\n      registrar: registry.accounts.Registrar,\n    ) => {\n      // Reward event queue sub.\n      const rewardQueueSubscribe = async () => {\n        const conn = registryClient.accounts.rewardEventQueueConnect(\n          registryClient.rewardEventQueue,\n        );\n        conn.on(\n          'connected',\n          (\n            rewardEventQueue: ProgramAccount<\n              registry.accounts.RewardEventQueue\n            >,\n          ) => {\n            dispatch({\n              type: ActionType.RegistrySetRewardEventQueue,\n              item: {\n                rewardEventQueue,\n              },\n            });\n          },\n        );\n        conn.on(\n          'change',\n          (\n            rewardEventQueue: ProgramAccount<\n              registry.accounts.RewardEventQueue\n            >,\n          ) => {\n            dispatch({\n              type: ActionType.RegistrySetRewardEventQueue,\n              item: {\n                rewardEventQueue,\n              },\n            });\n          },\n        );\n      };\n      // Member sub.\n      const memberSubscribe = async () => {\n        const members = await registryClient.accounts.membersWithBeneficiary(\n          wallet.publicKey,\n        );\n        // TODO: Probably want a UI to handle multiple member accounts and\n        //       choosing between them.\n        //\n        //      Alternatively, use a deterministic address.\n        if (members.length === 0) {\n          dispatch({\n            type: ActionType.RegistrySetMember,\n            item: {\n              member: undefined,\n            },\n          });\n          return;\n        }\n\n        await subscribeMember(members[0].publicKey, registryClient, dispatch);\n      };\n\n      // Staking pool token sub.\n      const poolTokenSubscribe = async () => {\n        const poolMint = await registryClient.accounts.poolTokenMint(registrar);\n        const poolMintMega = await registryClient.accounts.megaPoolTokenMint(\n          registrar,\n        );\n        dispatch({\n          type: ActionType.RegistrySetPoolMint,\n          item: {\n            poolMint: {\n              publicKey: registrar.poolMint,\n              account: poolMint,\n            },\n          },\n        });\n        dispatch({\n          type: ActionType.RegistrySetPoolMintMega,\n          item: {\n            poolMintMega: {\n              publicKey: registrar.poolMintMega,\n              account: poolMintMega,\n            },\n          },\n        });\n\n        registryClient.accounts\n          .accountConnect(registrar.poolMint, parseMintAccount)\n          .on('change', (poolMint: MintInfo) => {\n            dispatch({\n              type: ActionType.RegistrySetPoolMint,\n              item: {\n                poolMint: {\n                  publicKey: registrar.poolMint,\n                  account: poolMint,\n                },\n              },\n            });\n          });\n        registryClient.accounts\n          .accountConnect(registrar.poolMintMega, parseMintAccount)\n          .on('change', (poolMintMega: MintInfo) => {\n            dispatch({\n              type: ActionType.RegistrySetPoolMintMega,\n              item: {\n                poolMintMega: {\n                  publicKey: registrar.poolMintMega,\n                  account: poolMintMega,\n                },\n              },\n            });\n          });\n      };\n\n      await rewardQueueSubscribe();\n      await memberSubscribe();\n      await poolTokenSubscribe();\n    }; // End websocket subscriptions.\n\n    const fetchRegistrar = async () => {\n      const registrar = await registryClient.accounts.registrar();\n      dispatch({\n        type: ActionType.RegistrySetRegistrar,\n        item: {\n          registrar: {\n            publicKey: registryClient.registrar,\n            account: registrar,\n          },\n        },\n      });\n      return registrar;\n    };\n\n    const fetchSafe = async () => {\n      const lockup = await lockupClient.accounts.safe();\n      dispatch({\n        type: ActionType.LockupSetSafe,\n        item: {\n          safe: {\n            publicKey: lockupClient.safe,\n            account: lockup,\n          },\n        },\n      });\n    };\n\n    const fetchEntityAccounts = async () => {\n      const entityAccounts = await registryClient.accounts.allEntities();\n      dispatch({\n        type: ActionType.RegistrySetEntities,\n        item: {\n          entities: entityAccounts,\n        },\n      });\n      // TODO: fetching all the metadata like this is dumb as shit. Need to either\n      //       create an offchain index for the join, lazily fetch it on\n      //       demand, or denormalize and throw all the metadata into the Entity\n      //       struct.\n      const entityMetadata = await registryClient.accounts.allMetadata();\n      const defaultEntity = entityAccounts\n        .filter(e => e.publicKey.equals(network.defaultEntity))\n        .pop();\n      const defaultMetadata = {\n        publicKey: defaultEntity!.account.metadata,\n        account: await registryClient.accounts.metadata(\n          defaultEntity!.account.metadata,\n        ),\n      };\n      entityMetadata.push(defaultMetadata);\n      dispatch({\n        type: ActionType.RegistrySetMetadata,\n        item: {\n          entityMetadata,\n        },\n      });\n    };\n\n    const fetchOwnedTokenAccounts = async () => {\n      const ownedTokenAccounts = await token.getOwnedTokenAccounts(\n        lockupClient.provider.connection,\n        wallet.publicKey,\n      );\n      dispatch({\n        type: ActionType.CommonOwnedTokenAccountsSet,\n        item: {\n          ownedTokenAccounts,\n        },\n      });\n    };\n\n    const fetchVestingAccounts = async () => {\n      const vestingAccounts = await lockupClient.accounts.allVestings(\n        wallet.publicKey,\n      );\n      dispatch({\n        type: ActionType.LockupSetVestings,\n        item: {\n          vestingAccounts,\n        },\n      });\n    };\n\n    enqueueSnackbar(`Connecting to ${network.label}`, {\n      variant: 'info',\n      autoHideDuration: 2500,\n    });\n\n    dispatch({\n      type: ActionType.CommonAppWillBootstrap,\n      item: {},\n    });\n\n    const registrar = await fetchRegistrar();\n    await startSubscriptions(registrar);\n    await fetchSafe();\n    await fetchEntityAccounts();\n    await fetchOwnedTokenAccounts();\n    await fetchVestingAccounts();\n\n    dispatch({\n      type: ActionType.CommonAppDidBootstrap,\n      item: {},\n    });\n\n    enqueueSnackbar(`Connection established`, {\n      variant: 'success',\n      autoHideDuration: 2500,\n    });\n  }, [\n    lockupClient.safe,\n    lockupClient.accounts,\n    dispatch,\n    enqueueSnackbar,\n    network.label,\n    registryClient,\n    wallet.publicKey,\n    network.defaultEntity,\n    lockupClient.provider.connection,\n  ]);\n\n  const shutdown = useCallback(async () => {\n    wallet.disconnect();\n    try {\n      registryClient.accounts.rewardEventQueueDisconnect();\n    } catch (err) {\n      console.error('Error disconnecting listeners', err);\n    }\n    dispatch({\n      type: ActionType.CommonDidShutdown,\n      item: {},\n    });\n  }, [registryClient.accounts, dispatch, wallet]);\n\n  useEffect(() => {\n    if (bootstrapTrigger) {\n      bootstrap().catch(err => {\n        enqueueSnackbar(`Error bootstrapping application: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n    if (shutdownTrigger) {\n      shutdown().catch(err => {\n        enqueueSnackbar(`Error shutting down application: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n  }, [bootstrapTrigger, bootstrap, shutdownTrigger, shutdown, enqueueSnackbar]);\n\n  return <>{props.children}</>;\n}\n\nexport async function subscribeMember(\n  m: PublicKey,\n  registryClient: registry.Client,\n  dispatch: any,\n) {\n  const [member, conn] = await registryClient.accounts.memberConnect(m);\n  conn.on('change', (member: ProgramAccount<registry.accounts.MemberDeref>) => {\n    dispatch({\n      type: ActionType.RegistrySetMember,\n      item: {\n        member,\n      },\n    });\n  });\n  dispatch({\n    type: ActionType.RegistrySetMember,\n    item: {\n      member,\n    },\n  });\n  const pendingWithdrawals = await registryClient.accounts.pendingWithdrawalsForMember(\n    m,\n  );\n  dispatch({\n    type: ActionType.RegistrySetPendingWithdrawals,\n    item: {\n      memberPublicKey: member.publicKey,\n      pendingWithdrawals,\n    },\n  });\n}\n","import React, { useState, useEffect, ReactElement } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Select from '@material-ui/core/Select';\nimport Menu from '@material-ui/core/Menu';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport Button from '@material-ui/core/Button';\nimport PersonIcon from '@material-ui/icons/Person';\nimport BubbleChartIcon from '@material-ui/icons/BubbleChart';\nimport * as registry from '@project-serum/registry';\nimport { networks } from '@project-serum/common';\nimport { State as StoreState, ProgramAccount } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport { useWallet } from './WalletProvider';\nimport * as bootstrap from './BootstrapProvider';\n\ntype HeaderProps = {\n  isAppReady: boolean;\n  member?: ProgramAccount<registry.accounts.Member>;\n};\n\nexport default function Header(props: HeaderProps) {\n  const { isAppReady } = props;\n  const { network } = useSelector((state: StoreState) => {\n    return {\n      network: state.common.network,\n    };\n  });\n  return (\n    <AppBar\n      position=\"static\"\n      style={{\n        background: '#ffffff',\n        color: '#272727',\n        boxShadow: 'none',\n        borderBottom: 'solid 1pt #ccc',\n      }}\n    >\n      <Toolbar>\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            width: '100%',\n          }}\n        >\n          <div style={{ display: 'flex' }}>\n            <SerumLogoButton />\n            <BarButton label=\"Stake\" hrefClient=\"/\" />\n            <BarButton label=\"Trade\" href=\"https://dex.projectserum.com\" />\n            <BarButton label=\"Swap\" href=\"https://swap.projectserum.com\" />\n            <BarButton\n              label=\"Learn\"\n              href=\"https://serum-academy.com/en/serum-dex/\"\n            />\n            {network.srmFaucet && (\n              <BarButton\n                label=\"Faucet\"\n                href=\"https://www.spl-token-ui.com/#/token-faucets\"\n              />\n            )}\n          </div>\n          <div\n            style={{\n              display: 'flex',\n            }}\n          >\n            <NetworkSelector />\n            <WalletConnectButton\n              style={{\n                display: isAppReady ? 'none' : '',\n              }}\n            />\n            {isAppReady && <UserSelector />}\n          </div>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nfunction SerumLogoButton() {\n  const history = useHistory();\n  return (\n    <div style={{ display: 'flex' }} onClick={() => history.push('/')}>\n      <Button color=\"inherit\">\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n          }}\n        >\n          <img\n            style={{\n              display: 'block',\n              height: '35px',\n            }}\n            alt=\"Logo\"\n            src=\"http://dex.projectserum.com/static/media/logo.49174c73.svg\"\n          />\n        </div>\n      </Button>\n    </div>\n  );\n}\n\ntype BarButtonProps = {\n  label: string;\n  hrefClient?: string;\n  href?: string;\n};\n\nfunction BarButton(props: BarButtonProps) {\n  const history = useHistory();\n  const { label, href, hrefClient } = props;\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n      }}\n      onClick={() => hrefClient && history.push(hrefClient)}\n    >\n      <Link\n        style={{ color: 'inherit', textDecoration: 'none' }}\n        href={href}\n        target=\"_blank\"\n      >\n        <Button color=\"inherit\">\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              flexDirection: 'column',\n            }}\n          >\n            <Typography style={{ fontSize: '15px' }}>{label}</Typography>\n          </div>\n        </Button>\n      </Link>\n    </div>\n  );\n}\n\nfunction NetworkSelector() {\n  const network = useSelector((state: StoreState) => {\n    return state.common.network;\n  });\n  const dispatch = useDispatch();\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div\n      style={{\n        marginRight: '10px',\n        fontSize: '15px',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n      }}\n    >\n      <Button\n        color=\"inherit\"\n        onClick={e =>\n          setAnchorEl(\n            // @ts-ignore\n            e.currentTarget,\n          )\n        }\n      >\n        <BubbleChartIcon />\n        <Typography style={{ marginLeft: '5px', fontSize: '15px' }}>\n          {network.label}\n        </Typography>\n      </Button>\n      <Menu\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n        style={{\n          marginLeft: '12px',\n          color: 'white',\n        }}\n      >\n        {Object.keys(networks).map((n: string) => (\n          <MenuItem\n            key={n}\n            onClick={() => {\n              handleClose();\n              dispatch({\n                type: ActionType.CommonSetNetwork,\n                item: {\n                  network: networks[n],\n                },\n              });\n            }}\n          >\n            <Typography>{networks[n].label}</Typography>\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n}\n\nfunction UserSelector() {\n  const dispatch = useDispatch();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const { wallet, lockupClient, registryClient } = useWallet();\n  const { network, member } = useSelector((state: StoreState) => {\n    return {\n      member: state.registry.member,\n      network: state.common.network,\n    };\n  });\n\n  const createStakeAccount = async () => {\n    enqueueSnackbar('Creating stake account', {\n      variant: 'info',\n    });\n\n    // TODO: separate member creation from entity joining (i.e., make it so that\n    //       entity doesn't need to be specified here).\n    const entity = network.defaultEntity;\n    const { member } = await registryClient.createMember({\n      entity,\n      delegate: await lockupClient.accounts.vaultAuthority(\n        lockupClient.programId,\n        lockupClient.safe,\n        wallet.publicKey,\n      ),\n    });\n    closeSnackbar();\n    enqueueSnackbar(`Stake account created ${member.toString()}`, {\n      variant: 'success',\n    });\n    bootstrap.subscribeMember(member, registryClient, dispatch);\n  };\n  return (\n    <Select\n      displayEmpty\n      renderValue={() => {\n        return (\n          <Typography style={{ overflow: 'hidden' }}>\n            {wallet.publicKey.toString()}\n          </Typography>\n        );\n      }}\n      style={{\n        marginLeft: '12px',\n        width: '150px',\n      }}\n      onChange={e => {\n        if (e.target.value === 'disconnect') {\n          wallet.disconnect();\n        }\n      }}\n    >\n      {member.isReady && member.data === undefined && (\n        <MenuItem value=\"create-member\">\n          <div\n            onClick={() =>\n              createStakeAccount().catch(err => {\n                enqueueSnackbar(\n                  `Error creating stake account: ${err.toString()}`,\n                  {\n                    variant: 'error',\n                  },\n                );\n              })\n            }\n          >\n            <IconButton color=\"inherit\">\n              <PersonAddIcon />\n              <Typography style={{ marginLeft: '15px' }}>\n                Create stake account\n              </Typography>\n            </IconButton>\n          </div>\n        </MenuItem>\n      )}\n      <MenuItem value=\"disconnect\">\n        <IconButton color=\"inherit\">\n          <ExitToAppIcon />\n          <Typography style={{ marginLeft: '15px' }}>Disconnect</Typography>\n        </IconButton>\n      </MenuItem>\n    </Select>\n  );\n}\n\ntype WalletConnectButtonProps = {\n  style?: any;\n};\n\nexport function WalletConnectButton(\n  props: WalletConnectButtonProps,\n): ReactElement {\n  const { showDisconnect } = useSelector((state: StoreState) => {\n    return {\n      showDisconnect: state.common.isWalletConnected,\n    };\n  });\n  const dispatch = useDispatch();\n  const { wallet, lockupClient } = useWallet();\n  const { enqueueSnackbar } = useSnackbar();\n\n  // Wallet connection event listeners.\n  useEffect(() => {\n    wallet.on('disconnect', () => {\n      enqueueSnackbar('Disconnected from wallet', {\n        variant: 'info',\n        autoHideDuration: 2500,\n      });\n      dispatch({\n        type: ActionType.CommonWalletDidDisconnect,\n        item: {},\n      });\n      dispatch({\n        type: ActionType.CommonTriggerShutdown,\n        item: {},\n      });\n    });\n    wallet.on('connect', async () => {\n      dispatch({\n        type: ActionType.CommonWalletDidConnect,\n        item: {},\n      });\n      dispatch({\n        type: ActionType.CommonTriggerBootstrap,\n        item: {},\n      });\n    });\n  }, [wallet, dispatch, enqueueSnackbar, lockupClient.provider.connection]);\n\n  return showDisconnect ? (\n    <Button\n      style={props.style}\n      color=\"inherit\"\n      onClick={() => wallet.disconnect()}\n    >\n      <ExitToAppIcon />\n      <Typography style={{ marginLeft: '5px', fontSize: '15px' }}>\n        Disconnect\n      </Typography>\n    </Button>\n  ) : (\n    <Button\n      style={props.style}\n      color=\"inherit\"\n      onClick={() => wallet.connect()}\n    >\n      <PersonIcon />\n      <Typography style={{ marginLeft: '5px', fontSize: '15px' }}>\n        Connect wallet\n      </Typography>\n    </Button>\n  );\n}\n","import React from 'react';\n\nexport default function Scroll(props: any) {\n  return (\n    <div\n      style={{\n        position: 'relative',\n        overflowY: 'scroll',\n        flex: 1,\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          right: '0',\n          maxHeight: '100%',\n          minHeight: '100%',\n          display: 'flex',\n          flexDirection: 'column',\n        }}\n      >\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import React, { useRef, useEffect, useState } from 'react';\nimport BN from 'bn.js';\nimport { useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport * as registry from '@project-serum/registry';\nimport { State as StoreState } from '../../store/reducer';\nimport { useWallet } from './WalletProvider';\nimport Scroll from './Scroll';\n\nexport default function Messages() {\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const { registryClient } = useWallet();\n  const [messages, setMessages] = useState<null | Array<\n    registry.metaEntity.accounts.mqueue.Message\n  >>(null);\n  const [message, setMessage] = useState('');\n  let { metadata, member } = useSelector((state: StoreState) => {\n    const member = state.registry.member!;\n    const entity = state.registry.entities.filter(\n      e =>\n        e.publicKey.toString() ===\n        member.data!.account.member.entity.toString(),\n    )[0];\n    return {\n      metadata: state.registry.entityMetadata.get(entity.publicKey.toString()),\n      member,\n    };\n  });\n  const divRef = useRef(null);\n  useEffect(() => {\n    async function fetchMessages() {\n      if (metadata) {\n        const mqueue = registryClient.accounts.mqueueConnect(\n          metadata!.account.chat,\n        );\n        mqueue.on('connected', messages => {\n          setMessages(messages);\n        });\n        mqueue.on('message', message => {\n          // todo\n        });\n        mqueue.on('mqueue', mqueue => {\n          setMessages(mqueue.messages());\n          if (divRef) {\n            // @ts-ignore\n            divRef.current.scrollIntoView({ behavior: 'smooth' });\n          }\n        });\n      }\n    }\n    fetchMessages();\n  }, [registryClient.accounts, metadata]);\n\n  const sendMessage = async () => {\n    enqueueSnackbar('Sending message...', {\n      variant: 'info',\n    });\n    await registryClient.sendMessage({\n      from: member.data!.publicKey,\n      ts: new BN(Date.now()),\n      content: message,\n      mqueue: metadata!.account.chat,\n    });\n    closeSnackbar();\n  };\n  const handleKeyPress = async (e: any) => {\n    if (e.key === 'Enter') {\n      try {\n        await sendMessage();\n        setMessage('');\n      } catch (err) {\n        enqueueSnackbar(`Error sending message: ${err.toString()}`, {\n          variant: 'error',\n        });\n      }\n    }\n  };\n  return (\n    <div style={{ background: 'white', height: '100%' }}>\n      {messages == null ? (\n        <CircularProgress />\n      ) : (\n        <div\n          style={{ display: 'flex', flexDirection: 'column', height: '100%' }}\n        >\n          <div\n            style={{\n              textAlign: 'left',\n              borderBottom: 'solid 1pt #ccc',\n              padding: '10px',\n            }}\n          >\n            <Typography style={{ fontWeight: 'bold', fontSize: '14px' }}>\n              {metadata!.account.name} Chat\n            </Typography>\n          </div>\n          <Scroll>\n            <div style={{ flex: 1 }}>\n              <ul style={{ paddingLeft: '10px' }}>\n                {messages.map(m => {\n                  return (\n                    <li\n                      style={{\n                        display: 'flex',\n                      }}\n                    >\n                      <Typography\n                        style={{\n                          fontSize: '14px',\n                          width: '75px',\n                          overflow: 'hidden',\n                        }}\n                        color=\"textSecondary\"\n                      >\n                        {m.from.toString()}\n                      </Typography>\n                      <Typography\n                        style={{\n                          textAlign: 'left',\n                          marginLeft: '10px',\n                          fontSize: '14px',\n                        }}\n                      >\n                        {m.content}\n                      </Typography>\n                    </li>\n                  );\n                })}\n                <div ref={divRef} />\n              </ul>\n            </div>\n          </Scroll>\n          <div style={{ marginTop: '10px', display: 'flex' }}>\n            <TextField\n              onKeyPress={handleKeyPress}\n              size=\"small\"\n              variant=\"outlined\"\n              value={message}\n              onChange={e => setMessage(e.target.value as string)}\n              style={{\n                width: '100%',\n                marginBottom: '10px',\n                marginLeft: '10px',\n                marginRight: '10px',\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Brightness1Icon from '@material-ui/icons/Brightness1';\nimport Link from '@material-ui/core/Link';\nimport { State as StoreState, BootstrapState } from '../../store/reducer';\nimport Messaging from './Messaging';\n\nexport default function Footer() {\n  const [chatDisplay, setChatDisplay] = useState(false);\n  const [envDisplay, setEnvDisplay] = useState(false);\n  const { isAppReady, isDisconnected, hasMember } = useSelector(\n    (state: StoreState) => {\n      return {\n        isAppReady:\n          state.common.isWalletConnected &&\n          state.common.bootstrapState === BootstrapState.Bootstrapped,\n        isDisconnected: !state.common.isWalletConnected,\n        hasMember: state.registry.member,\n      };\n    },\n  );\n  return (\n    <div\n      style={{\n        zIndex: 99,\n        position: 'fixed',\n        width: '100%',\n        bottom: 0,\n        textAlign: 'center',\n        height: '30px',\n        backgroundColor: '#fbfbfb',\n        borderTop: 'solid 1pt #ccc',\n        display: 'flex',\n        justifyContent: 'space-between',\n        paddingLeft: '10px',\n        paddingRight: '10px',\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          position: 'absolute',\n          bottom: '40px',\n          left: '10px',\n          borderRadius: '4px',\n          background: '#272727',\n        }}\n        onClick={() => {\n          setEnvDisplay(!envDisplay);\n        }}\n      >\n        <IconButton\n          style={{\n            paddingLeft: '10px',\n            paddingRight: '10px',\n            paddingTop: 0,\n            paddingBottom: 0,\n            color: 'inherit',\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'column',\n          }}\n        >\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'center',\n              flexDirection: 'column',\n              marginRight: '10px',\n            }}\n          >\n            <Brightness1Icon\n              style={{\n                color: isDisconnected ? '#ccc' : 'rgb(60, 195, 215)',\n                fontSize: '12px',\n              }}\n            />\n          </div>\n          <Typography\n            style={{ color: '#fff', fontSize: '14px', fontWeight: 'bold' }}\n          >\n            {'Environment'}\n          </Typography>\n        </IconButton>\n      </div>\n      <div style={{ marginLeft: 'auto', marginRight: 'auto', display: 'flex' }}>\n        <FooterButton\n          href={\n            'https://github.com/project-serum/serum-dex/blob/master/docs/staking.md'\n          }\n          label={'Technical Documentation'}\n        />\n        <FooterButton\n          href={'https://github.com/project-serum/awesome-serum'}\n          label={'Developer Resources'}\n        />\n        <FooterButton\n          href={'https://discord.com/channels/739225212658122886'}\n          label={'Discord'}\n        />\n        <FooterButton href={'https://t.me/ProjectSerum'} label={'Telegram'} />\n        <FooterButton\n          href={'https://github.com/project-serum'}\n          label={'GitHub'}\n        />\n        <FooterButton\n          href={'https://solanabeach.io/'}\n          label={'Solana Network'}\n          isEnd={true}\n        />\n        {hasMember && isAppReady && (\n          <div\n            style={{ display: 'none' /*'flex'*/ }}\n            onClick={() => {\n              setChatDisplay(!chatDisplay);\n            }}\n          >\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'center',\n                flexDirection: 'column',\n              }}\n            >\n              <Button style={{ padding: 0 }}>\n                <Typography style={{ fontSize: '14px', fontWeight: 'bold' }}>\n                  Chat\n                </Typography>\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n      {envDisplay && (\n        <div\n          style={{\n            overflowY: 'scroll',\n            position: 'fixed',\n            bottom: '30px',\n            right: 0,\n            width: '500px',\n            height: '400px',\n            borderTopLeftRadius: '4px',\n            boxShadow: 'rgba(0, 0, 0, 0.05) 0px 0px 25px 0px',\n            background: '#fff',\n          }}\n        >\n          <NetworkEnvironment />\n        </div>\n      )}\n      {hasMember && chatDisplay && (\n        <div\n          style={{\n            position: 'fixed',\n            bottom: '30px',\n            right: 0,\n            width: '500px',\n            height: '400px',\n            borderTopLeftRadius: '4px',\n            boxShadow: 'rgba(0, 0, 0, 0.05) 0px 0px 25px 0px',\n            background: '#fff',\n          }}\n        >\n          <Messaging />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction NetworkEnvironment() {\n  let { network, registrar, safe } = useSelector((state: StoreState) => {\n    return {\n      network: state.common.network,\n      registrar: state.registry.registrar,\n      safe: state.lockup.safe,\n    };\n  });\n  return (\n    <div style={{ textAlign: 'left' }}>\n      <Typography\n        style={{\n          paddingLeft: '10px',\n          marginTop: '20px',\n          fontSize: '14px',\n          fontWeight: 'bold',\n        }}\n      >\n        Programs and Global Accounts\n      </Typography>\n      <ul>\n        <li>\n          SRM Faucet:{' '}\n          {network.srmFaucet ? network.srmFaucet.toString() : 'None'}\n        </li>\n        <li>\n          MSRM Faucet:{' '}\n          {network.msrmFaucet ? network.msrmFaucet.toString() : 'None'}\n        </li>\n        <li>SRM Mint: {network.srm.toString()}</li>\n        <li>MSRM Mint: {network.msrm.toString()}</li>\n        <li>Registry Program: {network.registryProgramId.toString()}</li>\n        <li>Lockup Program: {network.lockupProgramId.toString()}</li>\n        <li>Meta Entity Program: {network.lockupProgramId.toString()}</li>\n        <li>Registrar Account: {network.registrar.toString()}</li>\n        <li>Safe Account: {network.safe.toString()}</li>\n      </ul>\n      {registrar && safe && (\n        <>\n          <Typography\n            style={{\n              paddingLeft: '10px',\n              fontSize: '14px',\n              fontWeight: 'bold',\n            }}\n          >\n            Registrar\n          </Typography>\n          <ul>\n            <li>Authority: {registrar.account.authority.toString()}</li>\n            <li>\n              Max stake per entity:{' '}\n              {registrar.account.maxStakePerEntity.toString()}\n            </li>\n            <li>\n              Withdrawal timelocK:{' '}\n              {registrar.account.withdrawalTimelock.toString()}\n            </li>\n            <li>\n              Deactivation timelock:{' '}\n              {registrar.account.deactivationTimelock.toString()}\n            </li>\n            <li>Pool token: {registrar.account.poolMint.toString()}</li>\n            <li>\n              Mega pool token: {registrar.account.poolMintMega.toString()}\n            </li>\n          </ul>\n          <Typography\n            style={{\n              paddingLeft: '10px',\n              fontSize: '14px',\n              fontWeight: 'bold',\n            }}\n          >\n            Safe\n          </Typography>\n          <ul>\n            <li>Authority: {safe.account.authority.toString()}</li>\n            <li>Whitelist: {safe.account.whitelist.toString()}</li>\n          </ul>\n        </>\n      )}\n    </div>\n  );\n}\n\ntype FooterButtonProps = {\n  label: string;\n  href: string;\n  isEnd?: boolean;\n};\n\nfunction FooterButton(props: FooterButtonProps) {\n  const { label, href, isEnd } = props;\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        marginRight: isEnd ? '' : '15px',\n      }}\n    >\n      <Link href={href} target=\"_blank\" color=\"inherit\">\n        <Typography style={{ fontSize: '14px' }}>{label}</Typography>\n      </Link>\n    </div>\n  );\n}\n","import React, { PropsWithChildren } from 'react';\nimport { useSelector } from 'react-redux';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { State as StoreState, BootstrapState } from '../../store/reducer';\nimport Header from './Header';\nimport Footer from './Footer';\n\ntype Props = {};\n\nexport default function Layout(props: PropsWithChildren<Props>) {\n  const { isAppReady } = useSelector((state: StoreState) => {\n    return {\n      isAppReady:\n        state.common.isWalletConnected &&\n        state.common.bootstrapState === BootstrapState.Bootstrapped,\n    };\n  });\n  return (\n    <div\n      style={{\n        display: 'flex',\n        minHeight: '100vh',\n        flexDirection: 'column',\n        backgroundColor: 'rgb(251, 251, 251)',\n      }}\n    >\n      <div\n        style={{\n          position: 'fixed',\n          width: '100%',\n          zIndex: 99,\n        }}\n      >\n        <RiskBar />\n        <Header isAppReady={isAppReady} />\n      </div>\n      <div\n        style={{\n          width: '100%',\n          marginTop: '94px',\n          flex: 1,\n          display: 'flex',\n          marginBottom: '30px', // Compensates for the fixed position footer.\n        }}\n      >\n        {!isAppReady ? (\n          <DisconnectedSplash />\n        ) : (\n          <div style={{ width: '100%' }}>{props.children}</div>\n        )}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nfunction RiskBar() {\n  return (\n    <div\n      style={{\n        color: '#fff',\n        backgroundColor: 'rgb(39, 39, 39)',\n        height: '30px',\n        textAlign: 'center',\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          height: '100%',\n        }}\n      >\n        <Typography style={{ fontSize: '14px' }}>\n          Stake is unaudited software. Use at your own risk.\n        </Typography>\n      </div>\n    </div>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    '& > * + *': {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nfunction DisconnectedSplash() {\n  const classes = useStyles();\n  const { network, isDisconnected } = useSelector((state: StoreState) => {\n    return {\n      network: state.common.network,\n      isDisconnected: !state.common.isWalletConnected,\n    };\n  });\n  return (\n    <div\n      style={{\n        flex: '1',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        textAlign: 'center',\n      }}\n    >\n      <div style={{ width: '100%', display: 'flex' }}>\n        {isDisconnected ? (\n          <div\n            style={{ display: 'flex', marginLeft: 'auto', marginRight: 'auto' }}\n          >\n            <Typography\n              style={{ marginLeft: '24px' }}\n              color=\"textSecondary\"\n              variant=\"h4\"\n            >\n              Disconnected\n            </Typography>\n          </div>\n        ) : (\n          <div style={{ width: '100%' }}>\n            <div style={{ width: '100%' }} className={classes.root}>\n              <div>\n                <Typography variant=\"h5\">\n                  {`Connecting to ${network.label}...`}\n                </Typography>\n              </div>\n              <div\n                style={{\n                  marginLeft: 'auto',\n                  marginRight: 'auto',\n                  width: '300px',\n                }}\n              >\n                <LinearProgress style={{ width: '100%' }} />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import BN from 'bn.js';\n\nconst SRM_DECIMALS = 6;\n\nexport function displaySrm(amount: BN): string {\n  return toDisplay(amount, SRM_DECIMALS);\n}\n\nexport function fromDisplaySrm(amount: number): BN {\n  return fromDisplay(amount, SRM_DECIMALS);\n}\n\nexport function displayMsrm(amount: BN): string {\n  return amount.toString();\n}\n\nexport function fromDisplayMsrm(amount: number): BN {\n  return new BN(amount);\n}\n\n// TODO: do these conversions in a safer way.\nexport function toDisplay(amount: BN | number, decimals: number): string {\n  if (amount instanceof BN) {\n    amount = amount.toNumber();\n  }\n  return (amount / 10 ** decimals).toString();\n}\n\nexport function fromDisplay(amount: number, decimals: number): BN {\n  return new BN(amount * 10 ** decimals);\n}\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport BN from 'bn.js';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PublicKey } from '@solana/web3.js';\nimport { State as StoreState } from '../../store/reducer';\nimport { toDisplay } from '../../utils/tokens';\n\ntype Props = {\n  style?: any;\n  mint?: PublicKey | null;\n  decimals?: number;\n  variant?: 'outlined' | 'standard';\n  onChange: (from: PublicKey, maxAmount: BN) => void;\n};\n\nexport default function OwnedTokenAccountsSelect(p: Props) {\n  const { mint, decimals, variant, onChange, style } = p;\n  const ownedTokenAccounts = useSelector((state: StoreState) => {\n    if (!mint) {\n      return [];\n    }\n    return state.common.ownedTokenAccounts.filter(\n      ota => ota.account.mint.toString() === mint.toString(),\n    );\n  });\n  const [fromAccount, setFromAccount] = useState('');\n  return (\n    <Select\n      style={style}\n      variant={variant}\n      fullWidth\n      value={fromAccount}\n      onChange={e => {\n        const pk = e.target.value as string;\n        setFromAccount(pk);\n        const pubkey = new PublicKey(pk);\n        const token = ownedTokenAccounts\n          .filter(ota => ota.publicKey.equals(pubkey))\n          .pop();\n        onChange(pubkey, new BN(token!.account.amount));\n      }}\n    >\n      {ownedTokenAccounts.length === 0 ? (\n        <MenuItem value={''}>No token accounts found</MenuItem>\n      ) : (\n        ownedTokenAccounts.map(ownedTokenAccount => {\n          return (\n            <MenuItem value={ownedTokenAccount.publicKey.toString()}>\n              <div\n                style={{\n                  width: '100%',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  overflow: 'hidden',\n                }}\n              >\n                <div>{`${ownedTokenAccount.publicKey}`}</div>\n                <div style={{ float: 'right', color: '#ccc' }}>{`${toDisplay(\n                  ownedTokenAccount.account.amount,\n                  decimals!,\n                )}`}</div>\n              </div>\n            </MenuItem>\n          );\n        })\n      )}\n    </Select>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport { TransactionSignature } from '@solana/web3.js';\nimport { State as StoreState } from '../../store/reducer';\n\ntype Props = {\n  signature: string;\n};\n\nexport async function withTx(\n  snack: any,\n  beforeLabel: string,\n  afterLabel: string,\n  execTx: () => Promise<TransactionSignature>,\n) {\n  snack.enqueueSnackbar(beforeLabel, {\n    variant: 'info',\n  });\n  try {\n    let tx = await execTx();\n    snack.closeSnackbar();\n    snack.enqueueSnackbar(afterLabel, {\n      variant: 'success',\n      action: <ViewTransactionOnExplorerButton signature={tx} />,\n    });\n  } catch (err) {\n    snack.enqueueSnackbar(`Error: ${err.toString()}`, {\n      variant: 'error',\n    });\n  }\n}\n\nexport function ViewTransactionOnExplorerButton(props: Props) {\n  const { signature } = props;\n  const { explorerClusterSuffix } = useSelector((state: StoreState) => {\n    return {\n      explorerClusterSuffix: state.common.network.explorerClusterSuffix,\n    };\n  });\n  const urlSuffix = `?cluster=${explorerClusterSuffix}`;\n  return (\n    <Button\n      color=\"inherit\"\n      component=\"a\"\n      target=\"_blank\"\n      rel=\"noopener\"\n      href={`https://explorer.solana.com/tx/${signature}` + urlSuffix}\n    >\n      View on Solana Explorer\n    </Button>\n  );\n}\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport * as registry from '@project-serum/registry';\nimport { State as StoreState, ProgramAccount } from '../../store/reducer';\nimport { ViewTransactionOnExplorerButton } from '../../components/common/Notification';\nimport { ActionType } from '../../store/actions';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport { EntityActivityLabel } from './EntityGallery';\n\ntype Props = {\n  entity: ProgramAccount<registry.accounts.Entity>;\n};\n\nexport default function Entity(props: Props) {\n  const { entity } = props;\n  let { isWalletConnected, member, registrar } = useSelector(\n    (state: StoreState) => {\n      return {\n        isWalletConnected: state.common.isWalletConnected,\n        member: state.registry.member,\n        registrar: state.registry.registrar!,\n      };\n    },\n  );\n\n  return (\n    <>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          backgroundColor: '#fbfbfb',\n        }}\n      >\n        <div\n          style={{\n            paddingTop: 50,\n            paddingRight: 50,\n            paddingLeft: 50,\n          }}\n        >\n          <div\n            style={{\n              paddingBottom: '10px',\n              display: 'flex',\n              justifyContent: 'space-between',\n              borderBottom: 'solid #fbfbfb',\n            }}\n          >\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n              }}\n            >\n              <div>\n                <Typography\n                  variant=\"h1\"\n                  style={{\n                    fontSize: 25,\n                    fontWeight: 700,\n                    textAlign: 'center',\n                  }}\n                >\n                  {entity.publicKey.toString()}\n                </Typography>\n              </div>\n              <div>\n                <Typography\n                  color=\"textSecondary\"\n                  style={{\n                    paddingBottom: 10,\n                  }}\n                >\n                  Leader - {entity.account.leader.toString()}\n                </Typography>\n              </div>\n              <div>\n                <EntityActivityLabel entity={entity} />\n              </div>\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'column',\n              }}\n            >\n              <div style={{ flex: 1 }}></div>\n              {isWalletConnected && member.data !== undefined && (\n                <>\n                  {member.data!.account.member.entity.toString() !==\n                  entity.publicKey.toString() ? (\n                    <JoinButton\n                      registrar={registrar}\n                      entity={entity}\n                      member={member.data!}\n                    />\n                  ) : (\n                    <Button\n                      disableElevation\n                      disableFocusRipple\n                      disableRipple\n                      variant=\"contained\"\n                      color=\"primary\"\n                    >\n                      <Typography>My Node</Typography>\n                    </Button>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n        <div\n          style={{\n            flex: 1,\n            paddingTop: 50,\n            paddingBottom: 50,\n            paddingLeft: 50,\n            paddingRight: 50,\n          }}\n        >\n          <StakeContent entity={entity} />\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype StakeContentProps = {\n  entity: ProgramAccount<registry.accounts.Entity>;\n};\n\nfunction StakeContent(props: StakeContentProps) {\n  const { entity } = props;\n  return (\n    <div>\n      <Grid container spacing={3}>\n        <BalanceGridItem\n          label=\"Stake Pool Shares\"\n          amount={entity.account.balances.sptAmount.toString()}\n        />\n        <BalanceGridItem\n          label=\"Mega Stake Pool Shares\"\n          amount={entity.account.balances.sptMegaAmount.toString()}\n        />\n      </Grid>\n    </div>\n  );\n}\ntype BalanceGridItemProps = {\n  label: string;\n  amount: string;\n};\n\nfunction BalanceGridItem(props: BalanceGridItemProps) {\n  const { label, amount } = props;\n  return (\n    <Grid\n      item\n      xs={6}\n      style={{\n        height: '250px',\n      }}\n    >\n      <Card\n        style={{\n          boxShadow: '0px 0px 25px 0px rgba(0,0,0,0.05)',\n          width: '100%',\n          height: '100%',\n          paddingTop: '24px',\n          paddingBottom: '24px',\n        }}\n      >\n        <div\n          style={{\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <div>\n            <Typography\n              color=\"textSecondary\"\n              style={{\n                fontSize: '20px',\n                textAlign: 'center',\n              }}\n            >\n              {label}\n            </Typography>\n          </div>\n          <div\n            style={{\n              height: '100%',\n              justifyContent: 'center',\n              flexDirection: 'column',\n              display: 'flex',\n              textAlign: 'center',\n            }}\n          >\n            <Typography\n              color=\"textSecondary\"\n              style={{\n                fontSize: '40px',\n              }}\n            >\n              {amount}\n            </Typography>\n          </div>\n        </div>\n      </Card>\n    </Grid>\n  );\n}\n\ntype JoinButtonProps = {\n  entity: ProgramAccount<registry.accounts.Entity>;\n  member: ProgramAccount<registry.accounts.MemberDeref>;\n  registrar: ProgramAccount<registry.accounts.Registrar>;\n};\n\nfunction JoinButton(props: JoinButtonProps) {\n  const { entity, member, registrar } = props;\n  const { registryClient } = useWallet();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const joinEntity = async () => {\n    enqueueSnackbar(`Joining ${entity.publicKey}`, {\n      variant: 'info',\n    });\n\n    const oldEntity = member.account.member.entity;\n    const newEntity = entity.publicKey;\n\n    const { tx } = await registryClient.switchEntity({\n      member: member.publicKey,\n      newEntity,\n      registrar: registrar.account,\n    });\n\n    const updatedOldEntity = await registryClient.accounts.entity(oldEntity);\n    const updatedNewEntity = await registryClient.accounts.entity(newEntity);\n\n    dispatch({\n      type: ActionType.RegistryUpdateEntity,\n      item: {\n        entity: {\n          publicKey: oldEntity,\n          account: updatedOldEntity,\n        },\n      },\n    });\n    dispatch({\n      type: ActionType.RegistryUpdateEntity,\n      item: {\n        entity: {\n          publicKey: newEntity,\n          account: updatedNewEntity,\n        },\n      },\n    });\n    closeSnackbar();\n    enqueueSnackbar(`Joined entity ${entity.publicKey}`, {\n      variant: 'success',\n      action: <ViewTransactionOnExplorerButton signature={tx} />,\n    });\n  };\n  return (\n    <div>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={() =>\n          joinEntity().catch(err => {\n            enqueueSnackbar(`Error joining entity: ${err.toString()}`, {\n              variant: 'error',\n            });\n          })\n        }\n      >\n        Join\n      </Button>\n    </div>\n  );\n}\n","type Skin = {\n  active: string;\n  ready: string;\n  inactive: string;\n  notReady: string;\n  deactivating: string;\n};\n\nconst _skin: Skin = {\n  active: '#43a047',\n  ready: '#3f51b5',\n  notReady: '#ccc',\n  inactive: 'red',\n  deactivating: 'rgb(255, 121, 42)',\n};\n\nexport function instance(): Skin {\n  return _skin;\n}\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport { Img } from 'react-image';\nimport { PublicKey } from '@solana/web3.js';\nimport { accounts, metaEntity } from '@project-serum/registry';\nimport Card from '@material-ui/core/Card';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Brightness1Icon from '@material-ui/icons/Brightness1';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport { ProgramAccount, State as StoreState } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport Entity from './Entity';\nimport * as skin from '../../skin';\n\nexport default function EntityGallery() {\n  const [entityAddress, setEntityAddress] = useState<null | PublicKey>(null);\n  let { entities, metadata } = useSelector((state: StoreState) => {\n    return {\n      entities: state.registry.entities,\n      metadata: state.registry.entityMetadata,\n      member: state.registry.member,\n    };\n  });\n  // Sort entities by activation.\n  entities = entities\n    .filter(e => e.account.state.active !== undefined)\n    .concat(\n      entities.filter(e => e.account.state.pendingDeactivation !== undefined),\n    )\n    .concat(entities.filter(e => e.account.state.inactive !== undefined));\n\n  let entity =\n    entityAddress &&\n    entities\n      .filter(e => e.publicKey.toString() === entityAddress.toString())\n      .pop();\n  return (\n    <>\n      <EntityDialog\n        open={entity !== null}\n        onClose={() => setEntityAddress(null)}\n        entity={entity}\n      />\n      <div style={{ flex: 1 }}>\n        <div style={{ marginTop: '24px', marginBottom: '24px' }}>\n          <div>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '10px',\n              }}\n            >\n              <div\n                style={{\n                  display: 'flex',\n                  justifyContent: 'center',\n                  flexDirection: 'column',\n                }}\n              >\n                <Typography\n                  style={{\n                    fontSize: '20px',\n                    fontWeight: 'bold',\n                  }}\n                >\n                  Nodes\n                </Typography>\n              </div>\n              <NewButton\n                style={{\n                  // For development only. Otherwise, entity creation is done through CLI\n                  // by a node leader.\n                  display: 'none',\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                flexWrap: 'wrap',\n              }}\n            >\n              {entities.map(entity => (\n                <EntityCard\n                  metadata={metadata.get(entity.publicKey.toString())}\n                  entity={entity}\n                  onClick={() => setEntityAddress(entity.publicKey)}\n                />\n              ))}\n            </div>\n            <style>\n              {`\n.entity-card-container {\n  transition: box-shadow .2s ease-out,-webkit-box-shadow .2s ease-out,-moz-box-shadow .2s ease-out;\n}\n.entity-card-container:hover {\n  cursor: pointer;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  -moz-box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  -webkit-box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n}\n.entity-card-container-inner {\n  transition: transform .2s ease-out,-webkit-transform .2s ease-out;\n}\n.entity-card-container-inner:hover {\n  transform: scale(1.025);\n  -webkit-transform: scalee(1.025);\n}\n\t\t\t\t\t`}\n            </style>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype EntityCardProps = {\n  entity: ProgramAccount<accounts.Entity>;\n  metadata?: ProgramAccount<metaEntity.accounts.metadata.Metadata>;\n  onClick: () => void;\n};\n\nfunction EntityCard(props: EntityCardProps) {\n  const { entity, metadata, onClick } = props;\n  const imageUrl = metadata?.account.imageUrl;\n\n  return (\n    <>\n      <div\n        style={{\n          width: '304px',\n          padding: '5px',\n        }}\n      >\n        <div\n          className=\"entity-card-container\"\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <Card\n            onClick={onClick}\n            style={{\n              borderRadius: 10,\n              height: '361px',\n              boxShadow: '0px 0px 25px 0px rgba(0,0,0,0.05)',\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n          >\n            <div\n              className=\"entity-card-container-inner\"\n              style={{\n                display: 'flex',\n                height: '100%',\n                justifyContent: 'space-between',\n                flexDirection: 'column',\n              }}\n            >\n              <div style={{ height: '144px', overflow: 'hidden' }}>\n                <Img\n                  style={{ width: '100%' }}\n                  src={[`${imageUrl}`]}\n                  unloader={\n                    <div\n                      style={{\n                        width: '100%',\n                        height: '100%',\n                        background: 'grey',\n                      }}\n                    ></div>\n                  }\n                />\n              </div>\n              <div\n                style={{\n                  flex: 1,\n                  padding: '16px',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <div>\n                  <Typography\n                    style={{\n                      fontWeight: 'bold',\n                      fontSize: '16px',\n                    }}\n                  >\n                    {metadata?.account.name}\n                  </Typography>\n                  <Typography\n                    color=\"textSecondary\"\n                    style={{\n                      fontSize: '12px',\n                      overflow: 'hidden',\n                    }}\n                  >\n                    {entity.publicKey.toString()}\n                  </Typography>\n                  <Typography\n                    style={{\n                      marginTop: '10px',\n                      fontSize: '14px',\n                    }}\n                  >\n                    {metadata?.account.about}\n                  </Typography>\n                </div>\n                <div\n                  style={{ display: 'flex', justifyContent: 'space-between' }}\n                >\n                  <EntityActivityLabel entity={entity} />\n                  <Typography\n                    style={{ fontSize: '14px' }}\n                    color=\"textSecondary\"\n                  >\n                    {`${entity.account.balances.sptAmount.toString()} | ${entity.account.balances.sptMegaAmount.toString()}`}\n                  </Typography>\n                </div>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype EntityActivityLabelProps = {\n  entity: ProgramAccount<accounts.Entity>;\n  noBubble?: boolean;\n  textStyle?: any;\n};\n\nexport function EntityActivityLabel(props: EntityActivityLabelProps) {\n  const { entity, noBubble, textStyle } = props;\n  return (\n    <>\n      {entity.account.state.active !== undefined && (\n        <ActivityLabel\n          noBubble={noBubble}\n          color={skin.instance().active}\n          text=\"Active\"\n          textStyle={textStyle || { fontSize: '14px' }}\n        />\n      )}\n      {entity.account.state.pendingDeactivation !== undefined && (\n        <ActivityLabel\n          noBubble={noBubble}\n          color={skin.instance().deactivating}\n          text=\"Deactivating\"\n          textStyle={textStyle || { fontSize: '14px' }}\n        />\n      )}\n      {entity.account.state.inactive !== undefined && (\n        <ActivityLabel\n          noBubble={noBubble}\n          color={skin.instance().inactive}\n          text=\"Inactive\"\n          textStyle={textStyle || { fontSize: '14px' }}\n        />\n      )}\n    </>\n  );\n}\n\ntype ActivityLabelProps = {\n  color: string;\n  text: string;\n  textStyle?: any;\n  noBubble?: boolean;\n};\n\nfunction ActivityLabel(props: ActivityLabelProps) {\n  const { color, text, noBubble, textStyle } = props;\n  const tStyle = Object.assign(textStyle || {}, noBubble ? { color } : {});\n  return (\n    <div style={{ display: 'flex' }}>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          marginRight: '10px',\n        }}\n      >\n        <Brightness1Icon\n          style={{\n            display: noBubble ? 'none' : '',\n            color,\n            fontSize: '14px',\n          }}\n        />\n      </div>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'center',\n          flexDirection: 'column',\n          fontSize: '10px',\n        }}\n      >\n        <Typography color=\"textSecondary\" style={tStyle}>\n          {text}\n        </Typography>\n      </div>\n    </div>\n  );\n}\n\ntype NewButtonProps = {\n  style?: any;\n};\n\nfunction NewButton(props?: NewButtonProps) {\n  const [showDialog, setShowDialog] = useState(false);\n  return (\n    <>\n      <CreateEntityDialog\n        open={showDialog}\n        onClose={() => setShowDialog(false)}\n      />\n      <div style={props && props.style} onClick={() => setShowDialog(true)}>\n        <Button variant=\"contained\" color=\"secondary\">\n          New\n        </Button>\n      </div>\n    </>\n  );\n}\n\ntype EntityDialogProps = {\n  entity?: ProgramAccount<accounts.Entity> | null;\n  open: boolean;\n  onClose: () => void;\n};\n\nfunction EntityDialog(props: EntityDialogProps) {\n  const { entity, open, onClose } = props;\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth={true} maxWidth=\"md\">\n      <DialogContent\n        style={{\n          backgroundColor: '#fbfbfb',\n          padding: 0,\n        }}\n      >\n        {entity && <Entity entity={entity} />}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction CreateEntityDialog(props: EntityDialogProps) {\n  const { open, onClose } = props;\n\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n  const { registryClient } = useWallet();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const isCreateEnabled = name.length > 0;\n\n  const createEntity = async () => {\n    enqueueSnackbar('Creating entity...', {\n      variant: 'info',\n    });\n    const { entity, metadata } = await registryClient.createEntity({\n      name,\n      about,\n      imageUrl,\n    });\n    const entityAccount = await registryClient.accounts.entity(entity);\n    dispatch({\n      type: ActionType.RegistryCreateEntity,\n      item: {\n        entity: {\n          publicKey: entity,\n          account: entityAccount,\n        },\n      },\n    });\n    const newMetadata = await registryClient.accounts.metadata(metadata);\n    dispatch({\n      type: ActionType.RegistryCreateMetadata,\n      item: {\n        entityPublicKey: entity,\n        metadata: {\n          publicKey: metadata,\n          account: newMetadata,\n        },\n      },\n    });\n    closeSnackbar();\n    enqueueSnackbar(`Entity created ${entity}`, {\n      variant: 'success',\n    });\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth={true} maxWidth=\"md\">\n      <DialogTitle>Create Entity</DialogTitle>\n      <DialogContent>\n        <TextField\n          label=\"Name\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n        />\n        <TextField\n          label=\"About\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={about}\n          onChange={e => setAbout(e.target.value)}\n        />\n        <TextField\n          label=\"Image URL\"\n          fullWidth\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={imageUrl}\n          onChange={e => setImageUrl(e.target.value)}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button\n          onClick={() =>\n            createEntity()\n              .then(() => onClose())\n              .catch(err => {\n                enqueueSnackbar(`Error creating entity: ${err.toString()}`, {\n                  variant: 'error',\n                });\n              })\n          }\n          type=\"submit\"\n          color=\"primary\"\n          disabled={!isCreateEnabled}\n        >\n          Create\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { accounts } from '@project-serum/registry';\nimport { ProgramAccount } from '@project-serum/common';\nimport { State as StoreState, AsyncData } from '../store/reducer';\nimport { displaySrm, displayMsrm } from '../utils/tokens';\n\nexport default function Me() {\n  const { member } = useSelector((state: StoreState) => {\n    return {\n      member: state.registry.member,\n    };\n  });\n\n  return (\n    <div style={{ display: 'flex', width: '100%' }}>\n      <div style={{ flex: 1, marginTop: '24px', marginBottom: '24px' }}>\n        {member.isReady && member.data !== undefined && (\n          <MemberBalancesCard member={member} />\n        )}\n      </div>\n    </div>\n  );\n}\n\ntype MemberBalancesCardProps = {\n  member: AsyncData<ProgramAccount<accounts.MemberDeref>>;\n};\n\nfunction MemberBalancesCard(props: MemberBalancesCardProps) {\n  const { member } = props;\n  const tables = [\n    {\n      title: 'Main Balances',\n      description: 'Balances deposited directly from the connected wallet.',\n      rows:\n        !member.isReady || member.data === undefined\n          ? null\n          : [\n              {\n                token: 'SRM',\n                balance: displaySrm(\n                  member.data!.account.balances[0]!.vault.amount,\n                ),\n                stake: displaySrm(\n                  member.data!.account.balances[0].vaultStake.amount,\n                ),\n                spt: member.data!.account.balances[0].spt.amount.toString(),\n                pending: displaySrm(\n                  member.data!.account.balances[0].vaultPendingWithdrawal\n                    .amount,\n                ),\n              },\n              {\n                token: 'MSRM',\n                balance: displayMsrm(\n                  member.data!.account.balances[0].vaultMega.amount,\n                ),\n                stake: displayMsrm(\n                  member.data!.account.balances[0].vaultStakeMega.amount,\n                ),\n                spt: member.data!.account.balances[0].sptMega.amount.toString(),\n                pending: displayMsrm(\n                  member.data!.account.balances[0].vaultPendingWithdrawalMega\n                    .amount,\n                ),\n              },\n            ],\n    },\n    {\n      title: 'Locked Balances',\n      description:\n        'Balances deposited from the lockup program. These funds are isolated from the Main Balances and may only be withdrawn back to the lockup program. At all times they are program controlled.',\n      rows:\n        !member.isReady || member.data === undefined\n          ? null\n          : [\n              {\n                token: 'SRM',\n                balance: displaySrm(\n                  member.data!.account.balances[1].vault.amount,\n                ),\n                stake: displaySrm(\n                  member.data!.account.balances[1].vaultStake.amount,\n                ),\n                spt: member.data!.account.balances[1].spt.amount.toString(),\n                pending: displaySrm(\n                  member.data!.account.balances[1].vaultPendingWithdrawal\n                    .amount,\n                ),\n              },\n              {\n                token: 'MSRM',\n                balance: displayMsrm(\n                  member.data!.account.balances[1].vaultMega.amount,\n                ),\n                stake: displayMsrm(\n                  member.data!.account.balances[1].vaultStakeMega.amount,\n                ),\n                spt: member.data!.account.balances[1].sptMega.amount.toString(),\n                pending: displayMsrm(\n                  member.data!.account.balances[1].vaultPendingWithdrawalMega\n                    .amount,\n                ),\n              },\n            ],\n    },\n  ];\n  return (\n    <Card\n      style={{\n        marginBottom: '24px',\n      }}\n    >\n      <CardHeader\n        title={'My Membership'}\n        subheader={\n          !member.isReady ? (\n            <CircularProgress />\n          ) : (\n            member.data!.publicKey.toString()\n          )\n        }\n      />\n      <CardContent\n        style={{\n          position: 'relative',\n          paddingTop: 0,\n          paddingBottom: '16px',\n        }}\n      >\n        {tables.map(t => (\n          <BalanceTable\n            key={t.title}\n            title={t.title}\n            description={t.description}\n            rows={t.rows}\n          />\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n\ntype BalanceTableProps = {\n  title: string;\n  description: string;\n  rows:\n    | null\n    | {\n        token: string;\n        balance: string;\n        stake: string;\n        pending: string;\n        spt: string;\n      }[];\n};\n\nfunction BalanceTable(props: BalanceTableProps) {\n  const { title, rows, description } = props;\n  return (\n    <div style={{ marginBottom: '16px' }}>\n      <Typography style={{ fontWeight: 'bold' }}>{title}</Typography>\n      <Typography color=\"textSecondary\" style={{ fontSize: '14px' }}>\n        {description}\n      </Typography>\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Token</TableCell>\n              <TableCell align=\"right\">Available</TableCell>\n              <TableCell align=\"right\">Pending</TableCell>\n              <TableCell align=\"right\">Staked</TableCell>\n              <TableCell align=\"right\">Pool</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {rows === null ? (\n              <CircularProgress />\n            ) : (\n              rows.map(row => (\n                <TableRow key={row.token}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {row.token}\n                  </TableCell>\n                  <TableCell align=\"right\">{row.balance}</TableCell>\n                  <TableCell align=\"right\">{row.pending}</TableCell>\n                  <TableCell align=\"right\">{row.stake}</TableCell>\n                  <TableCell align=\"right\">{row.spt}</TableCell>\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport BN from 'bn.js';\nimport { useSnackbar } from 'notistack';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport FormControl from '@material-ui/core/FormControl';\nimport Typography from '@material-ui/core/Typography';\nimport { u64 } from '@solana/spl-token';\nimport { accounts } from '@project-serum/registry';\nimport { useWallet } from '../components/common/WalletProvider';\nimport { ViewTransactionOnExplorerButton } from '../components/common/Notification';\nimport { State as StoreState, ProgramAccount } from '../store/reducer';\nimport { ActionType } from '../store/actions';\nimport * as skin from '../skin';\nimport { displaySrm, displayMsrm } from '../utils/tokens';\n\nexport default function Stake() {\n  const { registryClient } = useWallet();\n  const dispatch = useDispatch();\n  const { member, registrar } = useSelector((state: StoreState) => {\n    return {\n      poolTokenMint: state.registry.poolTokenMint,\n      megaPoolTokenMint: state.registry.megaPoolTokenMint,\n      member: state.registry.member.data!,\n      registrar: state.registry.registrar,\n    };\n  });\n\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const createPoolTokens = async (\n    amount: number,\n    label: string,\n    isMega?: boolean,\n    isLocked?: boolean,\n  ) => {\n    const balances = member.account.member.balances[isLocked ? 1 : 0];\n    const balanceId = balances.owner;\n    const spt = isMega ? balances.sptMega : balances.spt;\n\n    enqueueSnackbar(`Staking ${label} Pool tokens`, {\n      variant: 'info',\n    });\n\n    const { tx } = await registryClient.stake({\n      member: {\n        publicKey: member.publicKey,\n        account: member.account.member,\n      },\n      amount: new u64(amount),\n      spt,\n      isMega,\n      balanceId,\n    });\n    const updatedEntity = await registryClient.accounts.entity(\n      member.account.member.entity,\n    );\n    dispatch({\n      type: ActionType.RegistryUpdateEntity,\n      item: {\n        entity: {\n          publicKey: member.account.member.entity,\n          account: updatedEntity,\n        },\n      },\n    });\n    closeSnackbar();\n    enqueueSnackbar(`Staking complete`, {\n      variant: 'success',\n      action: <ViewTransactionOnExplorerButton signature={tx} />,\n    });\n  };\n\n  const redeemPoolTokens = async (\n    amount: number,\n    label: string,\n    isMega?: boolean,\n    isLocked?: boolean,\n  ) => {\n    enqueueSnackbar(`Unstaking ${amount} ${label} Pool tokens`, {\n      variant: 'info',\n    });\n    const balances = member.account.member.balances[isLocked ? 1 : 0];\n    const balanceId = balances.owner;\n    const spt = isMega ? balances.sptMega : balances.spt;\n    const { tx, pendingWithdrawal } = await registryClient.startStakeWithdrawal(\n      {\n        member: {\n          publicKey: member.publicKey,\n          account: member.account.member,\n        },\n        amount: new u64(amount),\n        registrar: registrar!.account,\n        spt,\n        isMega,\n        balanceId,\n      },\n    );\n    const updatedEntity = await registryClient.accounts.entity(\n      member.account.member.entity,\n    );\n    dispatch({\n      type: ActionType.RegistryUpdateEntity,\n      item: {\n        entity: {\n          publicKey: member.account.member.entity,\n          account: updatedEntity,\n        },\n      },\n    });\n    const pwAccount = await registryClient.accounts.pendingWithdrawal(\n      pendingWithdrawal,\n    );\n    dispatch({\n      type: ActionType.RegistryCreatePendingWithdrawal,\n      item: {\n        memberPublicKey: member!.publicKey,\n        pendingWithdrawal: {\n          publicKey: pendingWithdrawal,\n          account: pwAccount,\n        },\n      },\n    });\n    closeSnackbar();\n    enqueueSnackbar(`Stake transfer initiated`, {\n      variant: 'success',\n      action: <ViewTransactionOnExplorerButton signature={tx} />,\n    });\n  };\n\n  const createSrmPool = async (shares: number, isLocked: boolean) => {\n    if (shares > 0) {\n      createPoolTokens(shares, 'SRM', false, isLocked).catch(err => {\n        enqueueSnackbar(`Error staking srm pool: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n  };\n  const redeemSrmPool = async (shares: number, isLocked: boolean) => {\n    if (shares > 0) {\n      redeemPoolTokens(shares, 'SRM', false, isLocked).catch(err => {\n        enqueueSnackbar(`Error unstaking SRM pool: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n  };\n\n  const createMsrmPool = async (shares: number, isLocked: boolean) => {\n    if (shares > 0) {\n      createPoolTokens(shares, 'MSRM', true, isLocked).catch(err => {\n        enqueueSnackbar(`Error staking MSRM pool: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n  };\n  const redeemMsrmPool = async (shares: number, isLocked: boolean) => {\n    if (shares > 0) {\n      redeemPoolTokens(shares, 'MSRM', true, isLocked).catch(err => {\n        enqueueSnackbar(`Error unstaking MSRM pool: ${err.toString()}`, {\n          variant: 'error',\n        });\n      });\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', width: '100%' }}>\n      <div style={{ flex: 1, marginTop: '24px', marginBottom: '24px' }}>\n        <PoolCard\n          title={'Stake Pool'}\n          create={createSrmPool}\n          redeem={redeemSrmPool}\n          isMega={false}\n        />\n        <PoolCard\n          title={'Mega Stake Pool'}\n          create={createMsrmPool}\n          redeem={redeemMsrmPool}\n          isMega={true}\n        />\n      </div>\n      <RedemptionList\n        style={{\n          marginBottom: '24px',\n        }}\n      />\n    </div>\n  );\n}\n\ntype PoolCardProps = {\n  title: string;\n  isMega: boolean;\n  create: (shares: number, isLocked: boolean) => void;\n  redeem: (shares: number, isLocked: boolean) => void;\n};\n\nfunction PoolCard(props: PoolCardProps) {\n  const { title, create, redeem, isMega } = props;\n  const [srmPoolAmount, setSrmPoolAmount] = useState<null | number>(null);\n  const [isLocked, setIsLocked] = useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const { poolTokenMint, member, entity, registrar } = useSelector(\n    (state: StoreState) => {\n      const member = state.registry.member.data!;\n      return {\n        poolTokenMint: isMega\n          ? state.registry.megaPoolTokenMint!\n          : state.registry.poolTokenMint!,\n        member,\n        registrar: state.registry.registrar!,\n        entity:\n          member === undefined\n            ? undefined\n            : state.registry.entities\n                .filter(e => e.publicKey.equals(member.account.member.entity))\n                .pop(),\n      };\n    },\n  );\n\n  const pricePerShare = isMega\n    ? displayMsrm(registrar.account.stakeRateMega) + ' MSRM'\n    : displaySrm(registrar.account.stakeRate) + ' SRM';\n\n  return (\n    <Card\n      style={{\n        marginBottom: '24px',\n      }}\n    >\n      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n        <CardHeader\n          title={title}\n          subheader={poolTokenMint.publicKey.toString()}\n        />\n        <div\n          style={{\n            paddingRight: '16px',\n            display: 'flex',\n            justifyContent: 'center',\n            flexDirection: 'column',\n          }}\n        >\n          <Typography color=\"textSecondary\"></Typography>\n        </div>\n      </div>\n      <CardContent>\n        <div\n          style={{\n            marginBottom: '16px',\n          }}\n        >\n          <Typography style={{ fontWeight: 'bold' }}>\n            Total pool tokens outstanding\n          </Typography>\n          <Typography>{poolTokenMint.account.supply.toString()}</Typography>\n          <Typography style={{ fontWeight: 'bold' }}>\n            Price per pool token\n          </Typography>\n          <Typography>{pricePerShare}</Typography>\n        </div>\n        <div>\n          <div style={{ marginBottom: '10px' }}>\n            <FormControl>\n              <TextField\n                style={{ width: '100%' }}\n                label=\"Pool tokens\"\n                type=\"number\"\n                variant=\"outlined\"\n                onChange={e => setSrmPoolAmount(parseInt(e.target.value))}\n              />\n            </FormControl>\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <div>\n              <Button\n                disabled={\n                  member === undefined ||\n                  srmPoolAmount === null ||\n                  srmPoolAmount < 1\n                }\n                color=\"primary\"\n                variant=\"contained\"\n                onClick={() => {\n                  let total = isLocked\n                    ? isMega\n                      ? member.account.balances[1].vaultMega.amount\n                      : member.account.balances[1].vault.amount\n                    : isMega\n                    ? member.account.balances[0].vaultMega.amount\n                    : member.account.balances[0].vault.amount;\n                  let stakeRate = isMega\n                    ? registrar.account.stakeRateMega\n                    : registrar.account.stakeRate;\n\n                  if (!isMega) {\n                    if (entity?.account.state.active === undefined) {\n                      // MSRM requirement is currently disabled on mainnet beta.\n                      // Uncomment this once it's enabled.\n                      //\n                      // enqueueSnackbar('Entity not active. Please stake MSRM.', {\n                      //  variant: 'error',\n                      // });\n                      // return;\n                    }\n                  }\n\n                  // Don't send to the cluster if we know it will fail.\n                  if (\n                    total.lt(stakeRate.mul(new BN(srmPoolAmount as number)))\n                  ) {\n                    enqueueSnackbar(\n                      'Insufficient available balance. Please deposit.',\n                      {\n                        variant: 'error',\n                      },\n                    );\n                    return;\n                  }\n\n                  create(srmPoolAmount as number, isLocked);\n                }}\n              >\n                Stake\n              </Button>\n              <Button\n                disabled={\n                  member === undefined ||\n                  srmPoolAmount === null ||\n                  srmPoolAmount < 1\n                }\n                color=\"secondary\"\n                variant=\"contained\"\n                style={{ marginLeft: '10px' }}\n                onClick={() => {\n                  let currentPoolTokens = isLocked\n                    ? isMega\n                      ? member.account.balances[1].sptMega.amount\n                      : member.account.balances[1].spt.amount\n                    : isMega\n                    ? member.account.balances[0].sptMega.amount\n                    : member.account.balances[0].spt.amount;\n\n                  // Don't send to the cluster if we know it will fail.\n                  let amount = new BN(srmPoolAmount as number);\n                  if (currentPoolTokens.lt(amount)) {\n                    enqueueSnackbar('Insufficient pool balance.', {\n                      variant: 'error',\n                    });\n                    return;\n                  }\n\n                  redeem(srmPoolAmount as number, isLocked);\n                }}\n              >\n                Unstake\n              </Button>\n            </div>\n            <div>\n              <FormControlLabel\n                control={\n                  <Switch\n                    checked={isLocked}\n                    onChange={() => setIsLocked(!isLocked)}\n                  />\n                }\n                labelPlacement={'start'}\n                label=\"Locked balances\"\n              />\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\ntype RedemptionListProps = {\n  style: any;\n};\n\nfunction RedemptionList(props: RedemptionListProps) {\n  const { pendingWithdrawals, member, registrar } = useSelector(\n    (state: StoreState) => {\n      const member = state.registry.member;\n      return {\n        member,\n        registrar: state.registry.registrar!,\n        pendingWithdrawals:\n          member.isReady && member.data\n            ? state.registry.pendingWithdrawals.get(\n                member.data!.publicKey.toString(),\n              )\n            : [],\n      };\n    },\n  );\n  return (\n    <div style={props.style}>\n      <Card\n        style={{\n          marginLeft: '20px',\n          marginTop: '24px',\n          width: '294px',\n        }}\n      >\n        <CardContent\n          style={{\n            paddingLeft: 0,\n            paddingRight: 0,\n            paddingBottom: 0,\n            paddingTop: 0,\n          }}\n        >\n          <div\n            style={{\n              marginLeft: '24px',\n              marginTop: '24px',\n              marginRight: '24px',\n              borderBottom: 'solid 1pt #ccc',\n              paddingBottom: '12px',\n            }}\n          >\n            <Typography style={{}}>Pending Transfers</Typography>\n            <Typography style={{ fontSize: '12px' }} color=\"textSecondary\">\n              Click the checkmark to complete a transfer on or after the \"end\"\n              date.\n            </Typography>\n          </div>\n          <div style={{ paddingLeft: '24px', paddingRight: '24px' }}>\n            {pendingWithdrawals && pendingWithdrawals.length > 0 ? (\n              pendingWithdrawals.map((pw, idx) => {\n                return (\n                  <PendingStakeListItem\n                    key={pw.publicKey.toString()}\n                    isLast={idx === pendingWithdrawals.length - 1}\n                    registrar={registrar}\n                    pw={pw}\n                    member={member.data!}\n                  />\n                );\n              })\n            ) : (\n              <div\n                style={{\n                  paddingBottom: '24px',\n                  paddingTop: '12px',\n                }}\n              >\n                <Typography color=\"textSecondary\" style={{ fontSize: '14px' }}>\n                  None found\n                </Typography>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\ntype PendingStakeListItemProps = {\n  isLast?: boolean;\n  registrar: ProgramAccount<accounts.Registrar>;\n  pw: ProgramAccount<accounts.PendingWithdrawal>;\n  member: ProgramAccount<accounts.MemberDeref>;\n};\n\nfunction PendingStakeListItem(props: PendingStakeListItemProps) {\n  const { isLast, pw, member, registrar } = props;\n  const sptLabel = (() => {\n    const isLocked = !pw.account.balanceId.equals(\n      member.account.member.beneficiary,\n    );\n    const l = isLocked ? '(locked)' : '';\n    if (pw.account.pool.equals(registrar.account.poolMint)) {\n      return `${displaySrm(pw.account.amount)} SRM ${l}`;\n    } else {\n      return `${displayMsrm(pw.account.amount)} MSRM ${l}`;\n    }\n  })();\n  return (\n    <div\n      style={{\n        paddingBottom: !isLast ? '12px' : '24px',\n        paddingTop: '12px',\n        borderBottom: 'solid 1pt #ccc',\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n        }}\n      >\n        <div>\n          <Typography style={{ fontWeight: 'bold', fontSize: '14px' }}>\n            {`${sptLabel}`}\n          </Typography>\n        </div>\n        <div>\n          <PendingWithdrawalButton\n            registrar={registrar}\n            member={member}\n            pendingWithdrawal={pw}\n          />\n        </div>\n      </div>\n      <Typography style={{ fontSize: '14px' }}>\n        {`Start: ${new Date(\n          pw.account.startTs.toNumber() * 1000,\n        ).toLocaleString()}`}\n      </Typography>\n      <Typography style={{ fontSize: '14px' }}>\n        {`End:   ${new Date(\n          pw.account.endTs.toNumber() * 1000,\n        ).toLocaleString()}`}\n      </Typography>\n      <Typography\n        color=\"textSecondary\"\n        style={{\n          fontSize: '14px',\n          overflow: 'hidden',\n        }}\n      >\n        {pw.account.pool.toString()}\n      </Typography>\n    </div>\n  );\n}\n\ntype PendingWithdrawalButtonProps = {\n  registrar: ProgramAccount<accounts.Registrar>;\n  pendingWithdrawal: ProgramAccount<accounts.PendingWithdrawal>;\n  member: ProgramAccount<accounts.MemberDeref>;\n};\n\nfunction PendingWithdrawalButton(props: PendingWithdrawalButtonProps) {\n  const { pendingWithdrawal, member, registrar } = props;\n  const { registryClient } = useWallet();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n\n  const endPendingWithdrawal = async () => {\n    enqueueSnackbar(`Completing redemption`, {\n      variant: 'info',\n    });\n    const { tx } = await registryClient.endStakeWithdrawal({\n      member: {\n        publicKey: member.publicKey,\n        account: member.account.member,\n      },\n      pendingWithdrawal,\n      registrar: registrar.account,\n    });\n\n    const updatedPendingWithdrawal = {\n      publicKey: pendingWithdrawal.publicKey,\n      account: {\n        ...pendingWithdrawal.account,\n        burned: true,\n      },\n    };\n    const updatedEntity = await registryClient.accounts.entity(\n      member.account.member.entity,\n    );\n    dispatch({\n      type: ActionType.RegistryUpdateEntity,\n      item: {\n        entity: {\n          publicKey: member.account.member.entity,\n          account: updatedEntity,\n        },\n      },\n    });\n    dispatch({\n      type: ActionType.RegistryUpdatePendingWithdrawal,\n      item: {\n        memberPublicKey: member!.publicKey,\n        pendingWithdrawal: updatedPendingWithdrawal,\n      },\n    });\n\n    closeSnackbar();\n    enqueueSnackbar(`Stake transfer completed`, {\n      variant: 'success',\n      action: <ViewTransactionOnExplorerButton signature={tx} />,\n    });\n  };\n\n  let disabled = false;\n  let color = skin.instance().ready;\n  let onClick = async () =>\n    endPendingWithdrawal().catch(err => {\n      console.error(`Error completing transfer: ${err.toString()}`);\n      enqueueSnackbar(\n        `Error completing transfer. Wait for the transfer's timelock to end and try again.`,\n        {\n          variant: 'error',\n        },\n      );\n    });\n  if (pendingWithdrawal.account.burned) {\n    disabled = true;\n    color = skin.instance().active;\n    onClick = async () => {};\n  }\n\n  if (pendingWithdrawal.account.endTs.toNumber() > Date.now() / 1000) {\n    disabled = true;\n    color = skin.instance().notReady;\n    onClick = async () => {};\n  }\n\n  return (\n    <div\n      onClick={onClick}\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n      }}\n    >\n      <IconButton disabled={disabled} style={{ width: '25px', height: '25px' }}>\n        <CheckCircleIcon style={{ color, fontSize: '20px' }} />\n      </IconButton>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport BN from 'bn.js';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport LockIcon from '@material-ui/icons/Lock';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport { PublicKey } from '@solana/web3.js';\nimport { Network, ProgramAccount } from '@project-serum/common';\nimport * as registry from '@project-serum/registry';\nimport { displaySrm, displayMsrm } from '../../utils/tokens';\n\ntype RewardsListProps = {\n  rewards: RewardListItemViewModel[];\n  network: Network;\n};\n\nexport default function RewardsList(props: RewardsListProps) {\n  const { rewards, network } = props;\n  return (\n    <List>\n      {rewards.length > 0 ? (\n        rewards.map(r => <RewardListItem network={network} rli={r} />)\n      ) : (\n        <ListItem>\n          <ListItemText primary={'No rewards found'} />\n        </ListItem>\n      )}\n    </List>\n  );\n}\n\ntype RewardListItemProps = {\n  rli: RewardListItemViewModel;\n  network: Network;\n};\n\nfunction RewardListItem(props: RewardListItemProps) {\n  const { rli, network } = props;\n\n  const rewardEvent = rli.reward.lockedAlloc ?? rli.reward.unlockedAlloc!;\n\n  const [open, setOpen] = useState(false);\n  let amountLabel = (() => {\n    if (rewardEvent.mint.equals(network.srm)) {\n      return `${displaySrm(rewardEvent.total)} SRM`;\n    } else if (rewardEvent.mint.equals(network.msrm)) {\n      return `${displayMsrm(rewardEvent.total)} MSRM`;\n    } else {\n      amountLabel += `${rewardEvent.mint}`;\n    }\n  })();\n  let lockedLabel = 'vendored';\n  let fromLabel = `${rewardEvent.pool.toString()} | ${rewardEvent.from.toString()} | ${\n    rli.cursor\n  }`;\n\n  return (\n    <>\n      <ListItem button onClick={() => setOpen(open => !open)}>\n        <LockIcon\n          style={{\n            visibility:\n              rli.reward.lockedAlloc === undefined ? 'hidden' : 'visible',\n            marginRight: '16px',\n          }}\n        />\n        <ListItemText\n          primary={\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                color: rli.needsClaim ? '#54a15e' : '',\n              }}\n            >\n              <div>{`${amountLabel} ${lockedLabel}`}</div>\n            </div>\n          }\n          secondary={fromLabel}\n        />\n        {open ? <ExpandLess /> : <ExpandMore />}\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        {rli.vendor === undefined ? (\n          <CircularProgress />\n        ) : (\n          <RewardListItemDetails vendor={rli.vendor} />\n        )}\n      </Collapse>\n    </>\n  );\n}\n\ntype RewardListItemDetailsProps = {\n  vendor: ProgramAccount<\n    | registry.accounts.LockedRewardVendor\n    | registry.accounts.UnlockedRewardVendor\n  >;\n};\n\nfunction RewardListItemDetails(props: RewardListItemDetailsProps) {\n  let { vendor } = props;\n\n  return (\n    <div\n      style={{\n        marginLeft: '56px',\n      }}\n    >\n      <Typography variant=\"h6\">Vendor</Typography>\n      <Typography>Address: {vendor.publicKey.toString()}</Typography>\n      <Typography>Vault: {vendor.account.vault.toString()}</Typography>\n      <Typography>\n        Pool token supply snapshot: {vendor.account.poolTokenSupply.toString()}\n      </Typography>\n      <Typography>\n        Expiry:{' '}\n        {new Date(\n          vendor.account.expiryTs.toNumber() * 1000,\n        ).toLocaleDateString()}\n      </Typography>\n      <Typography>\n        Expiry receiver: {vendor.account.expiryReceiver.toString()}\n      </Typography>\n    </div>\n  );\n}\n\nexport class RewardListItemViewModel {\n  constructor(\n    readonly reward: registry.accounts.RewardEvent,\n    readonly cursor: number,\n    readonly needsClaim: boolean,\n    readonly vendor?: ProgramAccount<\n      | registry.accounts.LockedRewardVendor\n      | registry.accounts.UnlockedRewardVendor\n    >,\n  ) {}\n\n  static fromMessage(\n    ctx: Context,\n    event: registry.accounts.RewardEvent,\n    idx: number,\n  ): RewardListItemViewModel {\n    let cursor = ctx.rewardEventQueue!.account.tailCursor() + idx;\n    let needsClaim = false;\n    let vendor = undefined;\n    if (event.lockedAlloc !== undefined || event.unlockedAlloc !== undefined) {\n      const eventInner = event.lockedAlloc\n        ? event.lockedAlloc\n        : event.unlockedAlloc!;\n      vendor = ctx.vendors.get(eventInner.vendor.toString());\n      if (vendor !== undefined && ctx.member !== undefined) {\n        const ownsPool =\n          ctx.member.account.balances.filter(\n            b => b.spt.amount.cmp(new BN(0)) === 1,\n          ).length > 0;\n        const ownsPoolMega =\n          ctx.member.account.balances.filter(\n            b => b.sptMega.amount.cmp(new BN(0)) === 1,\n          ).length > 0;\n        // The member must own shares of the reward's target pool.\n        const ownsPoolShares = eventInner.pool.equals(ctx.poolMint)\n          ? ownsPool\n          : ownsPoolMega;\n        const notYetClaimed = cursor >= ctx.member.account.member.rewardsCursor;\n        const isEligible =\n          ctx.member.account.member.lastStakeTs < vendor.account.startTs;\n\n        needsClaim = ownsPoolShares && notYetClaimed && isEligible;\n      }\n    }\n    return new RewardListItemViewModel(event, cursor, needsClaim, vendor);\n  }\n}\n\ntype Context = {\n  rewardEventQueue: ProgramAccount<registry.accounts.RewardEventQueue>;\n  member: ProgramAccount<registry.accounts.MemberDeref>;\n  network: Network;\n  vendors: Map<\n    string,\n    ProgramAccount<\n      | registry.accounts.LockedRewardVendor\n      | registry.accounts.UnlockedRewardVendor\n    >\n  >;\n  poolMint: PublicKey;\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport BN from 'bn.js';\nimport { useSnackbar } from 'notistack';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport { PublicKey } from '@solana/web3.js';\nimport { Network } from '@project-serum/common';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport { State as StoreState } from '../../store/reducer';\nimport OwnedTokenAccountsSelect from '../common/OwnedTokenAccountsSelect';\nimport * as notification from '../common/Notification';\nimport { fromDisplaySrm, fromDisplayMsrm } from '../../utils/tokens';\n\nexport default function DropRewardButton() {\n  const [showDialog, setShowDialog] = useState(false);\n  return (\n    <>\n      <div onClick={() => setShowDialog(true)}>\n        <Button variant=\"contained\" color=\"secondary\">\n          Drop Rewards\n        </Button>\n      </div>\n      <DropRewardDialog\n        open={showDialog}\n        onClose={() => setShowDialog(false)}\n      />\n    </>\n  );\n}\n\nenum PoolTabViewModel {\n  Srm,\n  Msrm,\n}\n\nenum RewardTypeViewModel {\n  Unlocked,\n  Locked,\n}\n\ntype DropRewardsDialogProps = {\n  open: boolean;\n  onClose: () => void;\n};\n\nfunction DropRewardDialog(props: DropRewardsDialogProps) {\n  const { open, onClose } = props;\n\n  const [poolTab, setPoolTab] = useState(PoolTabViewModel.Srm);\n  const [rewardTypeTab, setRewardTypeTab] = useState(\n    RewardTypeViewModel.Unlocked,\n  );\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"md\">\n      <DialogTitle>\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n          <Typography variant=\"h4\" component=\"h2\">\n            {'Drop Rewards'}\n          </Typography>\n        </div>\n      </DialogTitle>\n      <DialogContent>\n        <Tabs value={rewardTypeTab} onChange={(_e, t) => setRewardTypeTab(t)}>\n          <Tab value={RewardTypeViewModel.Unlocked} label=\"Unlocked\" />\n          <Tab value={RewardTypeViewModel.Locked} label=\"Locked\" />\n        </Tabs>\n        <Tabs\n          style={{ marginTop: '10px' }}\n          value={poolTab}\n          onChange={(_e, t) => setPoolTab(t)}\n        >\n          <Tab value={PoolTabViewModel.Srm} label=\"Pool\" />\n          <Tab value={PoolTabViewModel.Msrm} label=\"Mega Pool\" />\n        </Tabs>\n        {rewardTypeTab === RewardTypeViewModel.Unlocked && (\n          <DropUnlockedForm onClose={onClose} poolTab={poolTab} />\n        )}\n        {rewardTypeTab === RewardTypeViewModel.Locked && (\n          <DropLockedForm onClose={onClose} poolTab={poolTab} />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\ntype DropUnlockedFormProps = {\n  onClose: () => void;\n  poolTab: PoolTabViewModel;\n};\n\nfunction DropUnlockedForm(props: DropUnlockedFormProps) {\n  const { onClose, poolTab } = props;\n  const snack = useSnackbar();\n  const { registryClient } = useWallet();\n  const { network, poolMint, megaPoolMint } = useSelector(\n    (state: StoreState) => {\n      return {\n        network: state.common.network,\n        poolMint: state.registry.registrar!.account.poolMint,\n        megaPoolMint: state.registry.registrar!.account.poolMintMega,\n      };\n    },\n  );\n\n  const [lockedRewardDisplayAmount, setLockedRewardDisplayAmount] = useState<\n    null | number\n  >(null);\n  const [expiryTs, setExpiryTs] = useState<null | number>(null);\n  const [depositor, setDepositor] = useState<null | PublicKey>(null);\n  const [mintLabel, setMintLabel] = useState('srm');\n  const [mint, setMint] = useState<null | PublicKey>(network.srm);\n\n  const isSendEnabled =\n    mint !== null &&\n    depositor !== null &&\n    lockedRewardDisplayAmount !== null &&\n    expiryTs !== null;\n\n  const sendUnlockedReward = async () => {\n    await notification.withTx(\n      snack,\n      'Dropping unllocked reward...',\n      'Unlocked reward dropped',\n      async () => {\n        const lockedRewardAmount = mint!.equals(network.srm)\n          ? fromDisplaySrm(lockedRewardDisplayAmount!)\n          : fromDisplayMsrm(lockedRewardDisplayAmount!);\n        let { tx } = await registryClient.dropUnlockedReward({\n          total: lockedRewardAmount,\n          expiryTs: new BN(expiryTs as number),\n          depositor: depositor as PublicKey,\n          depositorMint: mint as PublicKey,\n          poolTokenMint:\n            poolTab === PoolTabViewModel.Srm ? poolMint : megaPoolMint,\n        });\n        return tx;\n      },\n    );\n    onClose();\n  };\n  const onClick = () => {\n    sendUnlockedReward().catch(err => {\n      snack.enqueueSnackbar(\n        `Error dropping unlocked reward: ${err.toString()}`,\n        {\n          variant: 'error',\n        },\n      );\n    });\n  };\n  return (\n    <DropVendorForm\n      network={network}\n      mint={mint}\n      setMint={setMint}\n      mintLabel={mintLabel}\n      setMintLabel={setMintLabel}\n      setDepositor={setDepositor}\n      setLockedRewardDisplayAmount={setLockedRewardDisplayAmount}\n      expiryTs={expiryTs}\n      setExpiryTs={setExpiryTs}\n      onCancel={onClose}\n      onClick={onClick}\n      isSendEnabled={isSendEnabled}\n    />\n  );\n}\n\ntype DropLockedFormProps = DropUnlockedFormProps;\n\nfunction DropLockedForm(props: DropLockedFormProps) {\n  const { onClose, poolTab } = props;\n  const snack = useSnackbar();\n  const { registryClient } = useWallet();\n  const { network, poolMint, megaPoolMint } = useSelector(\n    (state: StoreState) => {\n      return {\n        network: state.common.network,\n        poolMint: state.registry.registrar!.account.poolMint,\n        megaPoolMint: state.registry.registrar!.account.poolMintMega,\n      };\n    },\n  );\n\n  const [lockedRewardDisplayAmount, setLockedRewardDisplayAmount] = useState<\n    null | number\n  >(null);\n  const [endTs, setEndTs] = useState<null | number>(null);\n  const [expiryTs, setExpiryTs] = useState<null | number>(null);\n  const [depositor, setDepositor] = useState<null | PublicKey>(null);\n  const [mintLabel, setMintLabel] = useState('srm');\n  const [mint, setMint] = useState<null | PublicKey>(network.srm);\n  const [periodCount, setPeriodCount] = useState(7);\n\n  const isSendEnabled =\n    mint !== null &&\n    depositor !== null &&\n    lockedRewardDisplayAmount !== null &&\n    expiryTs !== null;\n\n  const sendLockedRewards = async () => {\n    await notification.withTx(\n      snack,\n      'Dropping locked reward...',\n      'Locked reward dropped',\n      async () => {\n        const lockedRewardAmount = mint!.equals(network.srm)\n          ? fromDisplaySrm(lockedRewardDisplayAmount!)\n          : fromDisplayMsrm(lockedRewardDisplayAmount!);\n        let { tx } = await registryClient.dropLockedReward({\n          total: lockedRewardAmount,\n          endTs: new BN(endTs as number),\n          expiryTs: new BN(expiryTs as number),\n          depositor: depositor as PublicKey,\n          depositorMint: mint as PublicKey,\n          poolTokenMint:\n            poolTab === PoolTabViewModel.Srm ? poolMint : megaPoolMint,\n          periodCount: new BN(periodCount),\n        });\n        return tx;\n      },\n    );\n    onClose();\n  };\n\n  const onClick = () => {\n    sendLockedRewards().catch(err => {\n      snack.enqueueSnackbar(`Error dropping locked reward: ${err.toString()}`, {\n        variant: 'error',\n      });\n    });\n  };\n\n  return (\n    <DropVendorForm\n      network={network}\n      mint={mint}\n      setMint={setMint}\n      mintLabel={mintLabel}\n      setMintLabel={setMintLabel}\n      setDepositor={setDepositor}\n      setLockedRewardDisplayAmount={setLockedRewardDisplayAmount}\n      setEndTs={setEndTs}\n      periodCount={periodCount}\n      setPeriodCount={setPeriodCount}\n      expiryTs={expiryTs}\n      setExpiryTs={setExpiryTs}\n      onCancel={onClose}\n      onClick={onClick}\n      isSendEnabled={isSendEnabled}\n    />\n  );\n}\n\ntype DropVendorFormProps = {\n  network: Network;\n  mint: PublicKey | null;\n  mintLabel: string;\n  setMintLabel: (s: string) => void;\n  setMint: (m: PublicKey) => void;\n  setDepositor: (pk: PublicKey) => void;\n  setLockedRewardDisplayAmount: (n: number) => void;\n  setEndTs?: (n: number) => void;\n  periodCount?: number;\n  setPeriodCount?: (p: number) => void;\n  expiryTs: number | null;\n  setExpiryTs: (ts: number) => void;\n  onCancel: () => void;\n  onClick: () => void;\n  isSendEnabled: boolean;\n};\n\nfunction DropVendorForm(props: DropVendorFormProps) {\n  const {\n    network,\n    mint,\n    setDepositor,\n    mintLabel,\n    setMintLabel,\n    setMint,\n    setLockedRewardDisplayAmount,\n    setEndTs,\n    periodCount,\n    setPeriodCount,\n    expiryTs,\n    setExpiryTs,\n    onCancel,\n    onClick,\n    isSendEnabled,\n  } = props;\n\n  return (\n    <>\n      <div>\n        <div style={{ display: 'flex', marginTop: '10px' }}>\n          <div style={{ flex: 1 }}>\n            <OwnedTokenAccountsSelect\n              style={{ height: '100%' }}\n              mint={mint}\n              onChange={(f: PublicKey) => setDepositor(f)}\n            />\n            <FormHelperText>Account to send from</FormHelperText>\n          </div>\n          <div>\n            <FormControl\n              variant=\"outlined\"\n              style={{ width: '200px', marginLeft: '10px', marginTop: '10px' }}\n            >\n              <InputLabel>Mint</InputLabel>\n              <Select\n                value={mintLabel}\n                onChange={e => {\n                  const m = e.target.value;\n                  setMintLabel(m as string);\n                  if (m === 'srm') {\n                    setMint(network.srm);\n                  } else if (m === 'msrm') {\n                    setMint(network.msrm);\n                  }\n                }}\n                label=\"Mint\"\n              >\n                <MenuItem value=\"srm\">SRM</MenuItem>\n                <MenuItem value=\"msrm\">MSRM</MenuItem>\n              </Select>\n            </FormControl>\n          </div>\n          <div>\n            <TextField\n              style={{ marginLeft: '10px', marginTop: '10px' }}\n              id=\"outlined-number\"\n              label=\"Amount\"\n              type=\"number\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n              variant=\"outlined\"\n              onChange={e =>\n                setLockedRewardDisplayAmount(\n                  parseFloat(e.target.value) as number,\n                )\n              }\n              InputProps={{ inputProps: { min: 0 } }}\n            />\n          </div>\n        </div>\n        {setEndTs !== undefined && (\n          <div style={{ display: 'flex', marginTop: '37px' }}>\n            <div style={{ flex: 1 }}>\n              <TextField\n                fullWidth\n                label=\"End date\"\n                type=\"datetime-local\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                onChange={e => {\n                  const d = new Date(e.target.value);\n                  setEndTs(d.getTime() / 1000);\n                }}\n              />\n              <FormHelperText>\n                Date the vesting account is fully vested\n              </FormHelperText>\n            </div>\n            <div>\n              <TextField\n                style={{ marginLeft: '10px', marginTop: '10px' }}\n                id=\"outlined-number\"\n                label=\"Period Count\"\n                type=\"number\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                variant=\"outlined\"\n                value={periodCount}\n                onChange={e =>\n                  setPeriodCount!(parseInt(e.target.value) as number)\n                }\n                InputProps={{ inputProps: { min: 1 } }}\n              />\n            </div>\n          </div>\n        )}\n        <div style={{ marginTop: '37px', display: 'flex' }}>\n          <div\n            style={{\n              flex: 1,\n              height: '100%',\n              marginRight: '10px',\n            }}\n          >\n            <TextField\n              fullWidth\n              label=\"Expiry date\"\n              type=\"datetime-local\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n              onChange={e => {\n                const d = new Date(e.target.value);\n                setExpiryTs(d.getTime() / 1000);\n              }}\n            />\n            <FormHelperText>\n              Date after which the account owner dropping rewards can withdraw\n              all unclaimed rewards.\n            </FormHelperText>\n          </div>\n          <div style={{ marginTop: '26px' }}>\n            <TextField\n              style={{ height: '100%' }}\n              disabled\n              placeholder=\"Expiry Unix timestamp\"\n              fullWidth\n              value={expiryTs}\n            />\n          </div>\n        </div>\n      </div>\n      <DialogActions>\n        <Button onClick={onCancel}>Cancel</Button>\n        <Button\n          onClick={onClick}\n          type=\"submit\"\n          color=\"primary\"\n          disabled={!isSendEnabled}\n        >\n          Send\n        </Button>\n      </DialogActions>\n    </>\n  );\n}\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport { PublicKey } from '@solana/web3.js';\nimport * as registry from '@project-serum/registry';\nimport { Network, ProgramAccount } from '@project-serum/common';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport * as notification from '../common/Notification';\nimport OwnedTokenAccountsSelect from '../common/OwnedTokenAccountsSelect';\nimport { RewardListItemViewModel } from './RewardsList';\nimport { ActionType } from '../../store/actions';\n\ntype ClaimRewardButtonProps = {\n  rli: RewardListItemViewModel;\n  member: ProgramAccount<registry.accounts.MemberDeref>;\n  network: Network;\n};\n\nexport default function ClaimRewardButton(props: ClaimRewardButtonProps) {\n  const { registryClient, lockupClient, wallet } = useWallet();\n  const { rli, member, network } = props;\n  const dispatch = useDispatch();\n  const snack = useSnackbar();\n  const [token, setToken] = useState<null | PublicKey>(null);\n\n  // On click.\n  const clickHandler = async (): Promise<void> => {\n    notification.withTx(\n      snack,\n      `Claiming vendor reward ${rli!.vendor!.publicKey.toString()}`,\n      'Reward claimed',\n      async () => {\n        if (rli!.reward.lockedAlloc) {\n          let vendor = await registryClient.accounts.lockedRewardVendor(\n            rli!.reward.lockedAlloc.vendor,\n          );\n          let vendorSigner = await registryClient.accounts.rewardVendorAuthority(\n            vendor.publicKey,\n            vendor.account.nonce,\n          );\n          const { tx } = await registryClient.claimLockedReward({\n            cursor: rli!.cursor,\n            member: {\n              publicKey: member.publicKey,\n              account: member.account.member,\n            },\n            vendor,\n            vendorSigner,\n            safe: network.safe,\n            lockupProgramId: network.lockupProgramId,\n            mint: rli!.reward.lockedAlloc!.mint,\n          });\n          // Refetch the vesting accounts to update the UI with the new reward.\n          const vestingAccounts = await lockupClient.accounts.allVestings(\n            wallet.publicKey,\n          );\n          dispatch({\n            type: ActionType.LockupSetVestings,\n            item: {\n              vestingAccounts,\n            },\n          });\n          return tx;\n        } else {\n          let vendor = await registryClient.accounts.unlockedRewardVendor(\n            rli!.reward.unlockedAlloc!.vendor,\n          );\n          let vendorSigner = await registryClient.accounts.rewardVendorAuthority(\n            vendor.publicKey,\n            vendor.account.nonce,\n          );\n          const { tx } = await registryClient.claimUnlockedReward({\n            cursor: rli!.cursor,\n            member: member.publicKey,\n            vendor,\n            vendorSigner,\n            token: token!,\n          });\n          return tx;\n        }\n      },\n    );\n  };\n\n  return (\n    <>\n      {rli.reward.unlockedAlloc && (\n        <div>\n          <OwnedTokenAccountsSelect\n            style={{ width: '400px', height: '100%' }}\n            mint={network.srm}\n            onChange={(f: PublicKey) => setToken(f)}\n          />\n        </div>\n      )}\n      <div\n        style={{ marginLeft: '10px', marginRight: '10px' }}\n        onClick={() =>\n          clickHandler().catch(err => {\n            snack.enqueueSnackbar(\n              `Error ending pending redemption: ${err.toString()}`,\n              {\n                variant: 'error',\n              },\n            );\n          })\n        }\n      >\n        <Button\n          disabled={rli.reward.unlockedAlloc && token === null}\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Claim Reward\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport * as registry from '@project-serum/registry';\nimport { RewardEvent } from '@project-serum/registry/dist/accounts';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport { State as StoreState } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport RewardsList, { RewardListItemViewModel } from './RewardsList';\nimport DropRewardButton from './DropRewardButton';\nimport ClaimRewardButton from './ClaimRewardButton';\n\nexport default function Rewards() {\n  const { registryClient } = useWallet();\n  const dispatch = useDispatch();\n  const snack = useSnackbar();\n  const ctx = useSelector((state: StoreState) => {\n    return {\n      rewardEventQueue: state.registry.rewardEventQueue!,\n      member: state.registry.member.data!,\n      network: state.common.network,\n      vendors: state.registry.vendors,\n      poolMint: state.registry.registrar!.account.poolMint!,\n    };\n  });\n  const { rewardEventQueue, network, member, vendors } = ctx;\n\n  // Load any reward vendor accounts that hasn't been loaded already.\n  useEffect(() => {\n    rewardEventQueue!.account.messages().forEach(m => {\n      loadVendorIfNeeded(m, vendors, dispatch, registryClient).catch(err =>\n        snack.enqueueSnackbar(\n          `Error fetching locked reward vendor: ${err.toString()}`,\n          {\n            variant: 'error',\n          },\n        ),\n      );\n    });\n  });\n\n  // All rewards to display.\n  const rewards = rewardEventQueue!.account\n    .messages()\n    .map((m, idx) => RewardListItemViewModel.fromMessage(ctx, m, idx))\n    .reverse();\n\n  // Next reward to claim.\n  let nextReward = rewards\n    .filter(r => r.needsClaim)\n    .sort((a, b) => (a.cursor < b.cursor ? -1 : a.cursor > b.cursor ? 1 : 0))\n    .shift();\n\n  return (\n    <div style={{ width: '100%', marginTop: '24px' }}>\n      <div\n        style={{\n          marginBottom: '10px',\n          display: 'flex',\n          justifyContent: 'space-between',\n        }}\n      >\n        <Typography style={{ fontWeight: 'bold', fontSize: '20px' }}>\n          Reward History\n        </Typography>\n        <div style={{ display: 'flex' }}>\n          {nextReward !== undefined && (\n            <ClaimRewardButton\n              rli={nextReward}\n              member={member}\n              network={network}\n            />\n          )}\n          <DropRewardButton />\n        </div>\n      </div>\n      <Paper>\n        <RewardsList rewards={rewards} network={network} />\n      </Paper>\n    </div>\n  );\n}\n\n// Fetch the vendor account and load it into the redux store.\nasync function loadVendorIfNeeded(\n  m: RewardEvent,\n  vendors: Map<string, any>,\n  dispatch: any,\n  registryClient: registry.Client,\n) {\n  if (m.lockedAlloc !== undefined) {\n    if (vendors.get(m.lockedAlloc.vendor.toString()) === undefined) {\n      const vendor = await registryClient.accounts.lockedRewardVendor(\n        m.lockedAlloc.vendor,\n      );\n      dispatch({\n        type: ActionType.RegistryCreateRewardVendor,\n        item: {\n          vendor,\n        },\n      });\n    }\n  } else if (m.unlockedAlloc !== undefined) {\n    if (vendors.get(m.unlockedAlloc.vendor.toString()) === undefined) {\n      const vendor = await registryClient.accounts.unlockedRewardVendor(\n        m.unlockedAlloc.vendor,\n      );\n      dispatch({\n        type: ActionType.RegistryCreateRewardVendor,\n        item: {\n          vendor,\n        },\n      });\n    }\n  }\n}\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport BN from 'bn.js';\nimport { PublicKey, SystemProgram } from '@solana/web3.js';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { State as StoreState } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport OwnedTokenAccountsSelect from '../../components/common/OwnedTokenAccountsSelect';\nimport { fromDisplaySrm, fromDisplayMsrm } from '../../utils/tokens';\nimport { ViewTransactionOnExplorerButton } from '../common/Notification';\n\nexport default function NewVestingButton() {\n  const [open, setOpen] = useState(false);\n  return (\n    <>\n      <div onClick={() => setOpen(true)}>\n        <Button variant=\"contained\" color=\"secondary\">\n          New\n        </Button>\n      </div>\n      <NewVestingDialog open={open} onClose={() => setOpen(false)} />\n    </>\n  );\n}\n\ntype NewVestingDialogProps = {\n  open: boolean;\n  onClose: () => void;\n};\n\nfunction NewVestingDialog(props: NewVestingDialogProps) {\n  const { open, onClose } = props;\n  const { network } = useSelector((state: StoreState) => {\n    return {\n      network: state.common.network,\n    };\n  });\n\n  const defaultEndDate = '2027-01-01T12:00';\n  const defaultEndTs = new Date(defaultEndDate).getTime() / 1000;\n\n  const [beneficiary, setBeneficiary] = useState('');\n  const isValidBeneficiary = (() => {\n    try {\n      new PublicKey(beneficiary);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  })();\n  const displayBeneficiaryError = !isValidBeneficiary && beneficiary !== '';\n\n  const [fromAccount, setFromAccount] = useState<null | PublicKey>(null);\n  const [timestamp, setTimestamp] = useState(defaultEndTs);\n  const [periodCount, setPeriodCount] = useState(7);\n  const [displayAmount, setDisplayAmount] = useState<null | number>(null);\n\n  const submitBtnEnabled =\n    fromAccount !== null && isValidBeneficiary && displayAmount !== null;\n\n  const { lockupClient } = useWallet();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const [mint, setMint] = useState<null | PublicKey>(null);\n  const [mintLabel, setMintLabel] = useState('');\n\n  const createVestingClickHandler = async () => {\n    setIsLoading(true);\n    try {\n      const beneficiaryPublicKey = new PublicKey(beneficiary);\n      const beneficiaryAccount = await lockupClient.provider.connection.getAccountInfo(\n        beneficiaryPublicKey,\n      );\n      if (beneficiaryAccount === null) {\n        enqueueSnackbar('Unable to validate given beneficiary.', {\n          variant: 'error',\n        });\n        setIsLoading(false);\n        return;\n      }\n      if (!beneficiaryAccount.owner.equals(SystemProgram.programId)) {\n        enqueueSnackbar(\n          'The beneficiary must be owned by the System Program.',\n          {\n            variant: 'error',\n          },\n        );\n        setIsLoading(false);\n        return;\n      }\n\n      enqueueSnackbar('Creating vesting acount...', {\n        variant: 'info',\n      });\n      let amount = mint!.equals(network.srm)\n        ? fromDisplaySrm(displayAmount!)\n        : fromDisplayMsrm(displayAmount!);\n      let { vesting, tx } = await lockupClient.createVesting({\n        beneficiary: beneficiaryPublicKey,\n        endTs: new BN(timestamp),\n        periodCount: new BN(periodCount),\n        depositAmount: amount,\n        depositor: fromAccount as PublicKey,\n      });\n      const vestingAccount = await lockupClient.accounts.vesting(vesting);\n      dispatch({\n        type: ActionType.LockupCreateVesting,\n        item: {\n          vesting: {\n            publicKey: vesting,\n            account: vestingAccount,\n          },\n        },\n      });\n      enqueueSnackbar(`Vesting account created`, {\n        variant: 'success',\n        action: <ViewTransactionOnExplorerButton signature={tx} />,\n      });\n      onClose();\n    } catch (err) {\n      enqueueSnackbar(`Error creating vesting account: ${err.toString()}`, {\n        variant: 'error',\n      });\n    }\n    setIsLoading(false);\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"md\">\n      <DialogTitle>\n        <Typography variant=\"h4\" component=\"h2\">\n          New Vesting Account\n        </Typography>\n      </DialogTitle>\n      <DialogContent>\n        <div>\n          {isLoading && (\n            <div\n              style={{\n                width: '40px',\n                marginLeft: 'auto',\n                marginRight: 'auto',\n                marginBottom: '24px',\n              }}\n            >\n              <CircularProgress\n                style={{ marginLeft: 'auto', marginRight: 'auto' }}\n              />\n            </div>\n          )}\n          <div>\n            <div style={{ display: 'flex', width: '100%' }}>\n              <div style={{ flex: 1 }}>\n                <FormControl fullWidth>\n                  <InputLabel>From</InputLabel>\n                  <OwnedTokenAccountsSelect\n                    mint={mint}\n                    onChange={(f: PublicKey) => setFromAccount(f)}\n                  />\n                  <FormHelperText>Token account to send from</FormHelperText>\n                </FormControl>\n              </div>\n              <div>\n                <FormControl\n                  variant=\"outlined\"\n                  style={{ width: '200px', marginLeft: '10px' }}\n                >\n                  <InputLabel>Mint</InputLabel>\n                  <Select\n                    value={mintLabel}\n                    onChange={e => {\n                      const m = e.target.value;\n                      setMintLabel(m as string);\n                      if (m === 'srm') {\n                        setMint(network.srm);\n                      } else if (m === 'msrm') {\n                        setMint(network.msrm);\n                      }\n                      // TODO: add a textfield for a custom mint.\n                    }}\n                    label=\"Mint\"\n                  >\n                    <MenuItem value=\"srm\">SRM</MenuItem>\n                    <MenuItem value=\"msrm\">MSRM</MenuItem>\n                  </Select>\n                </FormControl>\n              </div>\n            </div>\n          </div>\n          <div style={{ marginTop: '24px' }}>\n            <TextField\n              fullWidth\n              error={displayBeneficiaryError}\n              helperText={displayBeneficiaryError && 'Invalid beneficiary'}\n              label=\"Beneficiary\"\n              value={beneficiary}\n              onChange={e => setBeneficiary(e.target.value)}\n            />\n            <FormHelperText>Owner of the new vesting account</FormHelperText>\n          </div>\n          <div\n            style={{\n              marginTop: '24px',\n            }}\n          >\n            <TextField\n              fullWidth\n              label=\"Amount\"\n              type=\"number\"\n              value={displayAmount}\n              InputProps={{ inputProps: { min: 0 } }}\n              onChange={e => setDisplayAmount(parseFloat(e.target.value))}\n            />\n            <FormHelperText>\n              Amount to deposit into the vesting account\n            </FormHelperText>\n          </div>\n          <div\n            style={{\n              marginTop: '24px',\n              display: 'flex',\n            }}\n          >\n            <div style={{ flex: 1, marginRight: '10px' }}>\n              <TextField\n                fullWidth\n                label=\"End date\"\n                type=\"datetime-local\"\n                defaultValue={defaultEndDate}\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                onChange={e => {\n                  const d = new Date(e.target.value);\n                  setTimestamp(d.getTime() / 1000);\n                }}\n              />\n              <FormHelperText>Date when all tokens are vested</FormHelperText>\n            </div>\n            <div>\n              <TextField\n                disabled\n                fullWidth\n                label=\"Unix Timestamp\"\n                value={timestamp}\n              />\n            </div>\n          </div>\n          <div\n            style={{\n              marginTop: '24px',\n            }}\n          >\n            <FormControl fullWidth>\n              <TextField\n                id=\"outlined-number\"\n                label=\"Period Count\"\n                type=\"number\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                variant=\"outlined\"\n                value={periodCount}\n                onChange={e =>\n                  setPeriodCount(parseInt(e.target.value) as number)\n                }\n                InputProps={{ inputProps: { min: 1 } }}\n              />\n              <FormHelperText>Number of vesting periods</FormHelperText>\n            </FormControl>\n          </div>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button\n          variant=\"contained\"\n          type=\"submit\"\n          color=\"primary\"\n          disabled={!submitBtnEnabled || isLoading}\n          onClick={() => createVestingClickHandler()}\n        >\n          Create\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useSnackbar } from 'notistack';\nimport BN from 'bn.js';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slide from '@material-ui/core/Slide';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { PublicKey } from '@solana/web3.js';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport OwnedTokenAccountsSelect from '../../components/common/OwnedTokenAccountsSelect';\nimport { ViewTransactionOnExplorerButton } from '../../components/common/Notification';\nimport { State as StoreState } from '../../store/reducer';\nimport { ActionType } from '../../store/actions';\nimport EntityGallery, { EntityActivityLabel } from '../nodes/EntityGallery';\nimport Me from '../Me';\nimport Stake from '../Stake';\nimport Rewards from '../rewards/Rewards';\nimport Vestings from '../lockups/Vestings';\nimport VestingAccountsSelect from './VestingAccountsSelect';\nimport { fromDisplaySrm, fromDisplayMsrm } from '../../utils/tokens';\n\nenum TabModel {\n  Me,\n  Stake,\n  EntityGallery,\n  Rewards,\n  Lockup,\n}\n\nexport default function MyNode() {\n  const [tab, setTab] = useState(TabModel.Me);\n  return (\n    <div>\n      <MyNodeBanner setTab={setTab} />\n      <Container fixed maxWidth=\"md\" style={{ flex: 1, display: 'flex' }}>\n        {tab === TabModel.Me && <Me />}\n        {tab === TabModel.Stake && <Stake />}\n        {tab === TabModel.EntityGallery && <EntityGallery />}\n        {tab === TabModel.Rewards && <Rewards />}\n        {tab === TabModel.Lockup && <Vestings />}\n      </Container>\n    </div>\n  );\n}\n\ntype MyNodeBannerProps = {\n  setTab: (t: TabModel) => void;\n};\n\nfunction MyNodeBanner(props: MyNodeBannerProps) {\n  const [tab, setTab] = useState(TabModel.Me);\n  const { member, entity } = useSelector((state: StoreState) => {\n    const member = state.registry.member;\n    return {\n      registrar: state.registry.registrar,\n      member,\n      pendingWithdrawals: member.data\n        ? state.registry.pendingWithdrawals.get(\n            member.data.publicKey.toString(),\n          )\n        : [],\n      entity: state.registry.entities\n        .filter(\n          e =>\n            member.data &&\n            e.publicKey.equals(member.data!.account.member.entity),\n        )\n        .pop(),\n    };\n  });\n  const [showDepositDialog, setShowDepositDialog] = useState(false);\n  const [showWithdrawDialog, setShowWithdrawDialog] = useState(false);\n\n  return (\n    <>\n      <div\n        style={{\n          backgroundColor: '#fff',\n          paddingTop: '24px',\n          borderBottom: 'solid 1pt #ccc',\n        }}\n      >\n        <Container\n          fixed\n          maxWidth=\"md\"\n          style={{\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n          }}\n        >\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <div>\n              <Typography variant=\"h4\" style={{ marginBottom: '10px' }}>\n                My Node\n              </Typography>\n            </div>\n            {entity && (\n              <div\n                style={{\n                  display: 'flex',\n                  justifyContent: 'center',\n                  flexDirection: 'column',\n                }}\n              >\n                <EntityActivityLabel\n                  noBubble={true}\n                  textStyle={{ fontSize: '16px' }}\n                  entity={entity}\n                />\n              </div>\n            )}\n          </div>\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n            }}\n          >\n            <div>\n              <Typography>\n                {member.data !== undefined\n                  ? member.data.account.member.entity.toString()\n                  : 'Account not found. Please create a stake account.'}\n              </Typography>\n            </div>\n            <div>\n              <div>\n                <Button\n                  disabled={member.data === undefined}\n                  onClick={() => setShowDepositDialog(true)}\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  style={{ marginRight: '10px' }}\n                >\n                  <ArrowDownwardIcon style={{ fontSize: '20px' }} />\n                  <Typography style={{ marginLeft: '5px', marginRight: '5px' }}>\n                    Deposit\n                  </Typography>\n                </Button>\n                <Button\n                  disabled={member.data === undefined}\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={() => setShowWithdrawDialog(true)}\n                >\n                  <ArrowUpwardIcon style={{ fontSize: '20px' }} />\n                  <Typography style={{ marginLeft: '5px', marginRight: '5px' }}>\n                    Withdraw\n                  </Typography>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </Container>\n        <div\n          style={{\n            maxWidth: '960px',\n            marginLeft: 'auto',\n            marginRight: 'auto',\n            paddingLeft: '24px',\n            paddingRight: '24px',\n            marginTop: '10px',\n          }}\n        >\n          <Tabs\n            value={tab}\n            onChange={(_e, t) => {\n              setTab(t);\n              props.setTab(t);\n            }}\n          >\n            <Tab value={TabModel.Me} label=\"Me\" />\n            <Tab value={TabModel.Stake} label=\"Stake\" />\n            <Tab value={TabModel.EntityGallery} label=\"Nodes\" />\n            <Tab value={TabModel.Rewards} label=\"Rewards\" />\n            <Tab value={TabModel.Lockup} label=\"Lockups\" />\n          </Tabs>\n        </div>\n      </div>\n      {member !== undefined && (\n        <>\n          <DepositDialog\n            open={showDepositDialog}\n            onClose={() => setShowDepositDialog(false)}\n          />\n          <WithdrawDialog\n            open={showWithdrawDialog}\n            onClose={() => setShowWithdrawDialog(false)}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\ntype DepositDialogProps = {\n  open: boolean;\n  onClose: () => void;\n};\n\ntype Coin = 'srm' | 'lsrm' | 'msrm' | 'lmsrm';\n\nfunction DepositDialog(props: DepositDialogProps) {\n  const { open, onClose } = props;\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const { registryClient, lockupClient } = useWallet();\n  const dispatch = useDispatch();\n  const { safe, registrar, member } = useSelector((state: StoreState) => {\n    return {\n      registrar: state.registry.registrar!,\n      safe: state.lockup.safe!,\n      member: state.registry.member!,\n    };\n  });\n  return (\n    <TransferDialog\n      deposit={true}\n      title={'Deposit'}\n      contextText={'Select the amount and coin you want to deposit'}\n      open={open}\n      onClose={onClose}\n      onTransfer={async (\n        from: PublicKey,\n        displayAmount: number,\n        coin: Coin,\n        isLocked: boolean,\n      ) => {\n        const amount =\n          coin === 'srm' || coin === 'lsrm'\n            ? fromDisplaySrm(displayAmount)\n            : fromDisplayMsrm(displayAmount);\n        enqueueSnackbar(\n          `Depositing ${amount} ${coin} from ${from.toString()}`,\n          {\n            variant: 'info',\n          },\n        );\n        const tx = await (async () => {\n          let vault =\n            coin === 'srm' || coin === 'lsrm'\n              ? member.data!.account.member.balances[isLocked ? 1 : 0].vault\n              : member.data!.account.member.balances[isLocked ? 1 : 0]\n                  .vaultMega;\n          if (isLocked) {\n            const { tx } = await registryClient.depositLocked({\n              amount: new BN(amount),\n              vesting: from,\n              safe: safe.account,\n              lockupClient,\n              registrar: registrar.account,\n              entity: member.data!.account.member.entity,\n              member: member.data!.publicKey,\n              vault,\n            });\n            const vesting = await lockupClient.accounts.vesting(from);\n            dispatch({\n              type: ActionType.LockupUpdateVesting,\n              item: {\n                vesting: {\n                  publicKey: from,\n                  account: vesting,\n                },\n              },\n            });\n            return tx;\n          } else {\n            const { tx } = await registryClient.deposit({\n              member: member.data!.publicKey,\n              depositor: from,\n              amount: new BN(amount),\n              entity: member.data!.account.member.entity,\n              vault,\n              vaultOwner: await registryClient.accounts.vaultAuthority(\n                registryClient.programId,\n                registryClient.registrar,\n                registrar.account,\n              ),\n            });\n            return tx;\n          }\n        })();\n        const newEntity = await registryClient.accounts.entity(\n          member.data!.account.member.entity,\n        );\n        dispatch({\n          type: ActionType.RegistryUpdateEntity,\n          item: {\n            entity: {\n              publicKey: member.data!.account.member.entity,\n              account: newEntity,\n            },\n          },\n        });\n        closeSnackbar();\n        enqueueSnackbar(`Deposit complete`, {\n          variant: 'success',\n          action: <ViewTransactionOnExplorerButton signature={tx} />,\n        });\n        onClose();\n      }}\n    />\n  );\n}\n\ntype WithdrawDialogProps = DepositDialogProps;\n\nfunction WithdrawDialog(props: WithdrawDialogProps) {\n  const { open, onClose } = props;\n  const { registryClient, lockupClient } = useWallet();\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const { safe, registrar, member } = useSelector((state: StoreState) => {\n    return {\n      registrar: state.registry.registrar!,\n      safe: state.lockup.safe!,\n      member: state.registry.member!,\n    };\n  });\n  return (\n    <TransferDialog\n      title={'Withdraw'}\n      contextText={'Select the amount and coin you want to withdraw'}\n      open={open}\n      onClose={onClose}\n      onTransfer={async (\n        from: PublicKey,\n        displayAmount: number,\n        coin: Coin,\n        isLocked: boolean,\n      ) => {\n        const amount =\n          coin === 'srm' || coin === 'lsrm'\n            ? fromDisplaySrm(displayAmount)\n            : fromDisplayMsrm(displayAmount);\n        enqueueSnackbar(`Withdrawing ${amount} ${coin} to ${from.toString()}`, {\n          variant: 'info',\n        });\n        const tx = await (async () => {\n          let vault =\n            coin === 'srm' || coin === 'lsrm'\n              ? member.data!.account.member.balances[isLocked ? 1 : 0].vault\n              : member.data!.account.member.balances[isLocked ? 1 : 0]\n                  .vaultMega;\n          if (isLocked) {\n            const { tx } = await registryClient.withdrawLocked({\n              amount: new BN(amount),\n              vesting: from,\n              safe: safe.account,\n              lockupClient,\n              registrar: registrar.account,\n              entity: member.data!.account.member.entity,\n              member: member.data!.publicKey,\n              vault,\n            });\n            const vesting = await lockupClient.accounts.vesting(from);\n            dispatch({\n              type: ActionType.LockupUpdateVesting,\n              item: {\n                vesting: {\n                  publicKey: from,\n                  account: vesting,\n                },\n              },\n            });\n            return tx;\n          } else {\n            const { tx } = await registryClient.withdraw({\n              member: member.data!.publicKey,\n              depositor: from,\n              amount: new BN(amount),\n              entity: member.data!.account.member.entity,\n              vault,\n              vaultOwner: await registryClient.accounts.vaultAuthority(\n                registryClient.programId,\n                registryClient.registrar,\n                registrar.account,\n              ),\n            });\n            return tx;\n          }\n        })();\n        const newEntity = await registryClient.accounts.entity(\n          member.data!.account.member.entity,\n        );\n        dispatch({\n          type: ActionType.RegistryUpdateEntity,\n          item: {\n            entity: {\n              publicKey: member.data!.account.member.entity,\n              account: newEntity,\n            },\n          },\n        });\n        closeSnackbar();\n        enqueueSnackbar(`Withdraw complete`, {\n          variant: 'success',\n          action: <ViewTransactionOnExplorerButton signature={tx} />,\n        });\n        onClose();\n      }}\n    />\n  );\n}\n\ntype TransferDialogProps = {\n  title: string;\n  contextText: string;\n  open: boolean;\n  deposit?: boolean;\n  onClose: () => void;\n  onTransfer: (\n    from: PublicKey,\n    amount: number,\n    coin: Coin,\n    isLocked: boolean,\n  ) => Promise<void>;\n};\n\nfunction TransferDialog(props: TransferDialogProps) {\n  const { srmMint, msrmMint } = useSelector((state: StoreState) => {\n    const network = state.common.network;\n    return {\n      srmMint: network.srm,\n      msrmMint: network.msrm,\n      member: state.registry.member,\n    };\n  });\n  const { enqueueSnackbar } = useSnackbar();\n  const { open, onClose, onTransfer, title, contextText, deposit } = props;\n  const [displayAmount, setDisplayAmount] = useState<null | number>(null);\n  const [coin, setCoin] = useState<null | Coin>(null);\n  const [from, setFrom] = useState<null | PublicKey>(null);\n  const [vesting, setVesting] = useState<null | PublicKey>(null);\n  const [maxDisplayAmount, setMaxDisplayAmount] = useState<null | number>(null);\n  const mint = !coin\n    ? undefined\n    : coin === 'srm' || coin === 'lsrm'\n    ? srmMint\n    : msrmMint;\n  const isLocked = coin === 'lsrm' || coin === 'lmsrm';\n  const submitBtnDisabled =\n    (isLocked ? !vesting : !from) ||\n    !displayAmount ||\n    !coin ||\n    !maxDisplayAmount ||\n    displayAmount > maxDisplayAmount;\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={onClose}\n        fullWidth\n      >\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>\n          <div style={{ display: 'flex' }}>\n            <div style={{ flex: 1 }}>\n              <TextField\n                style={{ width: '100%' }}\n                id=\"outlined-number\"\n                label=\"Amount\"\n                type=\"number\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                variant=\"outlined\"\n                onChange={e =>\n                  setDisplayAmount(parseFloat(e.target.value) as number)\n                }\n                InputProps={{\n                  inputProps: { min: 0, max: maxDisplayAmount ?? 0 },\n                }}\n              />\n              <FormHelperText>{contextText}</FormHelperText>\n            </div>\n            <div>\n              <FormControl\n                variant=\"outlined\"\n                style={{ minWidth: '100px', marginLeft: '10px' }}\n              >\n                <InputLabel>Coin</InputLabel>\n                <Select\n                  value={coin}\n                  onChange={e => setCoin(e.target.value as Coin)}\n                  label=\"Coin\"\n                >\n                  <MenuItem value=\"srm\">SRM</MenuItem>\n                  <MenuItem value=\"msrm\">MSRM</MenuItem>\n                  <MenuItem value=\"lsrm\">Locked SRM</MenuItem>\n                  <MenuItem value=\"lmsrm\">Locked MSRM</MenuItem>\n                </Select>\n              </FormControl>\n            </div>\n          </div>\n          <FormControl fullWidth>\n            {!isLocked ? (\n              <>\n                <OwnedTokenAccountsSelect\n                  variant=\"outlined\"\n                  mint={mint}\n                  decimals={!mint ? undefined : mint.equals(srmMint) ? 6 : 0}\n                  onChange={(f: PublicKey, _maxDisplayAmount: BN) => {\n                    setFrom(f);\n                    // TODO: set an actual limit for the withdrawal UI (i.e.\n                    //       what's currently in the vault). Currently not\n                    //       done since we dont' have websocket connections\n                    //       for each of the users accounts. However we\n                    //       still use the \"max\" amount for display vesting\n                    //       accounts.\n                    setMaxDisplayAmount(2 ** 53);\n                  }}\n                />\n                <FormHelperText>\n                  Token account to transfer to/from\n                </FormHelperText>\n              </>\n            ) : (\n              <>\n                <VestingAccountsSelect\n                  variant=\"outlined\"\n                  mint={mint}\n                  decimals={!mint ? undefined : mint.equals(srmMint) ? 6 : 0}\n                  deposit={deposit}\n                  onChange={(v: PublicKey, maxDisplayAmount: BN) => {\n                    setVesting(v);\n                    setMaxDisplayAmount(maxDisplayAmount.toNumber());\n                  }}\n                />\n                <FormHelperText>\n                  Vesting account to transfer to/from\n                </FormHelperText>\n              </>\n            )}\n          </FormControl>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button\n            //@ts-ignore\n            onClick={() => {\n              onTransfer(\n                isLocked ? vesting! : from!,\n                displayAmount!,\n                coin!,\n                isLocked,\n              ).catch(err => {\n                enqueueSnackbar(`Error transferring funds: ${err.toString()}`, {\n                  variant: 'error',\n                });\n              });\n            }}\n            color=\"primary\"\n            disabled={submitBtnDisabled}\n          >\n            {title}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & { children?: React.ReactElement<any, any> },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n","import React, { useState, useEffect } from 'react';\nimport ChartistGraph from 'react-chartist';\nimport { useDispatch } from 'react-redux';\nimport BN from 'bn.js';\nimport { useSnackbar } from 'notistack';\nimport { FixedScaleAxis, IChartOptions, Interpolation } from 'chartist';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Link from '@material-ui/core/Link';\nimport { accounts } from '@project-serum/lockup';\nimport { Network } from '@project-serum/common';\nimport { PublicKey } from '@solana/web3.js';\nimport { ProgramAccount } from '../../store/reducer';\nimport { useWallet } from '../common/WalletProvider';\nimport OwnedTokenAccountsSelect from '../../components/common/OwnedTokenAccountsSelect';\nimport { withTx } from '../../components/common/Notification';\nimport { ActionType } from '../../store/actions';\nimport { displaySrm, displayMsrm } from '../../utils/tokens';\n\ntype VestingAccountCardProps = {\n  network: Network;\n  vesting: ProgramAccount<accounts.Vesting>;\n};\n\nexport default function VestingAccountCard(props: VestingAccountCardProps) {\n  const { vesting, network } = props;\n  const { lockupClient } = useWallet();\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n\n  const displayFn = vesting.account.mint.equals(network.srm)\n    ? displaySrm\n    : vesting.account.mint.equals(network.msrm)\n    ? displayMsrm\n    : (k: BN) => k.toString();\n\n  const outstandingLabel = vesting.account.mint.equals(network.srm)\n    ? `${displaySrm(vesting.account.outstanding)} SRM`\n    : vesting.account.mint.equals(network.msrm)\n    ? `${displayMsrm(vesting.account.outstanding)} MSRM`\n    : vesting.account.mint.toString();\n\n  const startTs = vesting.account.startTs;\n  const endTs = vesting.account.endTs;\n\n  const tsOverflow = endTs.sub(startTs).mod(vesting.account.periodCount);\n  const shiftedStartTs = startTs.sub(tsOverflow);\n\n  const period = endTs.sub(shiftedStartTs).div(vesting.account.periodCount);\n\n  // Make the horizontal axis evenly spaced.\n  //\n  // Vesting dates assuming we stretch the start date back in time (so that the\n  // periods are of even length).\n  const vestingDates = [\n    ...Array(vesting.account.periodCount.toNumber() + 1),\n  ].map((_, idx) => {\n    return formatDate(\n      new Date((shiftedStartTs.toNumber() + idx * period.toNumber()) * 1000),\n    );\n  });\n  // Now push the start window forward to the real start date, making the first period shorter.\n  vestingDates[0] = formatDate(new Date(startTs.toNumber() * 1000));\n\n  // Now do the same thing on the vertical axis.\n  const rewardOverflow = vesting.account.startBalance.mod(\n    vesting.account.periodCount,\n  );\n  const rewardPerPeriod = vesting.account.startBalance\n    .sub(rewardOverflow)\n    .div(vesting.account.periodCount)\n    .toNumber();\n  const cumulativeVesting = [...Array(vestingDates.length)].map(() => 0);\n  cumulativeVesting[1] = rewardPerPeriod + rewardOverflow.toNumber();\n  for (let k = 2; k < cumulativeVesting.length; k += 1) {\n    cumulativeVesting[k] = cumulativeVesting[k - 1] + rewardPerPeriod;\n  }\n\n  const startLabel = formatDate(\n    new Date(vesting.account.startTs.toNumber() * 1000),\n  );\n  const endLabel = formatDate(\n    new Date(vesting.account.endTs.toNumber() * 1000),\n  );\n  const urlSuffix = `?cluster=${network.explorerClusterSuffix}`;\n\n  const [\n    availableForWithdrawal,\n    setAvailableForWithdrawal,\n  ] = useState<null | BN>(null);\n  const [withdrawalAccount, setWithdrawalAccount] = useState<null | PublicKey>(\n    null,\n  );\n\n  useEffect(() => {\n    lockupClient.accounts\n      .availableForWithdrawal(vesting.publicKey)\n      .then(amount => {\n        setAvailableForWithdrawal(amount);\n      })\n      .catch(err => {\n        enqueueSnackbar(\n          `Error fetching available for withdrawal: ${err.toString()}`,\n          {\n            variant: 'error',\n          },\n        );\n      });\n  }, [lockupClient.accounts, vesting, enqueueSnackbar]);\n  const snack = useSnackbar();\n\n  const withdrawEnabled =\n    withdrawalAccount !== null &&\n    availableForWithdrawal !== null &&\n    availableForWithdrawal.gtn(0);\n  const withdraw = async () => {\n    await withTx(\n      snack,\n      'Withdrawing locked tokens',\n      'Tokens unlocked',\n      async () => {\n        const { tx } = await lockupClient.withdraw({\n          amount: availableForWithdrawal!,\n          vesting: vesting.publicKey,\n          tokenAccount: withdrawalAccount!,\n        });\n        const newVesting = await lockupClient.accounts.vesting(\n          vesting.publicKey,\n        );\n        dispatch({\n          type: ActionType.LockupUpdateVesting,\n          item: {\n            vesting: {\n              publicKey: vesting.publicKey,\n              account: newVesting,\n            },\n          },\n        });\n        return tx;\n      },\n    );\n  };\n\n  return (\n    <Card\n      key={vesting.publicKey.toString()}\n      style={{\n        marginTop: '24px',\n      }}\n    >\n      <CardContent>\n        <ListItem>\n          <div\n            style={{\n              width: '100%',\n              display: 'flex',\n              justifyContent: 'space-between',\n            }}\n          >\n            <ListItemText\n              primary={\n                <Link\n                  href={\n                    `https://explorer.solana.com/account/${vesting.publicKey.toBase58()}` +\n                    urlSuffix\n                  }\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                >\n                  {vesting.publicKey.toString()}\n                </Link>\n              }\n              secondary={`${startLabel}, ${endLabel} | ${vesting.account.periodCount.toNumber()} periods`}\n            />\n            <div\n              style={{\n                marginTop: '6px',\n                color: 'rgba(0, 0, 0, 0.54)',\n                display: 'flex',\n                justifyContent: 'space-between',\n                flexDirection: 'column',\n              }}\n            >\n              <Typography variant=\"body1\">{outstandingLabel}</Typography>\n            </div>\n          </div>\n        </ListItem>\n        <ChartistGraph\n          data={{\n            labels: vestingDates,\n            series: [cumulativeVesting],\n          }}\n          options={\n            {\n              axisY: {\n                type: FixedScaleAxis,\n                low: 0,\n                high: cumulativeVesting[cumulativeVesting.length - 1],\n                ticks: cumulativeVesting,\n              },\n              axisX: {\n                ticks: vestingDates,\n              },\n              lineSmooth: Interpolation.step(),\n              height: 400,\n            } as IChartOptions\n          }\n          type={'Line'}\n        />\n        <div>\n          <Typography>\n            Available for withdrawal:{' '}\n            {availableForWithdrawal === null ? (\n              <CircularProgress />\n            ) : (\n              displayFn(availableForWithdrawal)\n            )}\n          </Typography>\n          <Typography>\n            Locked outstanding: {displayFn(vesting.account.outstanding)}\n          </Typography>\n          <Typography>\n            Current balance:{' '}\n            {displayFn(\n              vesting.account.outstanding.sub(vesting.account.whitelistOwned),\n            )}\n          </Typography>\n          <Typography>\n            Initial lockup: {displayFn(vesting.account.startBalance)}\n          </Typography>\n          <Typography>\n            Whitelist owned: {displayFn(vesting.account.whitelistOwned)}\n          </Typography>\n          <Typography>Vault: {vesting.account.vault.toString()}</Typography>\n          <Typography>\n            Period count: {vesting.account.periodCount.toString()}\n          </Typography>\n          <Typography>\n            Start timestamp: {vesting.account.startTs.toString()}\n          </Typography>\n          <Typography>\n            End timestamp: {vesting.account.endTs.toString()}\n          </Typography>\n          <div style={{ marginTop: '10px' }}>\n            <OwnedTokenAccountsSelect\n              mint={vesting.account.mint}\n              onChange={(f: PublicKey) => setWithdrawalAccount(f)}\n            />\n            <div style={{ marginTop: '10px' }}>\n              <Button\n                color=\"primary\"\n                disabled={!withdrawEnabled}\n                variant=\"contained\"\n                onClick={() =>\n                  withdraw().catch(err => {\n                    enqueueSnackbar(\n                      `Error withdrawing from vesting account: ${err.toString()}`,\n                      {\n                        variant: 'error',\n                      },\n                    );\n                  })\n                }\n              >\n                Unlock tokens\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'row-reverse',\n          marginBottom: '16px',\n          marginRight: '16px',\n        }}\n      >\n        <Typography color=\"textSecondary\">\n          Granted by {vesting.account.grantor.toString()}\n        </Typography>\n      </div>\n    </Card>\n  );\n}\n\n// TODO: locale format without minutes, hours, seconds?\nfunction formatDate(d: Date): string {\n  return `${d.getMonth() + 1}/${d.getDate()}/${d.getFullYear()}`;\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport { useWallet } from '../../components/common/WalletProvider';\nimport { State as StoreState } from '../../store/reducer';\nimport NewVestingButton from './NewVesting';\nimport VestingAccountCard from './VestingAccountCard';\n\nexport default function Vestings() {\n  const { wallet } = useWallet();\n  const { vestingAccounts, network } = useSelector((state: StoreState) => {\n    return {\n      vestingAccounts: state.lockup.vestings,\n      network: state.common.network,\n    };\n  });\n  return (\n    <Container fixed maxWidth=\"md\" style={{ flex: 1 }}>\n      <div style={{ marginTop: '24px', marginBottom: '24px' }}>\n        <link\n          rel=\"stylesheet\"\n          href=\"//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\"\n        />\n        <script src=\"//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\"></script>\n        {wallet.publicKey && (\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              marginBottom: '24px',\n            }}\n          >\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'center',\n                flexDirection: 'column',\n              }}\n            >\n              <Typography\n                style={{\n                  fontSize: '20px',\n                  fontWeight: 'bold',\n                }}\n              >\n                My Vesting Accounts\n              </Typography>\n            </div>\n            <div>\n              <NewVestingButton />\n            </div>\n          </div>\n        )}\n        <List disablePadding>\n          {vestingAccounts.map(v => (\n            <VestingAccountCard network={network} vesting={v} />\n          ))}\n          {vestingAccounts.length === 0 && (\n            <Card\n              style={{\n                marginTop: '24px',\n              }}\n            >\n              <CardContent>\n                <ListItem>\n                  <div\n                    style={{\n                      width: '100%',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                    }}\n                  >\n                    <Typography color=\"textSecondary\" variant=\"h6\">\n                      No vesting accounts found\n                    </Typography>\n                  </div>\n                </ListItem>\n              </CardContent>\n            </Card>\n          )}\n        </List>\n      </div>\n    </Container>\n  );\n}\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport BN from 'bn.js';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PublicKey } from '@solana/web3.js';\nimport * as lockup from '@project-serum/lockup';\nimport { ProgramAccount } from '@project-serum/common';\nimport { State as StoreState } from '../../store/reducer';\nimport { toDisplay } from '../../utils/tokens';\n\ntype Props = {\n  style?: any;\n  mint?: PublicKey | null;\n  decimals?: number;\n  variant?: 'outlined' | 'standard';\n  onChange: (from: PublicKey, maxAmount: BN) => void;\n  deposit?: boolean;\n};\n\nexport default function VestingAccountsSelect(p: Props) {\n  const { mint, decimals, variant, onChange, style, deposit } = p;\n  const vestings = useSelector((state: StoreState) => {\n    if (!mint) {\n      return [];\n    }\n    return state.lockup.vestings.filter(v => v.account.mint.equals(mint));\n  });\n  const [fromAccount, setFromAccount] = useState('');\n  return (\n    <Select\n      style={style}\n      variant={variant}\n      fullWidth\n      value={fromAccount}\n      onChange={e => {\n        const pk = e.target.value as string;\n        setFromAccount(pk);\n        const pubkey = new PublicKey(pk);\n        const v = vestings.filter(v => v.publicKey.equals(pubkey)).pop();\n        onChange(pubkey, availableAmount(v!, deposit));\n      }}\n    >\n      {vestings.length === 0 ? (\n        <MenuItem value={''}>No vesting accounts found</MenuItem>\n      ) : (\n        vestings.map(v => {\n          return (\n            <MenuItem value={v.publicKey.toString()}>\n              <div\n                style={{\n                  width: '100%',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                }}\n              >\n                <div>{`${v.publicKey.toString()}`}</div>\n                <div style={{ float: 'right', color: '#ccc' }}>{`${toDisplay(\n                  availableAmount(v, deposit),\n                  decimals!,\n                )}`}</div>\n              </div>\n            </MenuItem>\n          );\n        })\n      )}\n    </Select>\n  );\n}\n\nfunction availableAmount(\n  v: ProgramAccount<lockup.accounts.Vesting>,\n  deposit?: boolean,\n): BN {\n  return deposit\n    ? v.account.outstanding.sub(v.account.whitelistOwned)\n    : v.account.whitelistOwned;\n}\n","import React from 'react';\nimport MyNode from '../components/common/MyNode';\n\nexport default function MyNodePage() {\n  return <MyNode />;\n}\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { HashRouter, Route } from 'react-router-dom';\nimport { SnackbarProvider } from 'notistack';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { unstable_createMuiStrictModeTheme as createMuiTheme } from '@material-ui/core/styles';\nimport { store } from './store';\nimport WalletProvider from './components/common/WalletProvider';\nimport BootstrapProvider from './components/common/BootstrapProvider';\nimport Layout from './components/common/Layout';\nimport MyNodePage from './pages/MyNode';\n\nfunction App() {\n  const theme = createMuiTheme({\n    palette: {\n      background: {\n        default: 'rgb(255,255,255)',\n      },\n    },\n    typography: {\n      fontFamily: ['Source Sans Pro', 'sans-serif'].join(','),\n    },\n    overrides: {},\n  });\n  return (\n    <Provider store={store}>\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <SnackbarProvider maxSnack={5} autoHideDuration={8000}>\n          <WalletProvider>\n            <BootstrapProvider>\n              <HashRouter basename={'/'}>\n                <Layout>\n                  <Route exact path=\"/\" component={MyNodePage} />\n                </Layout>\n              </HashRouter>\n            </BootstrapProvider>\n          </WalletProvider>\n        </SnackbarProvider>\n      </MuiThemeProvider>\n    </Provider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.closeAccount = exports.mintTo = exports.setAuthority = exports.revoke = exports.approve = exports.transfer = exports.initializeAccount = exports.initializeMint = exports.decodeTokenInstructionData = exports.SRM_DECIMALS = exports.SRM_MINT = exports.MSRM_DECIMALS = exports.MSRM_MINT = exports.WRAPPED_SOL_MINT = exports.TOKEN_PROGRAM_ID = exports.CLOSE_ACCOUNT_OWNER_INDEX = exports.CLOSE_ACCOUNT_DESTINATION_INDEX = exports.CLOSE_ACCOUNT_SOURCE_INDEX = exports.TRANSFER_OWNER_INDEX = exports.TRANSFER_DESTINATION_INDEX = exports.TRANSFER_SOURCE_INDEX = exports.INITIALIZE_ACCOUNT_OWNER_INDEX = exports.INITIALIZE_ACCOUNT_MINT_INDEX = exports.INITIALIZE_ACCOUNT_ACCOUNT_INDEX = void 0;\nconst BufferLayout = __importStar(require(\"buffer-layout\"));\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst layout_1 = require(\"./layout\");\n// NOTE: Update these if the position of arguments for the initializeAccount instruction changes\nexports.INITIALIZE_ACCOUNT_ACCOUNT_INDEX = 0;\nexports.INITIALIZE_ACCOUNT_MINT_INDEX = 1;\nexports.INITIALIZE_ACCOUNT_OWNER_INDEX = 2;\n// NOTE: Update these if the position of arguments for the transfer instruction changes\nexports.TRANSFER_SOURCE_INDEX = 0;\nexports.TRANSFER_DESTINATION_INDEX = 1;\nexports.TRANSFER_OWNER_INDEX = 2;\n// NOTE: Update these if the position of arguments for the closeAccount instruction changes\nexports.CLOSE_ACCOUNT_SOURCE_INDEX = 0;\nexports.CLOSE_ACCOUNT_DESTINATION_INDEX = 1;\nexports.CLOSE_ACCOUNT_OWNER_INDEX = 2;\nexports.TOKEN_PROGRAM_ID = new web3_js_1.PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');\nexports.WRAPPED_SOL_MINT = new web3_js_1.PublicKey('So11111111111111111111111111111111111111112');\nexports.MSRM_MINT = new web3_js_1.PublicKey('MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L');\nexports.MSRM_DECIMALS = 0;\nexports.SRM_MINT = new web3_js_1.PublicKey('SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt');\nexports.SRM_DECIMALS = 6;\nconst LAYOUT = BufferLayout.union(BufferLayout.u8('instruction'));\nLAYOUT.addVariant(0, BufferLayout.struct([\n    BufferLayout.u8('decimals'),\n    layout_1.publicKeyLayout('mintAuthority'),\n    BufferLayout.u8('freezeAuthorityOption'),\n    layout_1.publicKeyLayout('freezeAuthority'),\n]), 'initializeMint');\nLAYOUT.addVariant(1, BufferLayout.struct([]), 'initializeAccount');\nLAYOUT.addVariant(3, BufferLayout.struct([BufferLayout.nu64('amount')]), 'transfer');\nLAYOUT.addVariant(4, BufferLayout.struct([BufferLayout.nu64('amount')]), 'approve');\nLAYOUT.addVariant(5, BufferLayout.struct([]), 'revoke');\nLAYOUT.addVariant(6, BufferLayout.struct([\n    BufferLayout.u8('authorityType'),\n    BufferLayout.u8('newAuthorityOption'),\n    layout_1.publicKeyLayout('newAuthority'),\n]), 'setAuthority');\nLAYOUT.addVariant(7, BufferLayout.struct([BufferLayout.nu64('amount')]), 'mintTo');\nLAYOUT.addVariant(8, BufferLayout.struct([BufferLayout.nu64('amount')]), 'burn');\nLAYOUT.addVariant(9, BufferLayout.struct([]), 'closeAccount');\nconst instructionMaxSpan = Math.max(...Object.values(LAYOUT.registry).map((r) => r.span));\nfunction encodeTokenInstructionData(instruction) {\n    const b = Buffer.alloc(instructionMaxSpan);\n    const span = LAYOUT.encode(instruction, b);\n    return b.slice(0, span);\n}\nfunction decodeTokenInstructionData(instruction) {\n    return LAYOUT.decode(instruction);\n}\nexports.decodeTokenInstructionData = decodeTokenInstructionData;\nfunction initializeMint({ mint, decimals, mintAuthority, freezeAuthority = null, }) {\n    const keys = [\n        { pubkey: mint, isSigner: false, isWritable: true },\n        { pubkey: web3_js_1.SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            initializeMint: {\n                decimals,\n                mintAuthority,\n                freezeAuthorityOption: !!freezeAuthority,\n                freezeAuthority: freezeAuthority || new web3_js_1.PublicKey(0),\n            },\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.initializeMint = initializeMint;\nfunction initializeAccount({ account, mint, owner }) {\n    const keys = [\n        { pubkey: account, isSigner: false, isWritable: true },\n        { pubkey: mint, isSigner: false, isWritable: false },\n        { pubkey: owner, isSigner: false, isWritable: false },\n        { pubkey: web3_js_1.SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            initializeAccount: {},\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.initializeAccount = initializeAccount;\nfunction transfer({ source, destination, amount, owner }) {\n    const keys = [\n        { pubkey: source, isSigner: false, isWritable: true },\n        { pubkey: destination, isSigner: false, isWritable: true },\n        { pubkey: owner, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            transfer: { amount },\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.transfer = transfer;\nfunction approve({ source, delegate, amount, owner }) {\n    const keys = [\n        { pubkey: source, isSigner: false, isWritable: true },\n        { pubkey: delegate, isSigner: false, isWritable: false },\n        { pubkey: owner, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            approve: { amount },\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.approve = approve;\nfunction revoke({ source, owner }) {\n    const keys = [\n        { pubkey: source, isSigner: false, isWritable: true },\n        { pubkey: owner, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            revoke: {},\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.revoke = revoke;\nfunction setAuthority({ target, currentAuthority, newAuthority, authorityType, }) {\n    const keys = [\n        { pubkey: target, isSigner: false, isWritable: true },\n        { pubkey: currentAuthority, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            setAuthority: {\n                authorityType,\n                newAuthorityOption: !!newAuthority,\n                newAuthority,\n            },\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.setAuthority = setAuthority;\nfunction mintTo({ mint, destination, amount, mintAuthority }) {\n    const keys = [\n        { pubkey: mint, isSigner: false, isWritable: true },\n        { pubkey: destination, isSigner: false, isWritable: true },\n        { pubkey: mintAuthority, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            mintTo: { amount },\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.mintTo = mintTo;\nfunction closeAccount({ source, destination, owner }) {\n    const keys = [\n        { pubkey: source, isSigner: false, isWritable: true },\n        { pubkey: destination, isSigner: false, isWritable: true },\n        { pubkey: owner, isSigner: true, isWritable: false },\n    ];\n    return new web3_js_1.TransactionInstruction({\n        keys,\n        data: encodeTokenInstructionData({\n            closeAccount: {},\n        }),\n        programId: exports.TOKEN_PROGRAM_ID,\n    });\n}\nexports.closeAccount = closeAccount;\n//# sourceMappingURL=token-instructions.js.map","import { u8, struct } from 'buffer-layout';\nimport { i64, publicKey, rustEnum, u64, vecU8 } from '@project-serum/borsh';\nimport { WHITELIST_ENTRY_LAYOUT } from './accounts/whitelist';\nconst LOCKUP_INSTRUCTION_LAYOUT = rustEnum([\n    struct([publicKey('authority')], 'initialize'),\n    struct([\n        publicKey('beneficiary'),\n        i64('endTs'),\n        u64('periodCount'),\n        u64('depositAmount'),\n        u8('nonce'),\n    ], 'createVesting'),\n    struct([u64('amount')], 'withdraw'),\n    struct([u64('amount'), vecU8('instructionData')], 'whitelistWithdraw'),\n    struct([vecU8('instructionData')], 'whitelistDeposit'),\n    struct([WHITELIST_ENTRY_LAYOUT.replicate('entry')], 'whitelistAdd'),\n    struct([WHITELIST_ENTRY_LAYOUT.replicate('entry')], 'whitelistDelete'),\n    struct([publicKey('newAuthority')], 'setAuthority'),\n    struct([], 'availableForWithdrawal'),\n]);\nexport function decode(data) {\n    return LOCKUP_INSTRUCTION_LAYOUT.decode(data);\n}\nexport function encode(i) {\n    const buffer = Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const len = LOCKUP_INSTRUCTION_LAYOUT.encode(i, buffer);\n    return buffer.slice(0, len);\n}\n//# sourceMappingURL=instruction.js.map","import { SystemProgram, TransactionInstruction, } from '@solana/web3.js';\nimport * as instruction from './instruction';\nimport * as accounts from './accounts';\nexport async function initializeInstrs(params) {\n    const { programId, authority, name, about, imageUrl, provider, metadataAccount, entity, mqueue, } = params;\n    return [\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: metadataAccount.publicKey,\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(accounts.metadata.SIZE),\n            space: accounts.metadata.SIZE,\n            programId,\n        }),\n        SystemProgram.createAccount({\n            fromPubkey: provider.wallet.publicKey,\n            newAccountPubkey: mqueue.publicKey,\n            lamports: await provider.connection.getMinimumBalanceForRentExemption(accounts.mqueue.MQueue.accountSize()),\n            space: accounts.mqueue.MQueue.accountSize(),\n            programId,\n        }),\n        new TransactionInstruction({\n            keys: [\n                {\n                    pubkey: metadataAccount.publicKey,\n                    isWritable: true,\n                    isSigner: false,\n                },\n            ],\n            programId,\n            data: instruction.encode({\n                initialize: {\n                    authority,\n                    entity,\n                    name,\n                    about,\n                    imageUrl,\n                    chat: mqueue.publicKey,\n                },\n            }),\n        }),\n    ];\n}\nexport async function updateInstr(params) {\n    const { programId, authority, name, about, chat, metadata, imageUrl, } = params;\n    return new TransactionInstruction({\n        keys: [\n            { pubkey: metadata, isWritable: true, isSigner: false },\n            { pubkey: authority, isWritable: false, isSigner: true },\n        ],\n        programId,\n        data: instruction.encode({\n            updateMetaEntity: {\n                name,\n                about,\n                imageUrl,\n                chat,\n            },\n        }),\n    });\n}\n//# sourceMappingURL=transaction.js.map","import { struct, u8 } from 'buffer-layout';\nimport { publicKey, option } from '@project-serum/borsh';\nimport { PublicKey } from '@solana/web3.js';\nexport class Whitelist {\n    constructor(safe, entries) {\n        this.safe = safe;\n        this.entries = entries;\n    }\n    static ITEM_START() {\n        return 32;\n    }\n    static LEN() {\n        return 50;\n    }\n    static ITEM_SIZE() {\n        return 65;\n    }\n    static SIZE() {\n        return Whitelist.ITEM_START() + Whitelist.LEN() * Whitelist.ITEM_SIZE();\n    }\n}\nexport const WHITELIST_ENTRY_LAYOUT = struct([\n    publicKey('programId'),\n    option(publicKey(), 'instance'),\n    u8('nonce'),\n]);\nexport function decode(data) {\n    if (data.length !== SIZE) {\n        throw new Error(`invalid buffer len: ${data.length}`);\n    }\n    const entries = [];\n    const safe = new PublicKey(data.slice(0, Whitelist.ITEM_START()));\n    for (let k = Whitelist.ITEM_START(); k < Whitelist.SIZE(); k += Whitelist.ITEM_SIZE()) {\n        const programId = new PublicKey(data.slice(k, k + 32));\n        const instance = new PublicKey(data.slice(k + 32, k + 64));\n        const nonce = data[k + 64];\n        entries.push({\n            programId,\n            instance,\n            nonce,\n        });\n    }\n    return new Whitelist(safe, entries);\n}\nexport const SIZE = Whitelist.SIZE();\n//# sourceMappingURL=whitelist.js.map"],"sourceRoot":""}